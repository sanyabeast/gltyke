/* @sanyabeast | 2019 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=28)}([function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e);var s=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];var c=function(e){function s(){var t,e,a,c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);for(var f=arguments.length,u=new Array(f),p=0;p<f;p++)u[p]=arguments[p];return a=this,c=(t=o(s)).call.apply(t,[this].concat(u)),e=!c||"object"!==r(c)&&"function"!=typeof c?i(a):c,n.forEach(function(t){l(i(e),new t)}),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(s,t),s}(),l=function(t,e){Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(function(n){if(!n.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length|\$name|\$prototype|\$\$id|extend|\$constructor)$/))try{Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}catch(t){$clog(t)}})};return n.forEach(function(t){l(c.prototype,t.prototype),l(c,t)}),c};function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"uniformType","uniform2fv"),f(this,"x",0),f(this,"y",0),this.array=[0,0],this.set(e,n)}var e,n,r;return e=t,(n=[{key:"set",value:function(t,e){if("object"==c(t))return this.set(t.x,t.y);this.array[0]=t,this.array[1]=e,this.x=t,this.y=e}},{key:"valueOf",value:function(){return this.y}},{key:"toArray",value:function(){return this.array}},{key:"fromArray",value:function(t){this.set(t[0],t[1])}},{key:"update",value:function(){this.set(this.x,this.y)}}])&&l(e.prototype,n),r&&l(e,r),t}();function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"x",0),v(this,"y",0),v(this,"w",0),v(this,"h",0),this.set(e,n,r,o)}var e,n,r;return e=t,(n=[{key:"set",value:function(t,e,n,r){this.x=t,this.y=e,this.w=n,this.h=r}}])&&p(e.prototype,n),r&&p(e,r),t}();function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(this,(t=m(e)).call.apply(t,[this].concat(r)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,u),e}();function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $(t,e){return($=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(t){function e(){var t,n,r,o,i,a,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var c=arguments.length,l=new Array(c),f=0;f<c;f++)l[f]=arguments[f];return r=this,n=!(o=(t=S(e)).call.apply(t,[this].concat(l)))||"object"!==w(o)&&"function"!=typeof o?k(r):o,i=k(n),s="uniform3fv",(a="uniformType")in i?Object.defineProperty(i,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[a]=s,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$(t,e)}(e,u),n=e,(r=[{key:"set",value:function(t,e,n){return"object"==w(t)?this.set(t.x,t.y):"string"==typeof t?this.setCSSHex(t):(this.array[0]=t,this.array[1]=e,this.array[2]=n,this.x=t,this.y=e,void(this.z=n))}},{key:"valueOf",value:function(){return this.toArray()}},{key:"toArray",value:function(){return this.array}},{key:"fromArray",value:function(t){this.set(t[0],t[1],t[2])}},{key:"setCSSHex",value:function(t){if(this.$cssHexString!=t){this.$cssHexString=t;var e=B.cssHexToRGB(t);this.set(e.r,e.g,e.b)}}}])&&x(n.prototype,r),o&&x(n,o),e}();function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var E=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.set(e,n)}var e,n,r;return e=t,(n=[{key:"set",value:function(t,e){if("object"==O(t))return this.set(t.min,t.max);this.min=t,this.max=e}},{key:"size",get:function(){return this.max-this.min}},{key:"isFinite",get:function(){return isFinite(this.min)&&isFinite(this.max)}}])&&P(e.prototype,n),r&&P(e,r),t}();function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var D=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,"uniformType","uniform1f"),C(this,"isSimple",!0),this.set(e)}var e,n,r;return e=t,(n=[{key:"valueOf",value:function(){return this.value}},{key:"set",value:function(t){this.value=t}}])&&z(e.prototype,n),r&&z(e,r),t}();function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var M=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"float32",value:function(t){return new D(t)}},{key:"vec2",value:function(t,e){return new g(t,e)}},{key:"color",value:function(t,e,n){return new _(t,e,n)}},{key:"point",value:function(t,e){return new u(t,e)}},{key:"range",value:function(t,e){return new E(t,e)}},{key:"rect",value:function(t,e,n,r){return new d(t,e,n,r)}},{key:"getExtremum",value:function(t){return this.range(Math.min.apply(Math,t),Math.max.apply(Math,t))}},{key:"nearestMult",value:function(t,e,n,r){return(n?Math.ceil((t+(r?0:1))/e)*e:Math.floor((t-(r?0:1))/e)*e)||0}},{key:"getOrder",value:function(t){return t<0?Math.pow(10,1/Math.floor(1/Math.log10(t))):Math.pow(10,Math.floor(Math.log10(t)))}},{key:"smoothstep",value:function(t,e,n){return e+(t-e)*(1-n)}},{key:"getStep",value:function(t,e,n){return 1-(e-n)/(e-t)}},{key:"vec2add",value:function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t}},{key:"vec2normalize",value:function(t,e){var n=e.x,r=e.y,o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),t.x=e.x*o,t.y=e.y*o),t}},{key:"vec2subtract",value:function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t}},{key:"vec2dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"vec2magnitude",value:function(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}},{key:"vec2set",value:function(t,e,n){return t.x=e,t.y=n,t}},{key:"vec2normal",value:function(t,e,n){return n?this.vec2set(t,e.y,-e.x):this.vec2set(t,-e.y,e.x),t}},{key:"vec2direction",value:function(t,e,n){return this.vec2subtract(t,e,n),this.vec2normalize(t,t),t}},{key:"nearestPowerOfTwo",value:function(t,e){var n=Math.log2(t);return n=e?Math.ceil(n):Math.floor(n),Math.pow(2,n)}}],(n=null)&&j(e.prototype,n),r&&j(e,r),t}();function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var R=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setMultiple(e)}var e,n,r;return e=t,(n=[{key:"setMultiple",value:function(t){var e=this;B.loopCollection(t,function(t,n){e[n]=t})}},{key:"set",value:function(t,e,n){if("object"==T(t)&&void 0===e)return this.setMultiple(t);"function"==typeof e&&n?B.defineProperty(this,t,{get:e}):this[t]=e}}])&&A(e.prototype,n),r&&A(e,r),t}();function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};L(F,"activeSkin",null),L(F,"plotChunkSize",15),L(F,"DPR",window.devicePixelRatio),L(F,"assets",{html:{},css:{},skins:{},shaders:{}}),L(F,"isTouchDevice","ontouchstart"in window),L(F,"values",{domDoubletapTimeout:250,plotLineDefaultLineWidth:2,plotExtremumTweenDuration:200,plotSeriesVisibilityTweenDuration:200,plotExtremumPadding:.35,plotSelectedPositionCircleRadius:10,gridOrderDivider:2,gridPatternYCaptionsCount:5,gridPatternXCaptionsCount:5}),L(F,"l18n",{month_1:"Jan",month_2:"Feb",month_3:"March",month_4:"Apr",month_5:"May",month_6:"Jun",month_7:"Jul",month_8:"Aug",month_9:"Sep",month_10:"Oct",month_11:"Nov",month_12:"Dec",weekday_0:"Sun",weekday_1:"Mon",weekday_2:"Tue",weekday_3:"Wed",weekday_4:"Thu",weekday_5:"Fri",weekday_6:"Sat"}),L(F,"skinValues",{}),L(F,"glColors",{gridPatternLineColor:M.color(1,1,1),gridPatternSelectedValueLineColor:M.color(1,1,1)});var U=F;function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}document.createElement("canvas").getContext("2d");var N=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"loopCollection",value:function(t,e){if(t)if(Array.isArray(t)||"number"==typeof t.length)for(var n=0,r=t.length;n<r&&!e(t[n],n,t);n++);else for(var o in t)if(e(t[o],o,t))break}},{key:"loop",value:function(t,e,n,r,o){if(r)for(var i=t,a=0;i<e&&!o(i,a);i+=n)a++;else for(i=t,a=0;i<=e&&!o(i,a);i+=n)a++}},{key:"generateRandomString",value:function(t,e){for(var n="";n.length<e;)n+=Math.random().toString(32).substring(3,12);return n=n.substring(0,e),"".concat(t,"-").concat(n)}},{key:"assignValues",value:function(t,e){this.loopCollection(e,function(e,n){t[n]=e})}},{key:"parseHTML",value:function(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}},{key:"injectCSS",value:function(t,e){document.querySelector("#glengine-css-".concat(t))?document.querySelector("#glengine-css-".concat(t)).textContent=e:document.querySelector("head").appendChild(this.parseHTML('<style id="glengine-css-'.concat(t,'" type="text/css">').concat(e,"</style>")))}},{key:"generateVarsCSS",value:function(t){var e="";return this.loopCollection(t,function(t,n){e+="--".concat(n,":").concat(t,";\n")}),e=".glengine {".concat(e,"}")}},{key:"generateAttributesSelector",value:function(t){var e="";return this.loopCollection(t,function(t,n){e+="[".concat(n,'="').concat(t,'"]')}),e}},{key:"defineProperty",value:function(t,e,n){Object.defineProperty(t,e,n)}},{key:"proxyMethods",value:function(t,e,n){this.loopCollection(n,function(n,r){t[n]=function(){return e[n].apply(e,arguments)}})}},{key:"proxyProps",value:function(t,e,n){var r=this;this.loopCollection(n,function(n,o){r.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},configurable:!0})})}},{key:"generateRandomCSSHexColor",value:function(){return"#".concat(Math.floor(16777215*Math.random()).toString("16"))}},{key:"cssHexToRGB",value:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16)/255,g:parseInt(e[2],16)/255,b:parseInt(e[3],16)/255}:null}},{key:"stringTemplate",value:function(t,e){var n=t;return e&&this.loopCollection(e,function(t,e){var r=new RegExp("[$]{".concat(e,"}"),"gm");r.test(n)&&(n=n.replace(r,t))}),n}},{key:"formatDate",value:function(t,e){var n="".concat(t,"/").concat(e);if(this.$dateFormatCache[n])return this.$dateFormatCache[n];var r=new Date(t),o=r.getUTCDate().toString(),i=r.getDay().toString(),a=(r.getUTCMonth()+1).toString(),s=U.l18n["month_".concat(a)],c=U.l18n["weekday_".concat(i)];return this.$dateFormatCache[n]=this.stringTemplate(e,{date:o,month:a,monthName:s,weekday:i,weekdayName:c}),this.$dateFormatCache[n]}},{key:"formatValue",value:function(t){var e=t.toString();return t/1e3>=1&&(e="".concat((t/1e3).toString(),"k")),t/1e6>=1&&(e="".concat((t/1e6).toString(),"M")),e}},{key:"throttle",value:function(t,e){t.__throttleTimeoutId&&clearTimeout(t.__throttleTimeoutId),t.__throttleTimeoutId=setTimeout(function(){t()},e)}}],(n=null)&&I(e.prototype,n),r&&I(e,r),t}();G(N,"aggregation",s),G(N,"DataKeeper",R),G(N,"$dateFormatCache",{});var B=N;function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var K=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"on",value:function(e,n){var r=B.generateRandomString(e,16);return this.$subscriptions=this.$subscriptions||{},this.$subscriptions[e]=this.$subscriptions[e]||{},this.$subscriptions[e][r]=n,this.off.bind(t,e,r)}},{key:"emit",value:function(t,e){this.$subscriptions&&this.$subscriptions[t]&&B.loopCollection(this.$subscriptions[t],function(t){t(e)})}},{key:"off",value:function(t,e){this.$subscriptions&&this.$subscriptions[t]&&this.$subscriptions[t][e]&&delete this.$subscriptions[t][e]}}],(n=null)&&H(e.prototype,n),r&&H(e,r),t}();function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e,n){return e&&Y(t.prototype,e),n&&Y(t,n),t}var V=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.UUID=B.generateRandomString(this.constructor.name,32),this.$state=new B.DataKeeper,this.$modules=new B.DataKeeper,this.$temp=new B.DataKeeper}return X(t,[{key:"domComponent",get:function(){if(this.$modules)return this.$modules.domComponent||null}},{key:"domElement",get:function(){if(this.domComponent)return this.domComponent.domElement}}]),X(t,[{key:"on",value:function(t,e){K.on("".concat(this.UUID,"/").concat(t),e)}},{key:"emit",value:function(t,e){K.emit("".concat(this.UUID,"/").concat(t),e)}},{key:"clog",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=console).log.apply(t,["%cGLEngine:".concat(this.constructor.name,":"),"font-weight:bold; color:#3982c6;"].concat(n))}}]),t}();function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tt,et,nt,rt=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=W(e).call(this),(n=!o||"object"!==q(o)&&"function"!=typeof o?J(r):o).$state={normalizedEventData:{prevPanDistance:null},domElement:t.domElement,eventsList:t.eventsList},B.loopCollection(t.eventsList,function(t,r){e.eventDetectors[t].call(J(n),n.$state.domElement,function(t){n.emit(t.type,t),n.emit("$event",{type:t.type,payload:t})})}),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(e,V),n=e,(r=[{key:"$normalizeEventData",value:function(t,e,n){var r=n.getBoundingClientRect(),o=e,i=this.$state.normalizedEventData;return i.isGesture=!1,e instanceof window.TouchEvent?i=this.$normalizeTouchEventData(t,e,n):(i.x=(o.pageX-r.x)*U.DPR,i.y=(o.pageX-r.y)*U.DPR,i.pageX=o.pageX*U.DPR,i.pageY=o.pageY*U.DPR),i.type=t,i.target=n,this.$state.normalizedEventData.originalEvent=e,this.$state.normalizedEventData}},{key:"$normalizeTouchEventData",value:function(t,e,n){return e.touches.length>1?this.$state.normalizedEventData=this.$normalizeTouchGestureEventData(t,e):1===e.touches.length?this.$state.normalizedEventData=this.$normalizeEventData(t,e.touches[0],n):console.log(1),this.$state.normalizedEventData}},{key:"$normalizeTouchGestureEventData",value:function(t,e){if(this.$state.normalizedEventData.isGesture=!0,this.$state.normalizedEventData.touchesCount=e.touches.length,2==e.touches.length){var n=M.getDistance(M.point(e.touches[0].pageX,e.touches[0].pageY),M.point(e.touches[1].pageX,e.touches[1].pageY));this.$state.normalizedEventData.panDistance=n}return this.$state.normalizedEventData}}])&&Q(n.prototype,r),o&&Q(n,o),e}();nt={click:function(t,e){var n=this;t.addEventListener("click",function(r){r.stopPropagation(),e(n.$normalizeEventData("click",r,t))})},drag:function(t,e){var n,r,o,i=this,a=0,s=0,c=0,l=0,f=!1;U.isTouchDevice?(n="touchstart",r="touchend",o="touchmove"):(n="mousedown",r="mouseup",o="mousemove"),t.addEventListener(n,function(e){e.stopPropagation(),e=i.$normalizeEventData("drag",e,t),a=e.pageX,s=e.pageY,f=!0}),window.addEventListener(r,function(t){f=!1}),window.addEventListener(o,function(n){f&&(n.stopPropagation(),n.preventDefault(),n=i.$normalizeEventData("drag",n,t),c=n.pageX-a,l=n.pageY-s,a=n.pageX,s=n.pageY,n.dragX=c,n.dragY=l,e(n))},{passive:!1})},pan:function(t,e){var n=this;if(U.isTouchDevice){var r=!1,o=0;t.addEventListener("touchstart",function(t){r=!0}),window.addEventListener("touchend",function(t){r=!1,o=0}),window.addEventListener("touchmove",function(i){var a=n.$normalizeEventData("pan",i,t);if(r&&a.isGesture&&2==a.touchesCount){var s=o/a.panDistance;o=a.panDistance,a.panDelta=s,e(a)}},{cancelable:!0})}},zoom:function(t,e){var n=this;U.isTouchDevice||t.addEventListener("mousewheel",function(r){r.preventDefault();var o=r.wheelDeltaY>0;(r=n.$normalizeEventData("zoom",r,t)).zoomIn=o,e(r)},{passive:!1})},doubletap:function(t,e){var n=this,r=0;t.addEventListener("click",function(o){o.preventDefault();var i=+new Date;i-r<U.values.domDoubletapTimeout&&e(n.$normalizeEventData("doubletap",o,t)),r=i})},mousemove:function(t,e){var n=this;t.addEventListener("mousemove",function(r){e(n.$normalizeEventData("mousemove",r,t))})}},(et="eventDetectors")in(tt=rt)?Object.defineProperty(tt,et,{value:nt,enumerable:!0,configurable:!0,writable:!0}):tt[et]=nt;var ot=rt;function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){return!e||"object"!==it(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lt(t,e,n){return e&&ct(t.prototype,e),n&&ct(t,n),t}function ft(t,e){return(ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ut=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=at(this,st(e).call(this))).$refs={},n.$dom={},n.$children=[],n.$state={template:t.template,eventHandlers:[]};var r=U.assets.html[t.template];return n.$dom.element=n.$buildTemplate(r,t),t.classList&&B.loopCollection(t.classList,function(t){n.$dom.element.classList.add(t)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ft(t,e)}(e,V),lt(e,[{key:"domElement",get:function(){return this.$dom.element}},{key:"classList",get:function(){return this.domElement.classList}}]),lt(e,[{key:"ref",value:function(t){return this.$refs[t]}},{key:"addChild",value:function(t,e){this.$refs[t].appendChild(e)}},{key:"$buildTemplate",value:function(t,e){var n=this,r=B.parseHTML(t,e);return this.$traverseDOM(r,function(t,r){n.$processAttrs(t,r,e)},null),r}},{key:"$traverseDOM",value:function(t,e,n){var r=this;e(t,n),B.loopCollection(t.children,function(t,n){r.$traverseDOM(t,e,t.parentNode)})}},{key:"$processAttrs",value:function(t,e,n){var r=this;B.loopCollection(t.attributes,function(e,n){switch(e.name){case"$ref":r.$refs[e.value]=t,t.$ref=e.value;break;case"$css":B.loopCollection(e.value.split(" "),function(t,e){B.injectCSS(t,U.assets.css[t])});break;case"$events":var o=new ot({domElement:t,eventsList:e.value.split(" ")});o.on("$event",function(e){var n=t.$ref||"";r.emit("".concat(n,".").concat(e.type),e.payload)}),r.$state.eventHandlers.push(o)}})}}]),e}();function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vt(t,e,n){return e&&pt(t.prototype,e),n&&pt(t,n),t}var dt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=e.vertices,this.buffer=e.buffer}return vt(t,null,[{key:"setValue",value:function(t,e,n){for(var r=n*e,o=arguments.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];B.loopCollection(i,function(e,n){t[r+n]=e})}}]),vt(t,[{key:"setValue",value:function(e,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];t.setValue.apply(t,[this.vertices,e].concat(o))}}]),t}();function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yt(t,e,n){return e&&ht(t.prototype,e),n&&ht(t,n),t}var mt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$state=new B.DataKeeper({geometryInited:!1,indicesInitialized:!1}),this.$temp=new B.DataKeeper,this.attributes=new B.DataKeeper,e&&e.attributes&&this.setAttributesData(e.attributes)}return yt(t,[{key:"geometryInited",get:function(){return this.$state.geometryInited}},{key:"indicesCount",get:function(){return this.$state.indices.length}}]),yt(t,[{key:"setAttributesData",value:function(t){this.$state.attributesData=t}},{key:"init",value:function(t,e,n){var r=this;this.$state.geometryInited=!0,B.loopCollection(this.$state.attributesData,function(n,o){r.$addAttribute(t,e,o,n)}),this.$state.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.$state.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.$state.indices),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}},{key:"$addAttribute",value:function(t,e,n,r){this.$state.indicesInitialized||this.$generateIndices(r.length/2),this.attributes[n]=new dt({vertices:r,buffer:e.createBuffer()}),e.bindBuffer(e.ARRAY_BUFFER,this.attributes[n].buffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null)}},{key:"$generateIndices",value:function(t){var e=[];B.loop(0,t,1,!0,function(t){e[t]=t}),this.$state.indicesInitialized=!0,this.$state.indices=e}},{key:"bind",value:function(t,e,n){var r=this;B.loopCollection(this.attributes,function(t,o){var i=t.buffer;e.bindBuffer(e.ARRAY_BUFFER,i),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r.$state.indexBuffer);var a=e.getAttribLocation(n,o);a>-1&&(e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(a))})}}]),t}();function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var gt=function(){function t(e,n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=n,this.name=e,this.shaderProgram=this.shaderProgram,this.type=o.uniformType,this.value=o,this.$state=new B.DataKeeper({loc:n.getUniformLocation(r,e)})}var e,n,r;return e=t,(n=[{key:"update",value:function(){this.value.isSimple?this.gl[this.type](this.$state.loc,this.value.valueOf()):this.gl[this.type](this.$state.loc,this.value.toArray())}}])&&bt(e.prototype,n),r&&bt(e,r),t}();function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xt(t,e,n){return e&&wt(t.prototype,e),n&&wt(t,n),t}var St=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$state=new B.DataKeeper({uniformsData:e.uniforms,materialInited:!1,uniformsInited:!1,vertexShaderCode:U.assets.shaders[e.vertexShader],fragmentShaderCode:U.assets.shaders[e.fragmentShader]}),this.uniforms=new B.DataKeeper}return xt(t,[{key:"materialInited",get:function(){return this.$state.materialInited}},{key:"program",get:function(){return this.$state.shaderProgram}}]),xt(t,[{key:"init",value:function(t,e){this.$state.materialInited=!0,this.$state.fragmentShader=this.$compileShader(t,e,"fragment",this.$state.fragmentShaderCode),this.$state.vertexShader=this.$compileShader(t,e,"vertex",this.$state.vertexShaderCode);var n=this.$state.shaderProgram=e.createProgram();e.attachShader(n,this.$state.vertexShader),e.attachShader(n,this.$state.fragmentShader),this.$linkProgram(e),this.$initUniforms(t,e)}},{key:"$compileShader",value:function(t,e,n,r){var o=e.createShader("vertex"==n?e.VERTEX_SHADER:e.FRAGMENT_SHADER);return e.shaderSource(o,B.stringTemplate(r,{maxShaderPrecision:t.maxShaderPrecision})),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)||console.log("Shader compilation failed: ".concat(e.getShaderInfoLog(o)," ")),o}},{key:"$initUniforms",value:function(t,e){this.addMultipleUniforms(e,this.$state.uniformsData),this.addMultipleUniforms(e,{position:M.vec2(0,0),worldPosition:M.vec2(0,0),worldScale:M.vec2(0,0),viewportSize:M.vec2(0,0),resolution:M.float32(1),opacity:M.float32(1),time:M.float32(0),mouse:M.vec2(1,1)})}},{key:"$linkProgram",value:function(t){t.linkProgram(this.$state.shaderProgram)}},{key:"addMultipleUniforms",value:function(t,e){var n=this;B.loopCollection(e,function(e,r){n.addUniform(r,t,n.$state.shaderProgram,e)})}},{key:"addUniform",value:function(t,e,n,r){this.uniforms[t]=new gt(t,e,n,r)}},{key:"updateUniforms",value:function(t){var e=this;t&&B.loopCollection(t,function(t,n){e.uniforms[n].value.set(t)}),B.loopCollection(this.uniforms,function(t,e){t.update()})}}]),t}();function kt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ot=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_t(this,"parentNode",null),this.children=[],this.UUID=B.generateRandomString("rendering-object-".concat(this.constructor.name),16),this.$data={},this.$temp={},this.$params={},this.$state={position:M.vec2(0,0),boundRect:M.rect(0,0,0,0),culled:!0,projectionCulled:!0,visible:!0,opacity:M.float32(1)},this.$setupHiddenDOM(),e&&(this.defaultParams?this.setParams(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){_t(t,e,n[e])})}return t}({},this.defaultParams,{params:e})):this.setParams(e)),B.proxyProps(this,this.$state,["culled","projectionCulled","position","visible","opacity"])}var e,n,r;return e=t,(n=[{key:"getBoundRect",value:function(){return this.$state.boundRect}},{key:"setAttributes",value:function(t){var e=this;B.loopCollection(t,function(t,n){e.$hiddenDOM.setAttribute(n,t)})}},{key:"setStyles",value:function(t){}},{key:"setParams",value:function(t){var e=this;B.loopCollection(t,function(t,n){"styles"==n?e.setStyles(t):"attributes"==n?e.setAttributes(t):e.$params[n]=void 0!==t?t:e.$params.name})}},{key:"addChild",value:function(t){this.children.push(t),t.parentNode=this,this.$hiddenDOM.appendChild(t.$hiddenDOM)}},{key:"removeChild",value:function(t){var e=this;B.loopCollection(this.children,function(n,r){if(t.UUID==n.UUID)return e.$hiddenDOM.removeChild(t.$hiddenDOM),t.parentNode=null,e.children.splice(r,1),!0})}},{key:"render",value:function(t,e,n,r,o){o*=this.opacity,n+=this.$state.position.x,r+=this.$state.position.y,B.loopCollection(this.children,function(i,a){i.visible&&i.render(t,e,n,r,o)})}},{key:"select",value:function(t,e){var n=kt(this.$hiddenDOM.querySelectorAll(B.generateAttributesSelector(t)));return B.loopCollection(n,function(t,r){e&&e(t.$renderingObject,r),n[r]=t.$renderingObject}),n}},{key:"$setupHiddenDOM",value:function(){this.$hiddenDOM=document.createElement(this.constructor.name),this.$hiddenDOM.$renderingObject=this,this.$hiddenDOM.setAttribute("type",this.constructor.name)}}])&&$t(e.prototype,n),r&&$t(e,r),t}();function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ct(t,e,n){return(Ct="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Dt(t){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jt(t,e){return(jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mt=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,n=!(o=Dt(e).call(this,t))||"object"!==Pt(o)&&"function"!=typeof o?zt(r):o,B.proxyProps(zt(n),n.$params,["material","geometry"]),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jt(t,e)}(e,Ot),n=e,(r=[{key:"render",value:function(t,n,r,o,i){Ct(Dt(e.prototype),"render",this).call(this,t,n,r,o,i),i*=this.opacity;var a=this.material.uniforms;r+=this.position.x,o+=this.position.y,this.material.materialInited||this.material.init(t,n),this.geometry.geometryInited||this.geometry.init(t,n,this.material.program),n.useProgram(this.material.program),this.geometry.bind(t,n,this.material.program),a.position.value.set(r,o),this.material.updateUniforms({worldPosition:t.worldPosition,worldScale:t.worldScale,viewportSize:t.size,resolution:U.DPR,time:t.time,opacity:i,mouse:t.mouse}),n.drawElements(n.TRIANGLES,this.geometry.indicesCount,n.UNSIGNED_SHORT,0)}}])&&Et(n.prototype,r),o&&Et(n,o),e}();function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var At=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"addTask",value:function(e){var n=B.generateRandomString("task",16);return this.$tasks=this.$tasks||{},this.$tasks[n]=e,this.removeTask.bind(t,n)}},{key:"removeTask",value:function(t){delete this.$tasks[t]}},{key:"init",value:function(){this.$state={prevFrameTime:+new Date},this.tick=this.tick.bind(this)}},{key:"start",value:function(){this.stop(),this.init(),this.tick()}},{key:"stop",value:function(){window.cancelAnimationFrame(this.$rafId)}},{key:"tick",value:function(){this.$rafId=window.requestAnimationFrame(this.tick);var t=+new Date,e=t-this.$state.prevFrameTime,n=e/(1e3/60);this.$state.prevFrameTime=t,B.loopCollection(this.$tasks,function(t,r){t(n,e)})}}],(n=null)&&Tt(e.prototype,n),r&&Tt(e,r),t}();function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ft(t,e){return!e||"object"!==Rt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ut(t){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gt(t,e,n){return e&&It(t.prototype,e),n&&It(t,n),t}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ft(this,Ut(e).call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Lt(t,e,n[e])})}return t}({scale:M.vec2(1,1),size:M.vec2(1,1),applyScaleX:!1,applyScaleY:!1,applySizeX:!1,applySizeY:!1,applyPosX:!0,applyPosY:!0},t)))).$temp={prevEngine:null,prevGl:null,prevPx:0,prevPy:0},n.$state.culled=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(e,Ot),Gt(e,[{key:"scale",get:function(){return this.$params.scale}},{key:"size",get:function(){return this.$params.size}},{key:"soloRenderingAvailable",get:function(){return!!this.$temp.prevEngine}}]),Gt(e,[{key:"setStyles",value:function(t,e){B.assignValues((e||this.$params.domElement).style,t)}},{key:"setStyle",value:function(t,e){this.$params.domElement.style[t]=e}},{key:"render",value:function(t,e,n,r){if(!t){if(!this.soloRenderingAvailable)return;t=this.$temp.prevEngine,e=this.$temp.prevGl,n=this.$temp.prevPx,r=this.$temp.prevPy}var o=U.DPR;this.$temp.prevEngine=t,this.$temp.prevGl=e,this.$temp.prevPx=n,this.$temp.prevPy=r,n+=this.$state.position.x,r+=this.$state.position.y;var i=t.toReal(n,r),a=t.toRealScale(this.$params.scale.x,this.$params.scale.y),s=t.toRealScale(this.$params.size.x,this.$params.size.y),c=this.$params.applyScaleX,l=this.$params.applyScaleY,f=this.$params.applySizeX,u=this.$params.applySizeY,p=this.$params.applyPosX,v=this.$params.applyPosY;this.setStyle("transform","translate(".concat(p?i.x/o:0,"px, ").concat(v?i.y/o:0,"px) scale(").concat(c?a.x/o:1,", ").concat(l?a.y/o:1,")")),f&&this.setStyle("width","".concat(s.x/o,"px")),u&&this.setStyle("height","".concat(s.y/o,"px"))}}]),e}();function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vt=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Kt(this,Yt(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(e,Ot),e}();function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wt(t,e){return!e||"object"!==qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jt(t){return(Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var te=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Wt(this,Jt(e).call(this,t))).$temp.setMultiple({direction:M.vec2(0,0),negNormal:M.vec2(0,0),posNormal:M.vec2(0,0)}),t.points&&n.setAttributesData(n.$generateLineGeometry(t.points)),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(e,mt),n=e,(r=[{key:"$generateLineGeometry",value:function(t){var e=this,n=[],r=[],o=0,i=dt.setValue;return B.loopCollection(t,function(a,s){var c=s<t.length-2?t[s+1]:t[s-1],l=M.vec2direction(e.$temp.direction,a,c),f=M.vec2normal(e.$temp.negNormal,l,!1),u=M.vec2normal(e.$temp.posNormal,l,!0);i(n,2,o,a.x,a.y),i(r,2,o++,f.x,f.y),i(n,2,o,c.x,c.y),i(r,2,o++,f.x,f.y),i(n,2,o,a.x,a.y),i(r,2,o++,u.x,u.y),i(n,2,o,a.x,a.y),i(r,2,o++,u.x,u.y),i(n,2,o,c.x,c.y),i(r,2,o++,f.x,f.y),i(n,2,o,c.x,c.y),i(r,2,o++,u.x,u.y)}),{coords:n,normal:r}}}])&&Qt(n.prototype,r),o&&Qt(n,o),e}();function ee(t){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function re(t,e){return!e||"object"!==ee(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oe(t){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ae=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=re(this,oe(e).call(this,t))).$params.material=new St({fragmentShader:"frag.default",vertexShader:"vert.line2d",uniforms:t.uniforms}),t.points&&n.setPoints(t.points),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}(e,Mt),n=e,(r=[{key:"setPoints",value:function(t){this.$data.points=t;var e=M.getExtremum(t);this.$state.boundRect.set(t[0].x,e.min,t[t.length-1].x-this.$state.boundRect.x,e.size),this.geometry=new te({points:t})}}])&&ne(n.prototype,r),o&&ne(n,o),e}();function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function le(t,e){return!e||"object"!==se(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ue(t,e){return(ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pe=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=le(this,fe(e).call(this,t))).$temp.setMultiple({direction:M.vec2(0,0),negNormal:M.vec2(0,0),posNormal:M.vec2(0,0)}),n.setAttributesData(n.$generateRectGeometry(t.width||1,t.height||1)),n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ue(t,e)}(e,mt),n=e,(r=[{key:"$generateRectGeometry",value:function(t,e){return{coords:[0,0,0,e/2,t/2,0,t/2,0,0,e/2,t/2,e/2]}}}])&&ce(n.prototype,r),o&&ce(n,o),e}();function ve(t){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function he(t,e,n){return(he="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ye(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ye(t){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function be(t,e,n){return e&&me(t.prototype,e),n&&me(t,n),t}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function we(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xe=function(t){function e(){var t,n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r=ye(e).call(this),(t=!r||"object"!==ve(r)&&"function"!=typeof r?de(n):r).$modules={canvas:new ut({template:"canvas-element"})},t.$dom={canvasElement:t.$modules.canvas.domElement},t.$state={gl:t.$dom.canvasElement.getContext("webgl"),size:M.vec2(1,1),position:M.vec2(0,0),scale:M.vec2(1,1),viewport:M.rect(0,0,1,1),worldPosition:M.vec2(0,0),worldScale:M.vec2(1,1),projectionModified:!0,sizeNeedsUpdate:!0,maxShaderPrecision:"mediump",time:M.float32(0),mouse:M.vec2(0,0)},t.$temp.prevTimeUpdate=+new Date,t.$temp.time=+new Date,t.$modules.canvas.on("canvas.mousemove",function(e){t.$state.mouse.set(e.x,e.y)});var o=t.$state.gl;return o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.enable(o.BLEND),o.disable(o.DEPTH_TEST),t.$detectMaxFloatPrecision(),B.proxyProps(de(t),t.$state,["position","scale","viewport","size","worldScale","worldPosition","maxShaderPrecision","time","mouse"]),t.render=t.render.bind(de(t)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(e,B.aggregation(V,Ot)),be(e,[{key:"domElement",get:function(){return this.$dom.canvasElement}}],[{key:"processAsset",value:function(t,e,n,r){t.keys().forEach(function(o){var i=t(o).default,a=o.replace(".".concat(n),"").replace("./","");U.assets[e][a]=r?r(i):i})}},{key:"loadAssets",value:function(){this.processAsset(n(1),"html","html"),this.processAsset(n(11),"css","scss"),this.processAsset(n(13),"shaders","glsl")}}]),be(e,[{key:"setSize",value:function(t,e){t*=U.DPR,e*=U.DPR,this.$state.size.x===t&&this.$state.size.y===e||t&&e&&(this.$dom.canvasElement.width=t,this.$dom.canvasElement.height=e,this.$state.size.set(t,e),this.$state.gl.viewport(0,0,t,e),this.updateProjection())}},{key:"setScale",value:function(t,e){this.$state.viewport.w=this.$state.size.x*t,this.$state.viewport.h=this.$state.size.y*e,this.updateProjection()}},{key:"setPosition",value:function(t,e){e="number"==typeof e?e:this.$state.position.y,this.$state.position.set(t,e),this.updateProjection()}},{key:"setViewport",value:function(t,e,n,r){var o=this.$state.viewport;o.set(t,e,n,r),this.$state.position.set(o.x,o.y),this.emit("viewport.updated",o),this.updateProjection()}},{key:"fitSize",value:function(){if(this.domElement.parentNode){var t=this.domElement.parentElement.getBoundingClientRect();this.setSize(t.width,t.height)}}},{key:"updateProjection",value:function(){var t=this.$state.viewport,e=this.$state.position,n=this.$state.worldPosition,r=this.$state.worldScale,o=this.$state.size,i=this.$state.scale;i.set(t.w/o.x,t.h/o.y),t.x=e.x,t.y=e.y,n.set(t.x,t.y),r.set(i.x/2,i.y/2),this.$state.projectionModified=!0,this.emit("projection.updated",t)}},{key:"toReal",value:function(t,e){return M.point(Math.round((t-this.position.x)/this.scale.x),Math.round(this.size.y-(e-this.position.y)/this.scale.y))}},{key:"toRealScale",value:function(t,e){return M.point(Math.round(t/this.scale.x),Math.round(e/this.scale.y))}},{key:"toVirtual",value:function(t,e){return M.point(t*this.scale.x+this.position.x,(this.size.y-e)*this.scale.y+this.position.y)}},{key:"toVirtualScale",value:function(t,e){return M.point(t*this.scale.x,e*this.scale.y)}},{key:"render",value:function(t){this.fitSize(),(this.$state.projectionModified||!0===t)&&(this.$state.projectionModified=!1,this.$updateTime(),he(ye(e.prototype),"render",this).call(this,this,this.$state.gl,-this.$state.position.x,-this.$state.position.y,1))}},{key:"updateValue",value:function(t){this.value=t||this.value}},{key:"$detectMaxFloatPrecision",value:function(){var t=this.$state.gl,e="lowp";B.loopCollection({LOW_FLOAT:"lowp",MEDIUM_FLOAT:"mediump",HIGH_FLOAT:"highp"},function(n,r){var o=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t[r]),i=t.getShaderPrecisionFormat(t.VERTEX_SHADER,t[r]);o&&i&&o.precision&&i.precision&&(e=n)}),this.clog("Max shader float precision format: ".concat(e)),this.$state.maxShaderPrecision=e}},{key:"$updateTime",value:function(){var t=+new Date,e=t-this.$temp.prevTimeUpdate;this.$temp.prevTimeUpdate=t,this.$temp.time=(this.$temp.time+e)%6e4,this.$state.time.set(this.$temp.time/1e3)}}]),e}();we(xe,"MainLoop",At),we(xe,"ChartMath",M),we(xe,"Utils",B),we(xe,"Geometry",mt),we(xe,"Material",St),we(xe,"Mesh",Mt),we(xe,"RenderingObject",Ot),we(xe,"Uniform",gt),we(xe,"DOMElement",Bt),we(xe,"Group",Vt),we(xe,"Line",ae),we(xe,"RectGeometry",pe),xe.loadAssets();e.default=xe},function(t,e,n){var r={"./canvas-element.html":2,"./chart-control-series-button.html":3,"./chart-control.html":4,"./frame-control.html":5,"./grid-caption.html":6,"./selected-position-circle.html":7,"./selected-values-banner-value.html":8,"./selected-values-banner.html":9,"./telechart.html":10};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=1},function(t,e,n){n.r(e),e.default='<canvas class="telechart-canvas fit-width fit-height" $ref="canvas" $events="mousemove"></canvas>'},function(t,e,n){n.r(e),e.default='<div \r\n\tclass="series-button flex-row flex-a-center button"\r\n\t$ref="series-button"\r\n\t$events="click"\r\n>\r\n\t\t<div \r\n\t\t\tclass="checkbox-wrapper border-box pos-relative"\r\n\t\t\t$ref="checkbox-wrapper"\r\n\t\t>\r\n\t\t\t<div class="box box-a pos-absolute"></div>\r\n\t\t\t<div class="box box-b pos-absolute"></div>\r\n\t\t</div>\r\n\t\t<p \r\n\t\t\tclass="caption"\r\n\t\t\t$ref="caption"\r\n\t\t></p>\r\n</div>'},function(t,e,n){n.r(e),e.default='<div\r\n\tclass="chart-controls fit-width fit-height"\r\n\t$ref="chart-controls"\r\n>\r\n\t\t<div\r\n\t\t\tclass="series-buttons fit-width fit-height flex-row"\r\n\t\t\t$ref="series-buttons"\r\n\t\t>\r\n\t\t\t\r\n\t\t</div>\r\n</div>'},function(t,e,n){n.r(e),e.default='<div \r\n\tclass="frame-control pos-absolute fit-height border-box fit-width flex-row"\r\n\t$ref="frame-control"\r\n>\r\n\t\t<div\r\n\t\t\tclass="filler left-filler fit-height pos-absolute border-box"\r\n\t\t\t$ref="frame-control.filler.left"\r\n\t\t\t$events="drag"\r\n\t\t></div>\r\n\t\t\r\n\t\t<div\r\n\t\t\tclass="frame fit-height flex-no-shrink pos-absolute border-box"\r\n\t\t\t$ref="frame-control.frame"\r\n\t\t\t$events="drag"\r\n\t\t>\r\n\t\t</div>\r\n\t\r\n\t\t<div\r\n\t\t\tclass="filler right-filler fit-height pos-absolute border-box"\r\n\t\t\t$ref="frame-control.filler.right"\r\n\t\t\t$events="drag"\r\n\t></div>\r\n</div>'},function(t,e,n){n.r(e),e.default='<div class="grid-caption pos-absolute">\r\n\t<p  class="font-w-bold"\r\n\t\t$ref="caption"\r\n\t>test</p>\r\n</div>'},function(t,e,n){n.r(e),e.default='<div \r\n\tclass="selected-position-circle pos-absolute"\r\n>\r\n\t<div \r\n\t\tclass="inner border-box"\r\n\t\t$ref="inner"\r\n\t></div>\r\n</div>'},function(t,e,n){n.r(e),e.default='<div\r\n\tclass="series-value flex-column"\r\n\t$ref="series-value"\r\n>\r\n\t<div\r\n\t\tclass="value-container"\r\n\t>\r\n\t\t<p\r\n\t\t\tclass="value font-w-bold"\r\n\t\t\t$ref="value"\r\n\t\t></p>\r\n\t</div>\r\n\t<div\r\n\t\tclass="caption-container"\r\n\t>\r\n\t\t<p\r\n\t\t\tclass="caption"\r\n\t\t\t$ref="caption"\r\n\t\t></p>\r\n\t</div>\r\n</div>'},function(t,e,n){n.r(e),e.default='<div\r\n\tclass="selected-values-banner pos-absolute flex-column"\r\n\t$ref="banner"\r\n\t$events="click"\r\n>\r\n\t<div class="inner fit-width fit-height flex-column">\r\n\t\t<div class="date-value">\r\n\t\t\t<p\r\n\t\t\t\tclass="value"\r\n\t\t\t\t$ref="date-value"\r\n\t\t\t></p>\r\n\t\t</div>\r\n\t\t<div\r\n\t\t\tclass="series-values-wrapper flex-row"\r\n\t\t\t$ref="series-values-wrapper"\r\n\t\t></div>\r\n\t</div>\r\n</div>'},function(t,e,n){n.r(e),e.default='<div \r\n\tclass="telechart flex-column fit-width fit-height border-box"\r\n\t$ref="telechart"\r\n\t$css="modifiers telechart">\r\n\t\t<div class="header caption flex-row flex-a-center flex-no-shrink">\r\n\t\t\t<p class="font-w-bold">Followers</p>\r\n\t\t</div>\r\n\t\t<div \r\n\t\t\tclass="major-plot-wrapper fit-width pos-relative flex-stretch-content"\r\n\t\t\t$ref="major-plot-wrapper">\r\n\t\t</div>\r\n\t\t<div \r\n\t\t\tclass="panorama-plot-wrapper fit-width pos-relative  overflow-hidden"\r\n\t\t\t$ref="panorama-plot-wrapper">\r\n\t\t</div>\r\n\t\t<div \r\n\t\t\tclass="chart-controls-wrapper flex-row fit-width flex-no-shrink"\r\n\t\t\t$ref="chart-controls-wrapper">\r\n\t\t</div>\r\n\t\t<div \r\n\t\t\tclass="theme-switcher button fit-width flex-row flex-j-center"\r\n\t\t\t$ref="theme-switcher"\r\n\t\t\t$events="click">\r\n\t\t\t\t<p \r\n\t\t\t\t\tclass="font-w-normal"\r\n\t\t\t\t\t$ref="theme-switcher-caption">Switch to Night Mode\r\n\t\t\t\t</p>\r\n\t\t</div>\r\n</div>'},function(t,e,n){var r={"./modifiers.scss":12};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=11},function(t,e,n){n.r(e),e.default=".flex-row {\n  display: flex;\n  flex-direction: row; }\n\n.flex-column {\n  display: flex;\n  flex-direction: column; }\n\n.flex-j-center {\n  display: flex;\n  justify-content: center; }\n\n.flex-a-center {\n  display: flex;\n  align-items: center; }\n\n.flex-grow {\n  display: flex;\n  flex-grow: 1; }\n\n.flex-no-shrink {\n  display: flex;\n  flex-shrink: 0; }\n\n.flex-shrink {\n  display: flex;\n  flex-shrink: 1; }\n\n.flex-stretch-content {\n  display: flex;\n  align-items: stretch;\n  justify-content: stretch; }\n\n.fit-width {\n  width: 100%; }\n\n.fit-height {\n  height: 100%; }\n\n.border-box {\n  box-sizing: border-box; }\n\n.pos-absolute {\n  position: absolute;\n  left: 0;\n  top: 0; }\n\n.pos-relative {\n  position: relative; }\n\n.font-w-lighter {\n  font-weight: lighter; }\n\n.font-w-normal {\n  font-weight: normal; }\n\n.font-w-bold {\n  font-weight: 600; }\n\n.font-w-bolder {\n  font-weight: bolder; }\n\n.overflow-hidden {\n  overflow: hidden; }\n"},function(t,e,n){var r={"./frag.bubbles.glsl":14,"./frag.crosses.glsl":15,"./frag.default.glsl":16,"./frag.flower.glsl":17,"./frag.fluid.glsl":18,"./frag.fluid_m.glsl":19,"./frag.framework.glsl":20,"./frag.rain-road.glsl":21,"./frag.tech-roads.glsl":22,"./frag.tubex.glsl":23,"./vert.default.glsl":24,"./vert.grid-line-x.glsl":25,"./vert.grid-line-y.glsl":26,"./vert.line2d.glsl":27};function o(t){var e=i(t);return n(e)}function i(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=i,t.exports=o,o.id=13},function(t,e,n){n.r(e),e.default="// Colorful Voronoi\r\n// By: Brandon Fogerty\r\n// bfogerty at gmail dot com\r\n// xdpixel.com\r\n\r\n#ifdef GL_ES\r\nprecision ${maxShaderPrecision} float;\r\n#endif\r\n\r\nuniform float time;\r\nuniform vec2 viewportSize;\r\n\r\nvec2 hash(vec2 p)\r\n{\r\n    mat2 m = mat2(  13.85, 147.77,\r\n                    199.41, 88.48\r\n                );\r\n\r\n    return fract(sin(m*p) * 46738.29);\r\n}\r\n\r\nfloat voronoi(vec2 p)\r\n{\r\n    vec2 g = floor(p);\r\n    vec2 f = fract(p);\r\n\r\n    float distanceToClosestFeaturePoint = 11.0;\r\n    for(int y = -1; y <= 1; y++)\r\n    {\r\n        for(int x = -1; x <= 1; x++)\r\n        {\r\n            vec2 latticePoint = vec2(x, y);\r\n            float currentDistance = distance(latticePoint + hash(g+latticePoint), f);\r\n            distanceToClosestFeaturePoint = min(distanceToClosestFeaturePoint, currentDistance);\r\n        }\r\n    }\r\n\r\n    return distanceToClosestFeaturePoint;\r\n}\r\n\r\nvoid main( void )\r\n{\r\n    vec2 uv = ( gl_FragCoord.xy / viewportSize.xy ) * 2.0 - 1.0;\r\n    uv.x *= viewportSize.x / viewportSize.y;\r\n\r\n    float offset = voronoi(uv*10.0 + vec2(time));\r\n    float t = 1.0/abs(((uv.x + sin(uv.y + time)) + offset) * 30.0);\r\n\r\n    float r = voronoi( uv * 1.0 ) * 10.0;\r\n    vec3 finalColor = vec3(10.0 * uv.y, 1.0, 1.0 * r) * t;\r\n    \r\n    gl_FragColor = vec4(finalColor, 1.0 );\r\n}"},function(t,e,n){n.r(e),e.default="#ifdef GL_ES\r\nprecision ${maxShaderPrecision} float;\r\n#endif\r\n\r\n#extension GL_OES_standard_derivatives : enable\r\n\r\nuniform float time;\r\nuniform vec2 viewportSize;\r\n\r\nconst float k = 0.4142135623730950488016887242097;\r\nconst float pi2_3 = 2.0943951023931954923084289221863;\r\n\r\nbool getr_( bool r, int a, int n ) {\r\n\tfor (int i = 1; i < 1000; ++i) {\r\n\t\tif (i > n) return r; \r\n\t\tr = (r != (mod(((float(a + i) - 0.5) * k + 0.5), 2.0) < 1.0));\r\n\t}\r\n}\r\n\t\r\nbool getr( int i1, int i2 ) {\r\n\tint n1 = (i1 < i2 ? i1 : i2);\r\n\tint n2 = (i1 + i2 - 2 * n1);\r\n\tbool r = getr_(false, 0, n1);\r\n\tr = r ^^ getr_(r, n1, n2);\r\n\treturn r ^^ ((mod(float(i1), 2.0) >= 1.0 ) && (mod(float(i2), 2.0) >= 1.0));\r\n}\r\n\r\nvoid main( void ) {\r\n\tvec2 p = gl_FragCoord.xy - viewportSize;\r\n\tfloat t = (sin(time) * 0.4 - time * 0.3), s = sin(t), c = cos(t);\r\n\tfloat r = min(viewportSize.x, viewportSize.y) * 1.2;\r\n\tfloat l = length(p) / r; l = 1.0 - l * l; l = (l > 0.0 ? l : 0.0);\r\n\tfloat d = exp((sin(time) + 1.0) * 0.7);\r\n\tp = vec2(c * p.x - s * p.y, s * p.x + c * p.y);\r\n\tp = abs(p / d) + (0.5, 0.5);\r\n\t\r\n\tfloat R = sin(time + pi2_3 * 0.0) * 0.5 + 0.5;\r\n\tfloat G = sin(time + pi2_3 * 1.0) * 0.5 + 0.5;\r\n\tfloat B = sin(time + pi2_3 * 2.0) * 0.5 + 0.5;\r\n\t\r\n\tgl_FragColor = vec4( (getr(int(p.x), int(p.y)) ? vec3(l * R, l * G, l * B) : vec3(0.0, 0.0, 0.0)), 1.0 );\r\n}"},function(t,e,n){n.r(e),e.default="precision ${maxShaderPrecision} float;\r\n\r\nuniform vec3 diffuse;\r\nuniform float opacity;\r\n\r\nvoid main( void ) {\r\n   gl_FragColor = vec4( diffuse, opacity );\r\n}"},function(t,e,n){n.r(e),e.default="#ifdef GL_ES\r\nprecision ${maxShaderPrecision} float;\r\n\r\n#endif\r\n\r\n#extension GL_OES_standard_derivatives : enable\r\n\r\nconst float PI = acos(-1.0);\r\nconst float TAU = PI * 2.0;\r\nconst float phi = sqrt(5.0) * 0.5 + 0.5;\r\n\r\nconst float goldenAngle = TAU / phi / phi;\r\n\r\nuniform float time;\r\nuniform vec2 viewportSize;\r\n\r\nvec2 rotateAroundPoint(float x){\r\n\treturn vec2(sin(x), cos(x));\r\n}\r\n\r\nvec3 hsv2rgb(vec3 c)\r\n{\r\n    const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\r\n\t\r\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\r\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\r\n}\r\n\r\nvec3 calculateGoldenShape(vec2 p){\r\n\tconst int steps =256;\r\n\tconst float rSteps = 1.0 / float(steps);\r\n\t\r\n\tvec3 result = vec3(0.0);\r\n\t\r\n\tfor (int i = 0; i < steps; ++i)\r\n\t{\r\n\t\tfloat n = float(i);\r\n\t\t\r\n\t\tfloat inc = n * rSteps;\r\n\t\tvec2 offset = rotateAroundPoint(fract(-time*0.055)*6.28+n * goldenAngle) * inc * 0.45;\r\n\t\t\r\n\t\tvec3 dist = vec3(distance(p, offset));\r\n\t\t     dist = exp2(-dist * 64.0) * hsv2rgb(vec3(fract(time*0.2)+inc*0.75, 1.0, 1.0));\r\n\t\t\r\n\t\tresult = max(result, dist);\r\n\t}\r\n\t\r\n\treturn result;\r\n}\r\n\r\nvoid main( void ) {\r\n\r\n\tvec2 position = (gl_FragCoord.xy / viewportSize.xy - 0.5) * vec2(viewportSize.x/ viewportSize.y, 1.0);\r\n\r\n\tvec3 color = vec3(0.0);\r\n\t     color += calculateGoldenShape(position) * 3.0;\r\n\t     color = pow(color, vec3(2.2));\r\n\t     color /= color + 1.0;\r\n\t     color = pow(color, vec3(1.0 / 2.2));\r\n\r\n\t\r\n\tgl_FragColor = vec4(color, 1.0 );\r\n\r\n}"},function(t,e,n){n.r(e),e.default="// Modified so it doesn't really move. Very childish and easy fix.\r\n#ifdef GL_ES\r\nprecision ${maxShaderPrecision} float;\r\n#endif\r\n\r\nuniform vec2 viewportSize;\r\nuniform float time;\r\n\r\nuniform vec2 mouse;\r\n\r\nconst int   complexity      = 47;    // More points of color.\r\nconst float mouse_factor    = 56.0;  // Makes it more/less jumpy.\r\nconst float mouse_offset    = 0.0;   // Drives complexity in the amount of curls/cuves.  Zero is a single whirlpool.\r\nconst float fluid_speed     = 108.0;  // Drives speed, higher number will make it slower.\r\nconst float color_intensity = 0.8;\r\n  \r\n\r\nvoid main()\r\n{\r\n  vec2 p=(2.0*gl_FragCoord.xy-viewportSize)/max(viewportSize.x,viewportSize.y);\r\n  for(int i=1;i<complexity;i++)\r\n  {\r\n    vec2 newp=p + (time + mouse.x/1000.)*0.001;\r\n    newp.x+=0.6/float(i)*sin(float(i)*p.y+time/fluid_speed+0.3*float(i)) + 0.5; // + mouse.y/mouse_factor+mouse_offset;\r\n    newp.y+=0.6/float(i)*sin(float(i)*p.x+time/fluid_speed+0.3*float(i+10)) - 0.5; // - mouse.x/mouse_factor+mouse_offset;\r\n    p=newp;\r\n  }\r\n  vec3 col=vec3(color_intensity*sin(3.0*p.x)+color_intensity,color_intensity*sin(3.0*p.y)+color_intensity,color_intensity*sin(p.x+p.y)+color_intensity);\r\n  gl_FragColor=vec4(col / 2., 1.0);\r\n}\r\n"},function(t,e,n){n.r(e),e.default="#ifdef GL_ES\r\nprecision ${maxShaderPrecision} float;\r\n#endif\r\n\r\n#extension GL_OES_standard_derivatives : enable\r\n\r\nuniform float time;\r\nuniform vec2 mouse;\r\nuniform vec2 viewportSize;\r\n\r\n//----------------------------------------------------------\r\n// metaballss.v3 by pailhead in 2014-Jun-2\r\n// original:  https://www.shadertoy.com/view/4sXXWM\r\n// small modifications & antialiasing by I.G.P. 2016-09-24\r\n// Nice variant http://glslsandbox.com/e#36845.2\r\n// This must be nice in 3d too...\r\n//----------------------------------------------------------\r\n\r\n#define COUNT 55\r\n\r\n#define SPEED 0.1\r\n\r\n#define SIZE 44.\r\n\r\n//----------------------------------------------------------\r\nfloat rn(float x)\r\n{\r\n    return  fract(sin(x*.4686)*3718.927);\r\n}\r\n\r\n//----------------------------------------------------------\r\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) \r\n{\r\n\tfloat ts = time * SPEED + (mouse.x / 10000.);   // time scaled\r\n\t\r\n\tvec3 COLOR_MASKS[16];  // blob colors\r\n\tCOLOR_MASKS[0] = vec3(1.00, 0.50, 0.00 );\r\n  \tCOLOR_MASKS[1] = vec3(0.53, 0.85, 0.25 );\r\n  \tCOLOR_MASKS[2] = vec3(1.00, 0.56, 0.15 );\r\n  \tCOLOR_MASKS[3] = vec3(1.00, 0.00, 0.30 );\r\n  \tCOLOR_MASKS[4] = vec3(0.05, 0.55, 0.30 );\r\n\tCOLOR_MASKS[5] = vec3(0.50, 1.00, 0.40 );\r\n  \tCOLOR_MASKS[6] = vec3(1.00, 0.15, 1.00 );\r\n  \tCOLOR_MASKS[7] = vec3(0.20, 0.30, 0.50 );\r\n  \tCOLOR_MASKS[8] = vec3(0.35, 1.00, 0.50 );\r\n  \tCOLOR_MASKS[9] = vec3(0.70, 0.60, 0.50 );\r\n  \tCOLOR_MASKS[10]= vec3(0.34, 1.00, 0.50 );\r\n  \tCOLOR_MASKS[11]= vec3(0.20, 0.50, 0.50 );\r\n  \tCOLOR_MASKS[12]= vec3(0.60, 0.10, 0.65 );\r\n  \tCOLOR_MASKS[13]= vec3(0.40, 0.40, 0.85 );\r\n  \tCOLOR_MASKS[14]= vec3(1.00, 0.30, 0.35 );\r\n  \tCOLOR_MASKS[15]= vec3(1.00, 0.00, 0.50 );\r\n\t\r\n\t//screen space\r\n\tfloat aspect = viewportSize.x / viewportSize.y;\r\n\tvec2 fragPN = (fragCoord / viewportSize.xy) * 2.0 - 1.0;   //-1 .. 1\r\n\tfragPN.x *= aspect;\r\n\tfloat vH = 10.0;   // camera disance - fov\r\n\tvec3 vD = normalize(vec3(-fragPN,vH));   // view dir\r\n\t//vec3 lD = normalize(vec3(cos(time),.750,sin(time)));   // light dir\t\r\n\t\r\n\tvec3 lD = normalize(vec3(mouse.xy-vec2(0.5), 0.5));   // light dir\t\r\n\t\r\n\tvec3 ld = normalize(vec3(.7, .750,2.));\r\n\t\r\n\tvec2 mbPos[COUNT];  // blob position\r\n\tvec3 nn = vec3(.0);\r\n\tvec3 cc = vec3(.0);\r\n\r\n\tfor(int i=0; i<COUNT; i++)\r\n\t{\r\n\t\tvec3 bC = COLOR_MASKS[i-(i/15)*15]; // blob color\r\n\t\tfloat rn1 = rn(float(i+47));\r\n\t\tfloat rn2 = rn(float(i-21));\r\n\t\tfloat rn3 = rn(float(i-52));\r\n\t\t\r\n\t\tif (i==0)   // set blob[0] to mouse position\r\n\t\t     mbPos[i] = 1.25*(mouse.xy*2. -1.) * vec2(aspect,1.);   // mouse position\r\n\t\telse mbPos[i] = vec2(sin(rn1*6.14+ts * rn2)*aspect,\r\n\t\t\t        cos(rn2*6.14+ts * rn3));  // calc position\r\n\t\t\r\n\t\tmbPos[i] = fragPN - mbPos[i]*.8;\r\n\t\tfloat rr = cos(rn3*6.28 +ts * rn1)*.2 +.5;\r\n\t\tmbPos[i] *= rr * (1000. / SIZE);   // blob coord\r\n\t\tfloat bL = length( mbPos[i] );     // blob length\r\n\t\tfloat bH = exp(-bL*2.15678);\r\n\t\tvec3 bN = vec3(mbPos[i] * .3 *bH, bH-.01);\r\n\t\tbC *= bH;\r\n\t\tnn += vec3(mbPos[i]*.5*bH,bH);\r\n\t\tcc += bC;\r\n\t}\r\n\t\r\n\tvec3 n = normalize( vec3(nn.x, nn.y, nn.z-0.1) );\r\n\tfloat aB = smoothstep(0.0, 0.5, n.z);  // antialiasing edge !!!\r\n\tcc /= nn.z;\r\n\tfloat ndl = 0.3 + 0.7 * dot(n,lD);   //wrap\r\n\tvec3 h = normalize(vD+lD);\r\n\tfloat ndh = 0.5 + 0.5 * dot(n,h);\r\n\tndh = pow(ndh,1.+2000.0 *(mouse.x))*(0.2 + .65*mouse.x);  // light reflection\r\n\tvec3 fc = cc*ndl +ndh;\r\n\t\r\n\tfloat frs = dot(n,vD);\r\n\tfrs = 1.0-clamp(frs,.0,1.);\r\n\tfrs = pow(frs,100.0);\r\n\tfrs = frs*.4 +.121;\r\n\tfc += frs;\r\n\tfragColor = vec4( fc*aB, 1.);\r\n}\r\n\r\nvoid main( void ) \r\n{\r\n\tmainImage( gl_FragColor, gl_FragCoord.xy );\r\n}"},function(t,e,n){n.r(e),e.default="#ifdef GL_ES\r\nprecision ${maxShaderPrecision} float;\r\n#endif\r\n\r\n#extension GL_OES_standard_derivatives : enable\r\n\r\nuniform float time;\r\nuniform vec2 viewportSize;\r\nuniform vec2 mouse;\r\n\r\nconst  float EPS =0.0001;\r\n\r\nvec3 lightDir = normalize(vec3(-0.2,0.8,-0.4));\r\n\r\nfloat dist_func(vec3 pos, float size)\r\n{\r\n\t\r\n\treturn length(pos) -size;\r\n}\r\n\r\nvec3 onRap(vec3 p, float interval){\r\n\treturn mod(p,interval)-interval * 0.5;\r\n}\r\n\r\nfloat distScene(vec3 p){\r\n\treturn dist_func(onRap(p,0.3),0.1);\r\n\t}\r\n\r\nvec2 onRep(vec2 p , float interval)\r\n{\r\n\treturn mod(p,interval)-interval*0.5;\r\n}\r\n\r\nfloat barDist(vec2 p ,float interval, float width)\r\n{\r\n\treturn length(max(abs(onRep(p,interval)) - width,0.0));\r\n}\r\n\r\n\r\nfloat sceneDist1(vec3 p){\r\n\tfloat bar_x = barDist(p.yz,1.0,0.1);\r\n\tfloat bar_y = barDist(p.xz,1.0,0.1);\r\n\tfloat bar_z = barDist(p.xy,1.0,0.1);\r\n\treturn min(min(bar_x,bar_y),bar_z);\r\n}\r\n\r\n\r\nfloat tubeDist(vec2 p,float interval,float width){\r\n\treturn length(onRep(p,interval)) - width;\r\n}\r\nfloat sceneDist2(vec3 p){\r\n\tfloat tube_x = tubeDist(p.yz,0.1,0.02);\r\n\tfloat tube_y = tubeDist(p.xz,0.1,0.02);\r\n\tfloat tube_z = tubeDist(p.xy,0.1,0.02);\r\n\treturn min(min(tube_x,tube_y),tube_z);\r\n}\r\n\r\n\r\nfloat sceneDist0(vec3 p){\r\n\t\r\n\treturn min(-sceneDist1(p),sceneDist2(p));\r\n}\r\n\r\n\r\n\r\nvec3 getNormal(vec3 pos)\r\n{\r\n\tfloat ep = 0.0001;\r\n\treturn normalize(vec3(\r\n\t\t\r\n            sceneDist0(pos) - sceneDist0(vec3(pos.x - ep, pos.y, pos.z)),\r\n            sceneDist0(pos)- sceneDist0(vec3(pos.x, pos.y - ep, pos.z)),\r\n            sceneDist0(pos) - sceneDist0(vec3(pos.x, pos.y, pos.z - ep))\r\n        ));\r\n}\r\n\t\t\t\t\t\r\n\r\nvoid main( void ) {\r\n\r\n\tvec2 pos = ( gl_FragCoord.xy * 2.0 - viewportSize.xy ) / min(viewportSize.x,viewportSize.y);\r\n\r\n\tvec3 col = vec3(0.0);\r\n\tvec3 cameraPos = vec3(0.0,0.0 + (mouse.x / 10000.),-5.0);\r\n\tvec3 cDir= vec3(0.0,0.0,-1.0);\r\n\tvec3 cUp = vec3(0.3,1.0,0.0);\r\n\tvec3 cSide = cross(cDir,cUp);\r\n\tfloat targetDepth = 1.0;\r\n\tvec3 ray = normalize(cSide * pos.x + cUp*pos.y + cDir * targetDepth);\r\n\tvec3 cur = cameraPos;\r\n\t\r\n\tfloat size = 0.2 ;\r\n\tfloat dist,depth = 0.0;\r\n\tvec3 origin = cur;\r\n\torigin.z += time*0.3;\r\n\t\r\n\tvec3 p = origin;\r\n\t\r\n\t\r\n\t\r\n\tfor(int i = 0;i < 64;i++)\r\n\t{\r\n\t\t\r\n\t\tdist = sceneDist0(p);\r\n\t\tdepth += dist;\r\n\t\tp=origin + depth * ray;\r\n\t\tif(abs(dist)<EPS)\r\n\t\t{\r\n\t\t\tvec3 normal = getNormal(p);\r\n\t\t\tfloat diff = dot(normal,lightDir);\r\n\t\t\tcol = vec3(diff) + vec3(0.9);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\r\n\tgl_FragColor = vec4( col.x*1.5,0.2,0.2, 1.0 );\r\n\r\n}"},function(t,e,n){n.r(e),e.default="#ifdef GL_ES\r\nprecision ${maxShaderPrecision} float;\r\n#endif\r\n\r\n#extension GL_OES_standard_derivatives : enable\r\n\r\nuniform float time;\r\nuniform vec2 mouse;\r\nuniform vec2 viewportSize;\r\n\r\n\r\n\r\n\r\n#define S(x, y, z) smoothstep(x, y, z)\r\n#define B(a, b, edge, t) S(a-edge, a+edge, t)*S(b+edge, b-edge, t)\r\n#define sat(x) clamp(x,0.,1.)\r\n\r\n#define streetLightCol vec3(1., .7, .3)\r\n#define headLightCol vec3(.8, .8, 1.)\r\n#define tailLightCol vec3(1., .1, .1)\r\n\r\n#define HIGH_QUALITY\r\n#define CAM_SHAKE 1.\r\n#define LANE_BIAS .5\r\n#define RAIN\r\n//#define DROP_DEBUG\r\n\r\nvec3 ro, rd;\r\n\r\nfloat N(float t) {\r\n\treturn fract(sin(t*10234.324)*123423.23512);\r\n}\r\nvec3 N31(float p) {\r\n    //  3 out, 1 in... DAVE HOSKINS\r\n   vec3 p3 = fract(vec3(p) * vec3(.1031,.11369,.13787));\r\n   p3 += dot(p3, p3.yzx + 19.19);\r\n   return fract(vec3((p3.x + p3.y)*p3.z, (p3.x+p3.z)*p3.y, (p3.y+p3.z)*p3.x));\r\n}\r\nfloat N2(vec2 p)\r\n{\t// Dave Hoskins - https://www.shadertoy.com/view/4djSRW\r\n\tvec3 p3  = fract(vec3(p.xyx) * vec3(443.897, 441.423, 437.195));\r\n    p3 += dot(p3, p3.yzx + 19.19);\r\n    return fract((p3.x + p3.y) * p3.z);\r\n}\r\n\r\n\r\nfloat DistLine(vec3 ro, vec3 rd, vec3 p) {\r\n\treturn length(cross(p-ro, rd));\r\n}\r\n \r\nvec3 ClosestPoint(vec3 ro, vec3 rd, vec3 p) {\r\n    // returns the closest point on ray r to point p\r\n    return ro + max(0., dot(p-ro, rd))*rd;\r\n}\r\n\r\nfloat Remap(float a, float b, float c, float d, float t) {\r\n\treturn ((t-a)/(b-a))*(d-c)+c;\r\n}\r\n\r\nfloat BokehMask(vec3 ro, vec3 rd, vec3 p, float size, float blur) {\r\n\tfloat d = DistLine(ro, rd, p);\r\n    float m = S(size, size*(1.-blur), d);\r\n    \r\n    #ifdef HIGH_QUALITY\r\n    m *= mix(.7, 1., S(.8*size, size, d));\r\n    #endif\r\n    \r\n    return m;\r\n}\r\n\r\n\r\n\r\nfloat SawTooth(float t) {\r\n    return cos(t+cos(t))+sin(2.*t)*.2+sin(4.*t)*.02;\r\n}\r\n\r\nfloat DeltaSawTooth(float t) {\r\n    return 0.4*cos(2.*t)+0.08*cos(4.*t) - (1.-sin(t))*sin(t+cos(t));\r\n}  \r\n\r\nvec2 GetDrops(vec2 uv, float seed, float m) {\r\n    \r\n    float t = time+m*30.;\r\n    vec2 o = vec2(0.);\r\n    \r\n    #ifndef DROP_DEBUG\r\n    uv.y += t*.05;\r\n    #endif\r\n    \r\n    uv *= vec2(10., 2.5)*2.;\r\n    vec2 id = floor(uv);\r\n    vec3 n = N31(id.x + (id.y+seed)*546.3524);\r\n    vec2 bd = fract(uv);\r\n    \r\n    vec2 uv2 = bd;\r\n    \r\n    bd -= .5;\r\n    \r\n    bd.y*=4.;\r\n    \r\n    bd.x += (n.x-.5)*.6;\r\n    \r\n    t += n.z * 6.28;\r\n    float slide = SawTooth(t);\r\n    \r\n    float ts = 1.5;\r\n    vec2 trailPos = vec2(bd.x*ts, (fract(bd.y*ts*2.-t*2.)-.5)*.5);\r\n    \r\n    bd.y += slide*2.;\t\t\t\t\t\t\t\t// make drops slide down\r\n    \r\n    #ifdef HIGH_QUALITY\r\n    float dropShape = bd.x*bd.x;\r\n    dropShape *= DeltaSawTooth(t);\r\n    bd.y += dropShape;\t\t\t\t\t\t\t\t// change shape of drop when it is falling\r\n    #endif\r\n    \r\n    float d = length(bd);\t\t\t\t\t\t\t// distance to main drop\r\n    \r\n    float trailMask = S(-.2, .2, bd.y);\t\t\t\t// mask out drops that are below the main\r\n    trailMask *= bd.y;\t\t\t\t\t\t\t\t// fade dropsize\r\n    float td = length(trailPos*max(.5, trailMask));\t// distance to trail drops\r\n    \r\n    float mainDrop = S(.2, .1, d);\r\n    float dropTrail = S(.1, .02, td);\r\n    \r\n    dropTrail *= trailMask;\r\n    o = mix(bd*mainDrop, trailPos, dropTrail);\t\t// mix main drop and drop trail\r\n    \r\n    #ifdef DROP_DEBUG\r\n    if(uv2.x<.02 || uv2.y<.01) o = vec2(1.);\r\n    #endif\r\n    \r\n    return o;\r\n}\r\n\r\nvoid CameraSetup(vec2 uv, vec3 pos, vec3 lookat, float zoom, float m) {\r\n\tro = pos;\r\n    vec3 f = normalize(lookat-ro);\r\n    vec3 r = cross(vec3(0., 1., 0.), f);\r\n    vec3 u = cross(f, r);\r\n    float t = time;\r\n    \r\n    vec2 offs = vec2(0.);\r\n    #ifdef RAIN\r\n    vec2 dropUv = uv; \r\n    \r\n    #ifdef HIGH_QUALITY\r\n    float x = (sin(t*.1)*.5+.5)*.5;\r\n    x = -x*x;\r\n    float s = sin(x);\r\n    float c = cos(x);\r\n    \r\n    mat2 rot = mat2(c, -s, s, c);\r\n   \r\n    #ifndef DROP_DEBUG\r\n    dropUv = uv*rot;\r\n    dropUv.x += -sin(t*.1)*.5;\r\n    #endif\r\n    #endif\r\n    \r\n    offs = GetDrops(dropUv, 1., m);\r\n    \r\n    #ifndef DROP_DEBUG\r\n    offs += GetDrops(dropUv*1.4, 10., m);\r\n    #ifdef HIGH_QUALITY\r\n    offs += GetDrops(dropUv*2.4, 25., m);\r\n    //offs += GetDrops(dropUv*3.4, 11.);\r\n    //offs += GetDrops(dropUv*3., 2.);\r\n    #endif\r\n    \r\n    float ripple = sin(t+uv.y*3.1415*30.+uv.x*124.)*.5+.5;\r\n    ripple *= .005;\r\n    offs += vec2(ripple*ripple, ripple);\r\n    #endif\r\n    #endif\r\n    vec3 center = ro + f*zoom;\r\n    vec3 i = center + (uv.x-offs.x)*r + (uv.y-offs.y)*u;\r\n    \r\n    rd = normalize(i-ro);\r\n}\r\n\r\nvec3 HeadLights(float i, float t) {\r\n    float z = fract(-t*2.+i);\r\n    vec3 p = vec3(-.3, .1, z*40.);\r\n    float d = length(p-ro);\r\n    \r\n    float size = mix(.03, .05, S(.02, .07, z))*d;\r\n    float m = 0.;\r\n    float blur = .1;\r\n    m += BokehMask(ro, rd, p-vec3(.08, 0., 0.), size, blur);\r\n    m += BokehMask(ro, rd, p+vec3(.08, 0., 0.), size, blur);\r\n    \r\n    #ifdef HIGH_QUALITY\r\n    m += BokehMask(ro, rd, p+vec3(.1, 0., 0.), size, blur);\r\n    m += BokehMask(ro, rd, p-vec3(.1, 0., 0.), size, blur);\r\n    #endif\r\n    \r\n    float distFade = max(.01, pow(1.-z, 9.));\r\n    \r\n    blur = .8;\r\n    size *= 2.5;\r\n    float r = 0.;\r\n    r += BokehMask(ro, rd, p+vec3(-.09, -.2, 0.), size, blur);\r\n    r += BokehMask(ro, rd, p+vec3(.09, -.2, 0.), size, blur);\r\n    r *= distFade*distFade;\r\n    \r\n    return headLightCol*(m+r)*distFade;\r\n}\r\n\r\n\r\nvec3 TailLights(float i, float t) {\r\n    t = t*1.5+i;\r\n    \r\n    float id = floor(t)+i;\r\n    vec3 n = N31(id);\r\n    \r\n    float laneId = S(LANE_BIAS, LANE_BIAS+.01, n.y);\r\n    \r\n    float ft = fract(t);\r\n    \r\n    float z = 3.-ft*3.;\t\t\t\t\t\t// distance ahead\r\n    \r\n    laneId *= S(.2, 1.5, z);\t\t\t\t// get out of the way!\r\n    float lane = mix(.6, .3, laneId);\r\n    vec3 p = vec3(lane, .1, z);\r\n    float d = length(p-ro);\r\n    \r\n    float size = .05*d;\r\n    float blur = .1;\r\n    float m = BokehMask(ro, rd, p-vec3(.08, 0., 0.), size, blur) +\r\n    \t\t\tBokehMask(ro, rd, p+vec3(.08, 0., 0.), size, blur);\r\n    \r\n    #ifdef HIGH_QUALITY\r\n    float bs = n.z*3.;\t\t\t\t\t\t// start braking at random distance\t\t\r\n    float brake = S(bs, bs+.01, z);\r\n    brake *= S(bs+.01, bs, z-.5*n.y);\t\t// n.y = random brake duration\r\n    \r\n    m += (BokehMask(ro, rd, p+vec3(.1, 0., 0.), size, blur) +\r\n    \tBokehMask(ro, rd, p-vec3(.1, 0., 0.), size, blur))*brake;\r\n    #endif\r\n    \r\n    float refSize = size*2.5;\r\n    m += BokehMask(ro, rd, p+vec3(-.09, -.2, 0.), refSize, .8);\r\n    m += BokehMask(ro, rd, p+vec3(.09, -.2, 0.), refSize, .8);\r\n    vec3 col = tailLightCol*m*ft; \r\n    \r\n    float b = BokehMask(ro, rd, p+vec3(.12, 0., 0.), size, blur);\r\n    b += BokehMask(ro, rd, p+vec3(.12, -.2, 0.), refSize, .8)*.2;\r\n    \r\n    vec3 blinker = vec3(1., .7, .2);\r\n    blinker *= S(1.5, 1.4, z)*S(.2, .3, z);\r\n    blinker *= sat(sin(t*200.)*100.);\r\n    blinker *= laneId;\r\n    col += blinker*b;\r\n    \r\n    return col;\r\n}\r\n\r\nvec3 StreetLights(float i, float t) {\r\n\t float side = sign(rd.x);\r\n    float offset = max(side, 0.)*(1./16.);\r\n    float z = fract(i-t+offset); \r\n    vec3 p = vec3(2.*side, 2., z*60.);\r\n    float d = length(p-ro);\r\n\tfloat blur = .1;\r\n    vec3 rp = ClosestPoint(ro, rd, p);\r\n    float distFade = Remap(1., .7, .1, 1.5, 1.-pow(1.-z,6.));\r\n    distFade *= (1.-z);\r\n    float m = BokehMask(ro, rd, p, .05*d, blur)*distFade;\r\n    \r\n    return m*streetLightCol;\r\n}\r\n\r\nvec3 EnvironmentLights(float i, float t) {\r\n\tfloat n = N(i+floor(t));\r\n    \r\n    float side = sign(rd.x);\r\n    float offset = max(side, 0.)*(1./16.);\r\n    float z = fract(i-t+offset+fract(n*234.));\r\n    float n2 = fract(n*100.);\r\n    vec3 p = vec3((3.+n)*side, n2*n2*n2*1., z*60.);\r\n    float d = length(p-ro);\r\n\tfloat blur = .1;\r\n    vec3 rp = ClosestPoint(ro, rd, p);\r\n    float distFade = Remap(1., .7, .1, 1.5, 1.-pow(1.-z,6.));\r\n    float m = BokehMask(ro, rd, p, .05*d, blur);\r\n    m *= distFade*distFade*.5;\r\n    \r\n    m *= 1.-pow(sin(z*6.28*20.*n)*.5+.5, 20.);\r\n    vec3 randomCol = vec3(fract(n*-34.5), fract(n*4572.), fract(n*1264.));\r\n    vec3 col = mix(tailLightCol, streetLightCol, fract(n*-65.42));\r\n    col = mix(col, randomCol, n);\r\n    return m*col*.2;\r\n}\r\n\r\n\r\n\r\nvoid main( void ) {\r\n\r\n\t\r\n\r\n\t\r\n\t\r\n\tfloat t = time;\r\n    vec3 col = vec3(0.);\r\n    vec2 uv = gl_FragCoord.xy / viewportSize.xy; // 0 <> 1\r\n    \r\n    uv -= .5;\r\n    uv.x *= viewportSize.x/viewportSize.y;\r\n    \r\n    vec2 mouse = mouse.xy/viewportSize.xy;\r\n    \r\n    vec3 pos = vec3(.3, .15, 0.);\r\n    \r\n    float bt = t * 5.;\r\n    float h1 = N(floor(bt));\r\n    float h2 = N(floor(bt+1.));\r\n    float bumps = mix(h1, h2, fract(bt))*.1;\r\n    bumps = bumps*bumps*bumps*CAM_SHAKE;\r\n    \r\n    pos.y += bumps;\r\n    float lookatY = pos.y+bumps;\r\n    vec3 lookat = vec3(0.3, lookatY, 1.);\r\n    vec3 lookat2 = vec3(0., lookatY, .7);\r\n    lookat = mix(lookat, lookat2, sin(t*.1)*.5+.5);\r\n    \r\n    uv.y += bumps*4.;\r\n    CameraSetup(uv, pos, lookat, 2., mouse.x);\r\n   \r\n    t *= .03;\r\n    t += mouse.x;\r\n    \r\n    const float stp = 1./8.;\r\n\t\r\n\t\r\n    for(float i=0.0; i<1.0; i+=stp) {\r\n       col += StreetLights(i, t);\r\n    }\r\n    \r\n    for(float i=0.0; i<1.0; i+=stp) {\r\n        float n = N(i+floor(t));\r\n    \tcol += HeadLights(i+n*stp*.7, t);\r\n    }\r\n    \r\n    #ifdef HIGH_QUALITY\r\n    const float stp2 = 1./32.;\r\n    #else\r\n    stp = 1./16.;\r\n    #endif\r\n    for(float i=0.0; i<1.0; i+=stp) {\r\n       col += EnvironmentLights(i, t);\r\n    }\r\n    \r\n    col += TailLights(0., t);\r\n    col += TailLights(.5, t);\r\n    \r\n    col += sat(rd.y)*vec3(.6, .5, .9);\r\n    \r\n\tgl_FragColor = vec4(col, 1.);\r\n}"},function(t,e,n){n.r(e),e.default="// Author: Marco Gomez\t\t| @marcogomez_ | http://mgz.me\t|\r\n// Sample Shader for ShaderLab\t| http://shaderlab.mgz.me\t|\r\n#extension GL_OES_standard_derivatives : enable\r\n\r\n#ifdef GL_ES\r\nprecision ${maxShaderPrecision} float;\r\n#endif\r\n\r\nuniform\tvec2\tviewportSize;\r\nuniform\tvec2\tmouse;\r\nuniform\tfloat\ttime;\r\nuniform\tfloat\tsnd_uniform; // Try loading an MP3 with the Audio Input button above\r\nconst\tfloat\trndc = 43758.5453123;\r\n#define fragCoord gl_FragCoord\r\n#define fragColor gl_FragColor\r\n\r\nfloat rand (float n) { return fract(sin(n) * rndc); }\r\n\r\nvec2 rand2 (in vec2 p) { return fract(vec2(sin(p.x * 591.32 + p.y * 154.077), cos(p.x * 391.32 + p.y * 49.077))); }\r\n\r\nfloat noise1 (float p) { float fl = floor(p), fc = fract(p); return mix(rand(fl), rand(fl + 1.000004), fc); }\r\n\r\n// voronoi distance noise based on iq's articles ( http://www.iquilezles.org/www/index.htm )\r\nfloat voronoi (vec2 x) {\r\n\tvec2 p = floor(x), f = fract(x), res = vec2(8.0);\r\n\tfor(int j = -1; j <= 1; j ++)\r\n\tfor(int i = -1; i <= 1; i ++) {\r\n\t\tvec2 b = vec2(i, j), r = vec2(b) - f + rand2(p + b);\r\n\t\tfloat d = max(abs(r.x), abs(r.y));\r\n\t\tif(d < res.x) { res.y = res.x; res.x = d; } else if(d < res.y) { res.y = d; }\r\n\t}\r\n\treturn res.y - res.x;\r\n}\r\n\r\nvoid main (void) {\r\n\tvec4 channelA, channelB;\r\n\tvec2 xy = fragCoord.xy / viewportSize.xy;\txy = (xy - 0.5) * 3.0;\r\n\tvec2 xy2 = xy;\r\n\txy.x *= viewportSize.x / viewportSize.y;\r\n\tfloat v = 0.0; v = 0.21 - length(xy) * 0.21;\r\n\txy /= 0.6 + sin(time * 0.07) * 0.22;\r\n\txy += time * 0.12;\r\n\txy.y -= time * 0.12;\r\n\tfloat a = 0.7, f = 1.0;\r\n\tfor(int i = 0; i < 3; i ++) {\r\n\t\tfloat v1 = voronoi(xy * f + 5.0);\r\n\t\tfloat v2 = 0.0;\r\n\t\tif(i > 0) {\r\n\t\t\tfloat va = 0.0, vb = 0.0;\r\n\t\t\tif (i == 1) {\r\n\t\t\t\tva = 1.0 - smoothstep(0.0, 0.2, v1);\r\n\t\t\t\tv2 = voronoi(xy * f * 0.5 / 5.0 + 8694.0 + time / 7.0 - snd_uniform * 0.125);\r\n\t\t\t\tvb = 1.0 - smoothstep(0.0, 0.1, v2);\r\n\t\t\t} else {\r\n\t\t\t\tva = 1.0 - smoothstep(0.0, 0.1, v1);\r\n\t\t\t\tv2 = voronoi(xy * f * 0.5 + 50.0 + time / 5.0 + snd_uniform);\r\n\t\t\t\tvb = 1.0 - smoothstep(0.0, 0.08, v2);\r\n\t\t\t}\r\n\t\t\tv += a * pow(va * (0.5 + vb), 2.0);\r\n\t\t}\r\n\t\tv1 = 1.0 - smoothstep(0.0, 0.2, v1);\r\n\t\tv2 = mix(0.12, a * (noise1(v1 * 7.5 + 0.3)), sin(time / 7.0));\r\n\t\tif(i == 0) { v += v2; }\r\n\t\tf *= 3.0;\r\n\t\ta *= 0.7 + abs(sin(time / 3.0)) / 3.0;\r\n\t}\r\n\tv *= exp(-0.6 * length(xy2)) * 1.2;\r\n\tvec3 cexp = vec3(4.0, 1.5, 1.2);\r\n\tcexp *= 1.012;\r\n\tvec3 col = vec3(pow(v, cexp.x), pow(v, cexp.y), pow(v, cexp.z)) * 4.0;\r\n\tfragColor = vec4(col, 1.0);\r\n}\r\n"},function(t,e,n){n.r(e),e.default="/*\r\n\r\n\tTech tunnel\r\n\t\r\n\tby T_S=RTX1911=   @T_SDesignWorks\r\n\r\n*/\r\n\r\n\r\n#ifdef GL_ES\r\nprecision ${maxShaderPrecision} float;\r\n#endif\r\n\r\nuniform float time;\r\nuniform vec2 mouse;\r\nuniform vec2 viewportSize;\r\nuniform float lowFreq;\r\n\r\n#define mycos(x) sin(1.57079633-x) \r\n\r\nvec3 roy(vec3 v, float x)\r\n{\r\n    return vec3(mycos(x)*v.x - sin(x)*v.z,v.y,sin(x)*v.x + mycos(x)*v.z);\r\n}\r\n\r\nvec3 rox(vec3 v, float x)\r\n{\r\n    return vec3(v.x,v.y*mycos(x) - v.z*sin(x),v.y*sin(x) + v.z*mycos(x));\r\n}\r\n\r\nfloat fdtun(vec3 rd, vec3 ro, float r)\r\n{\r\n\tfloat a = dot(rd.xy,rd.xy);\r\n  \tfloat b = dot(ro.xy,rd.xy);\r\n\tfloat d = (b*b)-(32.0*a*(dot(ro.xy,ro.xy)+(r*r)));\r\n  \treturn (-b+sqrt(abs(d)))/(3.75*a);\r\n}\r\n\r\nvec2 tunuv(vec3 pos){\r\n\treturn vec2(pos.z,(atan(pos.y, pos.x))/0.31830988618379);\r\n}\r\n\r\nvec3 checkerCol(vec2 loc, vec3 col)\r\n{\r\n\treturn mix(col, vec3(0.25), mod(step(fract(loc.x), 0.75) + step(fract(loc.y), 0.25),7.5));\r\n}\r\n\r\nvec3 lcheckcol(vec2 loc, vec3 col)\r\n{\r\n\treturn checkerCol(loc*15.0,col)*checkerCol(loc*1.75,col);\t\r\n}\r\nvoid main( void ) {\r\n\tvec3 dif = vec3(0.15,0.0,0.0);\r\n\tvec3 scoll = vec3(0.0,0.5,1.0);\r\n\tvec3 scolr = vec3(0.25,0.5,0.0);\r\n\tvec2 uv = (gl_FragCoord.xy/viewportSize.xy);\r\n\tvec3 ro = vec3(0.0,0.0,(time / 10.)*2.5);\r\n\tvec3 dir = normalize( vec3( -1.0 + 2.0*vec2(uv.x - .2, uv.y)* vec2(viewportSize.x/viewportSize.y, 1.0), -1.33 ) );\r\n\r\n\tfloat ry = (time / 10.)*0.3;\r\n\t\r\n\tdir = roy(rox(dir,((time + mouse.y / 399.) / 10.)*0.25),(time / 10.)*-0.5);\r\n\tvec3 lro = ro-dif;\r\n\tvec3 rro = ro+dif;\r\n\r\n\tconst float r = 1.0;\r\n\tfloat ld = fdtun(dir,lro,r);\r\n\tfloat rd = fdtun(dir,rro,r);\r\n\tvec2 luv = tunuv(ro + ld*dir);\r\n\tvec2 ruv = tunuv(ro + rd*dir);\r\n\tvec3 coll = lcheckcol(luv*.25,scoll)*(20.0/exp(sqrt(ld)));\r\n\tvec3 colr = lcheckcol(ruv*.5,scolr)*(20.0/exp(sqrt(rd)));\r\n\tgl_FragColor = vec4(sqrt(coll+2.5*lowFreq*1.0+(colr-1.0)+lowFreq*20.0),1.0);\r\n}\r\n"},function(t,e,n){n.r(e),e.default="precision ${maxShaderPrecision} float;\r\n\r\nattribute vec2 coords;\r\nuniform vec2 position;\r\n\r\nuniform vec2  worldPosition;\r\nuniform vec2  worldScale;\r\nuniform vec2  viewportSize;\r\n\r\nvoid main(void) {\r\n\tvec2 pos = vec2( coords );\r\n\r\n\tpos -= position;\r\n\tpos -= worldPosition;\r\n\tpos /= worldScale;\r\n\tpos /= viewportSize;\r\n\tpos -= 1.;\r\n\r\n   \tgl_Position = vec4( pos.xy, 0., 1.);\r\n}"},function(t,e,n){n.r(e),e.default="precision ${maxShaderPrecision} float;\r\n\r\nattribute vec2 coords;\r\n\r\nuniform vec2  position;\r\n\r\nuniform vec2  worldPosition;\r\nuniform vec2  worldScale;\r\nuniform vec2  viewportSize;\r\n\r\nuniform vec2  selectedPosition;\r\n\r\nvoid main(void) {\r\n    vec2 pos = vec2( coords );\r\n\r\n    float offsetX = ( selectedPosition.x - worldPosition.x ) / worldScale.x;\r\n\r\n    pos.x += offsetX;\r\n   \r\n   \tpos.x /= viewportSize.x;\r\n    pos.y *= 2.;\r\n    pos -= 1.;\r\n\r\n  \tgl_Position = vec4( pos.xy, 0., 1.);\r\n}"},function(t,e,n){n.r(e),e.default="precision ${maxShaderPrecision} float;\r\n\r\nattribute vec2 coords;\r\n\r\nuniform vec2  position;\r\n\r\nuniform vec2  worldPosition;\r\nuniform vec2  worldScale;\r\nuniform vec2  viewportSize;\r\n\r\nuniform float lineIndex;\r\nuniform vec2  gridSteps;\r\n\r\nvoid main(void) {\r\n    vec2 pos = vec2( coords );\r\n    vec2 steps = vec2( gridSteps / worldScale );\r\n\r\n    pos.y += steps.y * lineIndex;\r\n    pos.y /= viewportSize.y;\r\n    pos.x *= 2.;\r\n    pos -= 1.;\r\n\r\n  \tgl_Position = vec4( pos.xy, 0., 1.);\r\n}"},function(t,e,n){n.r(e),e.default="precision ${maxShaderPrecision} float;\r\n\r\nattribute vec2 coords;\r\nattribute vec2 normal;\r\n\r\nuniform vec2  position;\r\nuniform float thickness;\r\nuniform float opacity;\r\n\r\nuniform float resolution;\r\nuniform vec2  worldPosition;\r\nuniform vec2  worldScale;\r\nuniform vec2  viewportSize;\r\n\r\nvec2 scaleNormal ( vec2 normal, vec2 scale ) {\r\n   normal /= vec2( scale.y, scale.x );    \r\n   float hypo = length( normal );\r\n   return( vec2( ( normal.x / hypo ), ( normal.y / hypo ) ) );\r\n}\r\n\r\n\r\nvec2 translate( vec2 pos ) {\r\n   pos -= position;\r\n   pos -= worldPosition;\r\n   return( pos );\r\n}\r\n\r\nvec2 project( vec2 pos ) {\r\n   return( pos / worldScale );\r\n}\r\n\r\n\r\nvec2 projectToScreen( vec2 pos ) {\r\n   pos /= viewportSize;\r\n   pos -= 1.;\r\n   return( pos );\r\n}\r\n\r\n\r\nvoid main(void) {\r\n   \tvec2 pos = translate( coords );\r\n      vec2 n = scaleNormal( normal, worldScale );\r\n\r\n   \tpos = project( pos );\r\n\r\n   \tpos += ( n * ( thickness * resolution ) );\r\n\r\n   \tpos = projectToScreen( pos );\r\n\r\n   \tgl_Position = vec4( pos.xy, 0., 1. );\r\n\r\n}"},function(t,e,n){n.r(e);var r=n(0);var o,i,a,s=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.glengine=new r.default,document.body.appendChild(this.glengine.domElement),r.default.MainLoop.addTask(function(){e.glengine.render(!0)}),r.default.MainLoop.start();var n=800,o=new r.default.Mesh({geometry:new r.default.RectGeometry({width:n,height:n}),material:new r.default.Material({fragmentShader:"frag.fluid_m",vertexShader:"vert.default",uniforms:{diffuse:r.default.ChartMath.color("#ff0000"),opacity:r.default.ChartMath.float32(1)}})});o.position.x=0,o.position.y=0;var i=new r.default.Mesh({geometry:new r.default.RectGeometry({width:n,height:n}),material:new r.default.Material({fragmentShader:"frag.framework",vertexShader:"vert.default",uniforms:{diffuse:r.default.ChartMath.color("#ff0000"),opacity:r.default.ChartMath.float32(1)}})});i.position.x=400,i.position.y=0;var a=new r.default.Mesh({geometry:new r.default.RectGeometry({width:n,height:n}),material:new r.default.Material({fragmentShader:"frag.fluid",vertexShader:"vert.default",uniforms:{diffuse:r.default.ChartMath.color("#ff0000"),opacity:r.default.ChartMath.float32(1)}})});a.position.x=400,a.position.y=400;var s=new r.default.Mesh({geometry:new r.default.RectGeometry({width:n,height:n}),material:new r.default.Material({fragmentShader:"frag.tubex",vertexShader:"vert.default",uniforms:{diffuse:r.default.ChartMath.color("#ff0000"),opacity:r.default.ChartMath.float32(1)}})});s.position.x=0,s.position.y=400,this.glengine.addChild(o),this.glengine.addChild(i),this.glengine.addChild(a),this.glengine.addChild(s),this.glengine.setScale(1,1),this.glengine.setPosition(-this.glengine.size.x/2,-this.glengine.size.y/2)};o=s,i="GLEngine",a=r.default,i in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a;var c=s;window.App=c,window.app=new c}])});