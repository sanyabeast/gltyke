/* @sanyabeast | 2019 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var o in n)("object"==typeof exports?exports:t)[o]=n[o]}}(window,function(){return function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=29)}([function(t,e,n){function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.r(e);var c=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),c=1;c<e;c++)n[c-1]=arguments[c];var l=function(e){function c(){var t,e,a,l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);for(var f=arguments.length,u=new Array(f),p=0;p<f;p++)u[p]=arguments[p];return a=this,l=(t=i(c)).call.apply(t,[this].concat(u)),e=!l||"object"!==o(l)&&"function"!=typeof l?r(a):l,n.forEach(function(t){s(r(e),new t)}),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(c,t),c}(),s=function(t,e){Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e)).forEach(function(n){if(!n.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length|\$name|\$prototype|\$\$id|extend|\$constructor)$/))try{Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}catch(t){$clog(t)}})};return n.forEach(function(t){s(l.prototype,t.prototype),s(l,t)}),l};function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"uniformType","uniform2fv"),f(this,"x",0),f(this,"y",0),this.array=[0,0],this.set(e,n)}var e,n,o;return e=t,(n=[{key:"set",value:function(t,e){if("object"==l(t))return this.set(t.x,t.y);this.array[0]=t,this.array[1]=e,this.x=t,this.y=e}},{key:"valueOf",value:function(){return this.y}},{key:"toArray",value:function(){return this.array}},{key:"fromArray",value:function(t){this.set(t[0],t[1])}},{key:"update",value:function(){this.set(this.x,this.y)}}])&&s(e.prototype,n),o&&s(e,o),t}();function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var v=function(){function t(e,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"x",0),d(this,"y",0),d(this,"w",0),d(this,"h",0),this.set(e,n,o,i)}var e,n,o;return e=t,(n=[{key:"set",value:function(t,e,n,o){this.x=t,this.y=e,this.w=n,this.h=o}}])&&p(e.prototype,n),o&&p(e,o),t}();function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return m(this,(t=y(e)).call.apply(t,[this].concat(o)))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,u),e}();function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var k=function(t){function e(){var t,n,o,i,r,a,c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var l=arguments.length,s=new Array(l),f=0;f<l;f++)s[f]=arguments[f];return o=this,n=!(i=(t=S(e)).call.apply(t,[this].concat(s)))||"object"!==x(i)&&"function"!=typeof i?_(o):i,r=_(n),c="uniform3fv",(a="uniformType")in r?Object.defineProperty(r,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):r[a]=c,n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(e,u),n=e,(o=[{key:"set",value:function(t,e,n){return"object"==x(t)?this.set(t.x,t.y):"string"==typeof t?this.setCSSHex(t):(this.array[0]=t,this.array[1]=e,this.array[2]=n,this.x=t,this.y=e,void(this.z=n))}},{key:"valueOf",value:function(){return this.toArray()}},{key:"toArray",value:function(){return this.array}},{key:"fromArray",value:function(t){this.set(t[0],t[1],t[2])}},{key:"setCSSHex",value:function(t){if(this.$cssHexString!=t){this.$cssHexString=t;var e=G.cssHexToRGB(t);this.set(e.r,e.g,e.b)}}}])&&w(n.prototype,o),i&&w(n,i),e}();function $(t){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var z=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.set(e,n)}var e,n,o;return e=t,(n=[{key:"set",value:function(t,e){if("object"==$(t))return this.set(t.min,t.max);this.min=t,this.max=e}},{key:"size",get:function(){return this.max-this.min}},{key:"isFinite",get:function(){return isFinite(this.min)&&isFinite(this.max)}}])&&P(e.prototype,n),o&&P(e,o),t}();function C(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),R(this,"uniformType","uniform1f"),R(this,"isSimple",!0),this.set(e)}var e,n,o;return e=t,(n=[{key:"valueOf",value:function(){return this.value}},{key:"set",value:function(t){this.value=t}}])&&C(e.prototype,n),o&&C(e,o),t}();function T(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"float32",value:function(t){return new E(t)}},{key:"vec2",value:function(t,e){return new g(t,e)}},{key:"color",value:function(t,e,n){return new k(t,e,n)}},{key:"point",value:function(t,e){return new u(t,e)}},{key:"range",value:function(t,e){return new z(t,e)}},{key:"rect",value:function(t,e,n,o){return new v(t,e,n,o)}},{key:"getExtremum",value:function(t){return this.range(Math.min.apply(Math,t),Math.max.apply(Math,t))}},{key:"nearestMult",value:function(t,e,n,o){return(n?Math.ceil((t+(o?0:1))/e)*e:Math.floor((t-(o?0:1))/e)*e)||0}},{key:"getOrder",value:function(t){return t<0?Math.pow(10,1/Math.floor(1/Math.log10(t))):Math.pow(10,Math.floor(Math.log10(t)))}},{key:"smoothstep",value:function(t,e,n){return e+(t-e)*(1-n)}},{key:"getStep",value:function(t,e,n){return 1-(e-n)/(e-t)}},{key:"vec2add",value:function(t,e,n){return t.x=e.x+n.x,t.y=e.y+n.y,t}},{key:"vec2normalize",value:function(t,e){var n=e.x,o=e.y,i=n*n+o*o;return i>0&&(i=1/Math.sqrt(i),t.x=e.x*i,t.y=e.y*i),t}},{key:"vec2subtract",value:function(t,e,n){return t.x=e.x-n.x,t.y=e.y-n.y,t}},{key:"vec2dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"vec2magnitude",value:function(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}},{key:"vec2set",value:function(t,e,n){return t.x=e,t.y=n,t}},{key:"vec2normal",value:function(t,e,n){return n?this.vec2set(t,e.y,-e.x):this.vec2set(t,-e.y,e.x),t}},{key:"vec2direction",value:function(t,e,n){return this.vec2subtract(t,e,n),this.vec2normalize(t,t),t}},{key:"nearestPowerOfTwo",value:function(t,e){var n=Math.log2(t);return n=e?Math.ceil(n):Math.floor(n),Math.pow(2,n)}}],(n=null)&&T(e.prototype,n),o&&T(e,o),t}();function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var A=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.setMultiple(e)}var e,n,o;return e=t,(n=[{key:"setMultiple",value:function(t){var e=this;G.loopCollection(t,function(t,n){e[n]=t})}},{key:"set",value:function(t,e,n){if("object"==j(t)&&void 0===e)return this.setMultiple(t);"function"==typeof e&&n?G.defineProperty(this,t,{get:e}):this[t]=e}}])&&M(e.prototype,n),o&&M(e,o),t}();function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)};L(F,"activeSkin",null),L(F,"plotChunkSize",15),L(F,"DPR",window.devicePixelRatio),L(F,"assets",{html:{},css:{},skins:{},shaders:{}}),L(F,"isTouchDevice","ontouchstart"in window),L(F,"values",{domDoubletapTimeout:250,plotLineDefaultLineWidth:2,plotExtremumTweenDuration:200,plotSeriesVisibilityTweenDuration:200,plotExtremumPadding:.35,plotSelectedPositionCircleRadius:10,gridOrderDivider:2,gridPatternYCaptionsCount:5,gridPatternXCaptionsCount:5}),L(F,"l18n",{month_1:"Jan",month_2:"Feb",month_3:"March",month_4:"Apr",month_5:"May",month_6:"Jun",month_7:"Jul",month_8:"Aug",month_9:"Sep",month_10:"Oct",month_11:"Nov",month_12:"Dec",weekday_0:"Sun",weekday_1:"Mon",weekday_2:"Tue",weekday_3:"Wed",weekday_4:"Thu",weekday_5:"Fri",weekday_6:"Sat"}),L(F,"skinValues",{}),L(F,"glColors",{gridPatternLineColor:D.color(1,1,1),gridPatternSelectedValueLineColor:D.color(1,1,1)});var I=F;function U(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function B(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}document.createElement("canvas").getContext("2d");var N=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"loopCollection",value:function(t,e){if(t)if(Array.isArray(t)||"number"==typeof t.length)for(var n=0,o=t.length;n<o&&!e(t[n],n,t);n++);else for(var i in t)if(e(t[i],i,t))break}},{key:"loop",value:function(t,e,n,o,i){if(o)for(var r=t,a=0;r<e&&!i(r,a);r+=n)a++;else for(r=t,a=0;r<=e&&!i(r,a);r+=n)a++}},{key:"generateRandomString",value:function(t,e){for(var n="";n.length<e;)n+=Math.random().toString(32).substring(3,12);return n=n.substring(0,e),"".concat(t,"-").concat(n)}},{key:"assignValues",value:function(t,e){this.loopCollection(e,function(e,n){t[n]=e})}},{key:"parseHTML",value:function(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}},{key:"injectCSS",value:function(t,e){document.querySelector("#glengine-css-".concat(t))?document.querySelector("#glengine-css-".concat(t)).textContent=e:document.querySelector("head").appendChild(this.parseHTML('<style id="glengine-css-'.concat(t,'" type="text/css">').concat(e,"</style>")))}},{key:"generateVarsCSS",value:function(t){var e="";return this.loopCollection(t,function(t,n){e+="--".concat(n,":").concat(t,";\n")}),e=".glengine {".concat(e,"}")}},{key:"generateAttributesSelector",value:function(t){var e="";return this.loopCollection(t,function(t,n){e+="[".concat(n,'="').concat(t,'"]')}),e}},{key:"defineProperty",value:function(t,e,n){Object.defineProperty(t,e,n)}},{key:"proxyMethods",value:function(t,e,n){this.loopCollection(n,function(n,o){t[n]=function(){return e[n].apply(e,arguments)}})}},{key:"proxyProps",value:function(t,e,n){var o=this;this.loopCollection(n,function(n,i){o.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},configurable:!0})})}},{key:"generateRandomCSSHexColor",value:function(){return"#".concat(Math.floor(16777215*Math.random()).toString("16"))}},{key:"cssHexToRGB",value:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16)/255,g:parseInt(e[2],16)/255,b:parseInt(e[3],16)/255}:null}},{key:"stringTemplate",value:function(t,e){var n=t;return e&&this.loopCollection(e,function(t,e){var o=new RegExp("[$]{".concat(e,"}"),"gm");o.test(n)&&(n=n.replace(o,t))}),n}},{key:"formatDate",value:function(t,e){var n="".concat(t,"/").concat(e);if(this.$dateFormatCache[n])return this.$dateFormatCache[n];var o=new Date(t),i=o.getUTCDate().toString(),r=o.getDay().toString(),a=(o.getUTCMonth()+1).toString(),c=I.l18n["month_".concat(a)],l=I.l18n["weekday_".concat(r)];return this.$dateFormatCache[n]=this.stringTemplate(e,{date:i,month:a,monthName:c,weekday:r,weekdayName:l}),this.$dateFormatCache[n]}},{key:"formatValue",value:function(t){var e=t.toString();return t/1e3>=1&&(e="".concat((t/1e3).toString(),"k")),t/1e6>=1&&(e="".concat((t/1e6).toString(),"M")),e}},{key:"throttle",value:function(t,e){t.__throttleTimeoutId&&clearTimeout(t.__throttleTimeoutId),t.__throttleTimeoutId=setTimeout(function(){t()},e)}}],(n=null)&&U(e.prototype,n),o&&U(e,o),t}();B(N,"aggregation",c),B(N,"DataKeeper",A),B(N,"$dateFormatCache",{});var G=N;function H(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"on",value:function(e,n){var o=G.generateRandomString(e,16);return this.$subscriptions=this.$subscriptions||{},this.$subscriptions[e]=this.$subscriptions[e]||{},this.$subscriptions[e][o]=n,this.off.bind(t,e,o)}},{key:"emit",value:function(t,e){this.$subscriptions&&this.$subscriptions[t]&&G.loopCollection(this.$subscriptions[t],function(t){t(e)})}},{key:"off",value:function(t,e){this.$subscriptions&&this.$subscriptions[t]&&this.$subscriptions[t][e]&&delete this.$subscriptions[t][e]}}],(n=null)&&H(e.prototype,n),o&&H(e,o),t}();function K(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function X(t,e,n){return e&&K(t.prototype,e),n&&K(t,n),t}var Z=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.UUID=G.generateRandomString(this.constructor.name,32),this.$state=new G.DataKeeper,this.$modules=new G.DataKeeper,this.$temp=new G.DataKeeper}return X(t,[{key:"domComponent",get:function(){if(this.$modules)return this.$modules.domComponent||null}},{key:"domElement",get:function(){if(this.domComponent)return this.domComponent.domElement}}]),X(t,[{key:"on",value:function(t,e){Y.on("".concat(this.UUID,"/").concat(t),e)}},{key:"emit",value:function(t,e){Y.emit("".concat(this.UUID,"/").concat(t),e)}},{key:"clog",value:function(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];(t=console).log.apply(t,["%cGLEngine:".concat(this.constructor.name,":"),"font-weight:bold; color:#3982c6;"].concat(n))}}]),t}();function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tt,et,nt,ot=function(t){function e(t){var n,o,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,i=W(e).call(this),(n=!i||"object"!==V(i)&&"function"!=typeof i?Q(o):i).$state={normalizedEventData:{prevPanDistance:null},domElement:t.domElement,eventsList:t.eventsList},G.loopCollection(t.eventsList,function(t,o){e.eventDetectors[t].call(Q(n),n.$state.domElement,function(t){n.emit(t.type,t),n.emit("$event",{type:t.type,payload:t})})}),n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(e,Z),n=e,(o=[{key:"$normalizeEventData",value:function(t,e,n){var o=n.getBoundingClientRect(),i=e,r=this.$state.normalizedEventData;return r.isGesture=!1,e instanceof window.TouchEvent?r=this.$normalizeTouchEventData(t,e,n):(r.x=(i.pageX-o.x)*I.DPR,r.y=(o.height-(i.pageY-o.y))*I.DPR,r.pageX=i.pageX*I.DPR,r.pageY=i.pageY*I.DPR),r.type=t,r.target=n,this.$state.normalizedEventData.originalEvent=e,this.$state.normalizedEventData}},{key:"$normalizeTouchEventData",value:function(t,e,n){return e.touches.length>1?this.$state.normalizedEventData=this.$normalizeTouchGestureEventData(t,e):1===e.touches.length?this.$state.normalizedEventData=this.$normalizeEventData(t,e.touches[0],n):console.log(1),this.$state.normalizedEventData}},{key:"$normalizeTouchGestureEventData",value:function(t,e){if(this.$state.normalizedEventData.isGesture=!0,this.$state.normalizedEventData.touchesCount=e.touches.length,2==e.touches.length){var n=D.getDistance(D.point(e.touches[0].pageX,e.touches[0].pageY),D.point(e.touches[1].pageX,e.touches[1].pageY));this.$state.normalizedEventData.panDistance=n}return this.$state.normalizedEventData}}])&&q(n.prototype,o),i&&q(n,i),e}();nt={click:function(t,e){var n=this;t.addEventListener("click",function(o){o.stopPropagation(),e(n.$normalizeEventData("click",o,t))})},drag:function(t,e){var n,o,i,r=this,a=0,c=0,l=0,s=0,f=!1;I.isTouchDevice?(n="touchstart",o="touchend",i="touchmove"):(n="mousedown",o="mouseup",i="mousemove"),t.addEventListener(n,function(e){e.stopPropagation(),e=r.$normalizeEventData("drag",e,t),a=e.pageX,c=e.pageY,f=!0}),window.addEventListener(o,function(t){f=!1}),window.addEventListener(i,function(n){f&&(n.stopPropagation(),n.preventDefault(),n=r.$normalizeEventData("drag",n,t),l=n.pageX-a,s=n.pageY-c,a=n.pageX,c=n.pageY,n.dragX=l,n.dragY=s,e(n))},{passive:!1})},pan:function(t,e){var n=this;if(I.isTouchDevice){var o=!1,i=0;t.addEventListener("touchstart",function(t){o=!0}),window.addEventListener("touchend",function(t){o=!1,i=0}),window.addEventListener("touchmove",function(r){var a=n.$normalizeEventData("pan",r,t);if(o&&a.isGesture&&2==a.touchesCount){var c=i/a.panDistance;i=a.panDistance,a.panDelta=c,e(a)}},{cancelable:!0})}},zoom:function(t,e){var n=this;I.isTouchDevice||t.addEventListener("mousewheel",function(o){o.preventDefault();var i=o.wheelDeltaY>0;(o=n.$normalizeEventData("zoom",o,t)).zoomIn=i,e(o)},{passive:!1})},doubletap:function(t,e){var n=this,o=0;t.addEventListener("click",function(i){i.preventDefault();var r=+new Date;r-o<I.values.domDoubletapTimeout&&e(n.$normalizeEventData("doubletap",i,t)),o=r})},mousemove:function(t,e){var n=this;t.addEventListener("mousemove",function(o){e(n.$normalizeEventData("mousemove",o,t))})}},(et="eventDetectors")in(tt=ot)?Object.defineProperty(tt,et,{value:nt,enumerable:!0,configurable:!0,writable:!0}):tt[et]=nt;var it=ot;function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function at(t,e){return!e||"object"!==rt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function st(t,e,n){return e&&lt(t.prototype,e),n&&lt(t,n),t}function ft(t,e){return(ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ut=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=at(this,ct(e).call(this))).$refs={},n.$dom={},n.$children=[],n.$state={template:t.template,eventHandlers:[]};var o=I.assets.html[t.template];return n.$dom.element=n.$buildTemplate(o,t),t.classList&&G.loopCollection(t.classList,function(t){n.$dom.element.classList.add(t)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ft(t,e)}(e,Z),st(e,[{key:"domElement",get:function(){return this.$dom.element}},{key:"classList",get:function(){return this.domElement.classList}}]),st(e,[{key:"ref",value:function(t){return this.$refs[t]}},{key:"addChild",value:function(t,e){this.$refs[t].appendChild(e)}},{key:"$buildTemplate",value:function(t,e){var n=this,o=G.parseHTML(t,e);return this.$traverseDOM(o,function(t,o){n.$processAttrs(t,o,e)},null),o}},{key:"$traverseDOM",value:function(t,e,n){var o=this;e(t,n),G.loopCollection(t.children,function(t,n){o.$traverseDOM(t,e,t.parentNode)})}},{key:"$processAttrs",value:function(t,e,n){var o=this;G.loopCollection(t.attributes,function(e,n){switch(e.name){case"$ref":o.$refs[e.value]=t,t.$ref=e.value;break;case"$css":G.loopCollection(e.value.split(" "),function(t,e){G.injectCSS(t,I.assets.css[t])});break;case"$events":var i=new it({domElement:t,eventsList:e.value.split(" ")});i.on("$event",function(e){var n=t.$ref||"";o.emit("".concat(n,".").concat(e.type),e.payload)}),o.$state.eventHandlers.push(i)}})}}]),e}();function pt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function dt(t,e,n){return e&&pt(t.prototype,e),n&&pt(t,n),t}var vt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=e.vertices,this.buffer=e.buffer}return dt(t,null,[{key:"setValue",value:function(t,e,n){for(var o=n*e,i=arguments.length,r=new Array(i>3?i-3:0),a=3;a<i;a++)r[a-3]=arguments[a];G.loopCollection(r,function(e,n){t[o+n]=e})}}]),dt(t,[{key:"setValue",value:function(e,n){for(var o=arguments.length,i=new Array(o>2?o-2:0),r=2;r<o;r++)i[r-2]=arguments[r];t.setValue.apply(t,[this.vertices,e].concat(i))}}]),t}();function ht(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function mt(t,e,n){return e&&ht(t.prototype,e),n&&ht(t,n),t}var yt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$state=new G.DataKeeper({geometryInited:!1,indicesInitialized:!1}),this.$temp=new G.DataKeeper,this.attributes=new G.DataKeeper,e&&e.attributes&&this.setAttributesData(e.attributes)}return mt(t,[{key:"geometryInited",get:function(){return this.$state.geometryInited}},{key:"indicesCount",get:function(){return this.$state.indices.length}}]),mt(t,[{key:"setAttributesData",value:function(t){this.$state.attributesData=t}},{key:"init",value:function(t,e,n){var o=this;this.$state.geometryInited=!0,G.loopCollection(this.$state.attributesData,function(n,i){o.$addAttribute(t,e,i,n)}),this.$state.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.$state.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.$state.indices),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}},{key:"$addAttribute",value:function(t,e,n,o){this.$state.indicesInitialized||this.$generateIndices(o.length/2),this.attributes[n]=new vt({vertices:o,buffer:e.createBuffer()}),e.bindBuffer(e.ARRAY_BUFFER,this.attributes[n].buffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null)}},{key:"$generateIndices",value:function(t){var e=[];G.loop(0,t,1,!0,function(t){e[t]=t}),this.$state.indicesInitialized=!0,this.$state.indices=e}},{key:"bind",value:function(t,e,n){var o=this;G.loopCollection(this.attributes,function(t,i){var r=t.buffer;e.bindBuffer(e.ARRAY_BUFFER,r),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o.$state.indexBuffer);var a=e.getAttribLocation(n,i);a>-1&&(e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(a))})}}]),t}();function bt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var gt=function(){function t(e,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=n,this.name=e,this.shaderProgram=this.shaderProgram,this.type=i.uniformType,this.value=i,this.$state=new G.DataKeeper({loc:n.getUniformLocation(o,e)})}var e,n,o;return e=t,(n=[{key:"update",value:function(){this.value.isSimple?this.gl[this.type](this.$state.loc,this.value.valueOf()):this.gl[this.type](this.$state.loc,this.value.toArray())}}])&&bt(e.prototype,n),o&&bt(e,o),t}();function xt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function wt(t,e,n){return e&&xt(t.prototype,e),n&&xt(t,n),t}var St=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$state=new G.DataKeeper({uniformsData:e.uniforms,materialInited:!1,uniformsInited:!1,vertexShaderCode:I.assets.shaders[e.vertexShader],fragmentShaderCode:I.assets.shaders[e.fragmentShader]}),this.uniforms=new G.DataKeeper}return wt(t,[{key:"materialInited",get:function(){return this.$state.materialInited}},{key:"program",get:function(){return this.$state.shaderProgram}}]),wt(t,[{key:"init",value:function(t,e){this.$state.materialInited=!0,this.$state.fragmentShader=this.$compileShader(t,e,"fragment",this.$state.fragmentShaderCode),this.$state.vertexShader=this.$compileShader(t,e,"vertex",this.$state.vertexShaderCode);var n=this.$state.shaderProgram=e.createProgram();e.attachShader(n,this.$state.vertexShader),e.attachShader(n,this.$state.fragmentShader),this.$linkProgram(e),this.$initUniforms(t,e)}},{key:"$compileShader",value:function(t,e,n,o){var i=e.createShader("vertex"==n?e.VERTEX_SHADER:e.FRAGMENT_SHADER);return e.shaderSource(i,G.stringTemplate(o,{maxShaderPrecision:t.maxShaderPrecision})),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)||console.log("Shader compilation failed: ".concat(e.getShaderInfoLog(i)," ")),i}},{key:"$initUniforms",value:function(t,e){this.addMultipleUniforms(e,this.$state.uniformsData),this.addMultipleUniforms(e,{position:D.vec2(0,0),worldPosition:D.vec2(0,0),worldScale:D.vec2(0,0),viewportSize:D.vec2(0,0),resolution:D.float32(1),opacity:D.float32(1),time:D.float32(0),mouse:D.vec2(1,1)})}},{key:"$linkProgram",value:function(t){t.linkProgram(this.$state.shaderProgram)}},{key:"addMultipleUniforms",value:function(t,e){var n=this;G.loopCollection(e,function(e,o){n.addUniform(o,t,n.$state.shaderProgram,e)})}},{key:"addUniform",value:function(t,e,n,o){this.uniforms[t]=new gt(t,e,n,o)}},{key:"updateUniforms",value:function(t){var e=this;t&&G.loopCollection(t,function(t,n){e.uniforms[n].value.set(t)}),G.loopCollection(this.uniforms,function(t,e){t.update()})}}]),t}();function _t(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ot(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $t=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),kt(this,"parentNode",null),this.children=[],this.UUID=G.generateRandomString("rendering-object-".concat(this.constructor.name),16),this.$data={},this.$temp={},this.$params={},this.$state={position:D.vec2(0,0),boundRect:D.rect(0,0,0,0),culled:!0,projectionCulled:!0,visible:!0,opacity:D.float32(1)},this.$setupHiddenDOM(),e&&(this.defaultParams?this.setParams(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){kt(t,e,n[e])})}return t}({},this.defaultParams,{params:e})):this.setParams(e)),G.proxyProps(this,this.$state,["culled","projectionCulled","position","visible","opacity"])}var e,n,o;return e=t,(n=[{key:"getBoundRect",value:function(){return this.$state.boundRect}},{key:"setAttributes",value:function(t){var e=this;G.loopCollection(t,function(t,n){e.$hiddenDOM.setAttribute(n,t)})}},{key:"setStyles",value:function(t){}},{key:"setParams",value:function(t){var e=this;G.loopCollection(t,function(t,n){"styles"==n?e.setStyles(t):"attributes"==n?e.setAttributes(t):e.$params[n]=void 0!==t?t:e.$params.name})}},{key:"addChild",value:function(t){this.children.push(t),t.parentNode=this,this.$hiddenDOM.appendChild(t.$hiddenDOM)}},{key:"removeChild",value:function(t){var e=this;G.loopCollection(this.children,function(n,o){if(t.UUID==n.UUID)return e.$hiddenDOM.removeChild(t.$hiddenDOM),t.parentNode=null,e.children.splice(o,1),!0})}},{key:"render",value:function(t,e,n,o,i){i*=this.opacity,n+=this.$state.position.x,o+=this.$state.position.y,G.loopCollection(this.children,function(r,a){r.visible&&r.render(t,e,n,o,i)})}},{key:"select",value:function(t,e){var n=_t(this.$hiddenDOM.querySelectorAll(G.generateAttributesSelector(t)));return G.loopCollection(n,function(t,o){e&&e(t.$renderingObject,o),n[o]=t.$renderingObject}),n}},{key:"$setupHiddenDOM",value:function(){this.$hiddenDOM=document.createElement(this.constructor.name),this.$hiddenDOM.$renderingObject=this,this.$hiddenDOM.setAttribute("type",this.constructor.name)}}])&&Ot(e.prototype,n),o&&Ot(e,o),t}();function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ct(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rt(t,e,n){return(Rt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Et(t)););return t}(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tt(t,e){return(Tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dt=function(t){function e(t){var n,o,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,n=!(i=Et(e).call(this,t))||"object"!==Pt(i)&&"function"!=typeof i?Ct(o):i,G.proxyProps(Ct(n),n.$params,["material","geometry"]),n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tt(t,e)}(e,$t),n=e,(o=[{key:"render",value:function(t,n,o,i,r){Rt(Et(e.prototype),"render",this).call(this,t,n,o,i,r),r*=this.opacity;var a=this.material.uniforms;o+=this.position.x,i+=this.position.y,this.material.materialInited||this.material.init(t,n),this.geometry.geometryInited||this.geometry.init(t,n,this.material.program),n.useProgram(this.material.program),this.geometry.bind(t,n,this.material.program),a.position.value.set(o,i),this.material.updateUniforms({worldPosition:t.worldPosition,worldScale:t.worldScale,viewportSize:t.size,resolution:I.DPR,time:t.time,opacity:r,mouse:t.mouse}),n.drawElements(n.TRIANGLES,this.geometry.indicesCount,n.UNSIGNED_SHORT,0)}}])&&zt(n.prototype,o),i&&zt(n,i),e}();function jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Mt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,o=[{key:"addTask",value:function(e){var n=G.generateRandomString("task",16);return this.$tasks=this.$tasks||{},this.$tasks[n]=e,this.removeTask.bind(t,n)}},{key:"removeTask",value:function(t){delete this.$tasks[t]}},{key:"init",value:function(){this.$state={prevFrameTime:+new Date},this.tick=this.tick.bind(this)}},{key:"start",value:function(){this.stop(),this.init(),this.tick()}},{key:"stop",value:function(){window.cancelAnimationFrame(this.$rafId)}},{key:"tick",value:function(){this.$rafId=window.requestAnimationFrame(this.tick);var t=+new Date,e=t-this.$state.prevFrameTime,n=e/(1e3/60);this.$state.prevFrameTime=t,G.loopCollection(this.$tasks,function(t,o){t(n,e)})}}],(n=null)&&jt(e.prototype,n),o&&jt(e,o),t}();function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ft(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ut(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Bt(t,e,n){return e&&Ut(t.prototype,e),n&&Ut(t,n),t}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ft(this,It(e).call(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),o.forEach(function(e){Lt(t,e,n[e])})}return t}({scale:D.vec2(1,1),size:D.vec2(1,1),applyScaleX:!1,applyScaleY:!1,applySizeX:!1,applySizeY:!1,applyPosX:!0,applyPosY:!0},t)))).$temp={prevEngine:null,prevGl:null,prevPx:0,prevPy:0},n.$state.culled=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(e,$t),Bt(e,[{key:"scale",get:function(){return this.$params.scale}},{key:"size",get:function(){return this.$params.size}},{key:"soloRenderingAvailable",get:function(){return!!this.$temp.prevEngine}}]),Bt(e,[{key:"setStyles",value:function(t,e){G.assignValues((e||this.$params.domElement).style,t)}},{key:"setStyle",value:function(t,e){this.$params.domElement.style[t]=e}},{key:"render",value:function(t,e,n,o){if(!t){if(!this.soloRenderingAvailable)return;t=this.$temp.prevEngine,e=this.$temp.prevGl,n=this.$temp.prevPx,o=this.$temp.prevPy}var i=I.DPR;this.$temp.prevEngine=t,this.$temp.prevGl=e,this.$temp.prevPx=n,this.$temp.prevPy=o,n+=this.$state.position.x,o+=this.$state.position.y;var r=t.toReal(n,o),a=t.toRealScale(this.$params.scale.x,this.$params.scale.y),c=t.toRealScale(this.$params.size.x,this.$params.size.y),l=this.$params.applyScaleX,s=this.$params.applyScaleY,f=this.$params.applySizeX,u=this.$params.applySizeY,p=this.$params.applyPosX,d=this.$params.applyPosY;this.setStyle("transform","translate(".concat(p?r.x/i:0,"px, ").concat(d?r.y/i:0,"px) scale(").concat(l?a.x/i:1,", ").concat(s?a.y/i:1,")")),f&&this.setStyle("width","".concat(c.x/i,"px")),u&&this.setStyle("height","".concat(c.y/i,"px"))}}]),e}();function Ht(t){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yt(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Kt(t){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t,e){return(Xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zt=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Yt(this,Kt(e).call(this,t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xt(t,e)}(e,$t),e}();function Vt(t){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wt(t,e){return!e||"object"!==Vt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qt(t){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var te=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Wt(this,Qt(e).call(this,t))).$temp.setMultiple({direction:D.vec2(0,0),negNormal:D.vec2(0,0),posNormal:D.vec2(0,0)}),t.points&&n.setAttributesData(n.$generateLineGeometry(t.points)),n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(e,yt),n=e,(o=[{key:"$generateLineGeometry",value:function(t){var e=this,n=[],o=[],i=0,r=vt.setValue;return G.loopCollection(t,function(a,c){var l=c<t.length-2?t[c+1]:t[c-1],s=D.vec2direction(e.$temp.direction,a,l),f=D.vec2normal(e.$temp.negNormal,s,!1),u=D.vec2normal(e.$temp.posNormal,s,!0);r(n,2,i,a.x,a.y),r(o,2,i++,f.x,f.y),r(n,2,i,l.x,l.y),r(o,2,i++,f.x,f.y),r(n,2,i,a.x,a.y),r(o,2,i++,u.x,u.y),r(n,2,i,a.x,a.y),r(o,2,i++,u.x,u.y),r(n,2,i,l.x,l.y),r(o,2,i++,f.x,f.y),r(n,2,i,l.x,l.y),r(o,2,i++,u.x,u.y)}),{coords:n,normal:o}}}])&&qt(n.prototype,o),i&&qt(n,i),e}();function ee(t){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function oe(t,e){return!e||"object"!==ee(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function re(t,e){return(re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ae=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=oe(this,ie(e).call(this,t))).$params.material=new St({fragmentShader:"frag.default",vertexShader:"vert.line2d",uniforms:t.uniforms}),t.points&&n.setPoints(t.points),n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&re(t,e)}(e,Dt),n=e,(o=[{key:"setPoints",value:function(t){this.$data.points=t;var e=D.getExtremum(t);this.$state.boundRect.set(t[0].x,e.min,t[t.length-1].x-this.$state.boundRect.x,e.size),this.geometry=new te({points:t})}}])&&ne(n.prototype,o),i&&ne(n,i),e}();function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function le(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function se(t,e){return!e||"object"!==ce(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ue(t,e){return(ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pe=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=se(this,fe(e).call(this,t))).$temp.setMultiple({direction:D.vec2(0,0),negNormal:D.vec2(0,0),posNormal:D.vec2(0,0)}),n.setAttributesData(n.$generateRectGeometry(t.width||1,t.height||1)),n}var n,o,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ue(t,e)}(e,yt),n=e,(o=[{key:"$generateRectGeometry",value:function(t,e){return{coords:[0,0,0,e/2,t/2,0,t/2,0,0,e/2,t/2,e/2]}}}])&&le(n.prototype,o),i&&le(n,i),e}();function de(t){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ve(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function he(t,e,n){return(he="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=me(t)););return t}(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function me(t){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ye(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function be(t,e,n){return e&&ye(t.prototype,e),n&&ye(t,n),t}function ge(t,e){return(ge=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var we=function(t){function e(){var t,n,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=me(e).call(this),(t=!o||"object"!==de(o)&&"function"!=typeof o?ve(n):o).$modules={canvas:new ut({template:"canvas-element"})},t.$dom={canvasElement:t.$modules.canvas.domElement},t.$state={gl:t.$dom.canvasElement.getContext("webgl"),size:D.vec2(1,1),position:D.vec2(0,0),scale:D.vec2(1,1),viewport:D.rect(0,0,1,1),worldPosition:D.vec2(0,0),worldScale:D.vec2(1,1),projectionModified:!0,sizeNeedsUpdate:!0,maxShaderPrecision:"mediump",time:D.float32(0),mouse:D.vec2(0,0)},t.$temp.prevTimeUpdate=+new Date,t.$temp.time=+new Date,t.$modules.canvas.on("canvas.mousemove",function(e){t.$state.mouse.set(e.x/t.$state.size.x,e.y/t.$state.size.y)});var i=t.$state.gl;return i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),i.enable(i.BLEND),i.disable(i.DEPTH_TEST),t.$detectMaxFloatPrecision(),G.proxyProps(ve(t),t.$state,["position","scale","viewport","size","worldScale","worldPosition","maxShaderPrecision","time","mouse"]),t.render=t.render.bind(ve(t)),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ge(t,e)}(e,G.aggregation(Z,$t)),be(e,[{key:"domElement",get:function(){return this.$dom.canvasElement}}],[{key:"processAsset",value:function(t,e,n,o){t.keys().forEach(function(i){var r=t(i).default,a=i.replace(".".concat(n),"").replace("./","");I.assets[e][a]=o?o(r):r})}},{key:"loadAssets",value:function(){this.processAsset(n(1),"html","html"),this.processAsset(n(11),"css","scss"),this.processAsset(n(13),"shaders","glsl")}}]),be(e,[{key:"setSize",value:function(t,e){t*=I.DPR,e*=I.DPR,this.$state.size.x===t&&this.$state.size.y===e||t&&e&&(this.$dom.canvasElement.width=t,this.$dom.canvasElement.height=e,this.$state.size.set(t,e),this.$state.gl.viewport(0,0,t,e),this.updateProjection())}},{key:"setScale",value:function(t,e){this.$state.viewport.w=this.$state.size.x*t,this.$state.viewport.h=this.$state.size.y*e,this.updateProjection()}},{key:"setPosition",value:function(t,e){e="number"==typeof e?e:this.$state.position.y,this.$state.position.set(t,e),this.updateProjection()}},{key:"setViewport",value:function(t,e,n,o){var i=this.$state.viewport;i.set(t,e,n,o),this.$state.position.set(i.x,i.y),this.emit("viewport.updated",i),this.updateProjection()}},{key:"fitSize",value:function(){if(this.domElement.parentNode){var t=this.domElement.parentElement.getBoundingClientRect();this.setSize(t.width,t.height)}}},{key:"updateProjection",value:function(){var t=this.$state.viewport,e=this.$state.position,n=this.$state.worldPosition,o=this.$state.worldScale,i=this.$state.size,r=this.$state.scale;r.set(t.w/i.x,t.h/i.y),t.x=e.x,t.y=e.y,n.set(t.x,t.y),o.set(r.x/2,r.y/2),this.$state.projectionModified=!0,this.emit("projection.updated",t)}},{key:"toReal",value:function(t,e){return D.point(Math.round((t-this.position.x)/this.scale.x),Math.round(this.size.y-(e-this.position.y)/this.scale.y))}},{key:"toRealScale",value:function(t,e){return D.point(Math.round(t/this.scale.x),Math.round(e/this.scale.y))}},{key:"toVirtual",value:function(t,e){return D.point(t*this.scale.x+this.position.x,(this.size.y-e)*this.scale.y+this.position.y)}},{key:"toVirtualScale",value:function(t,e){return D.point(t*this.scale.x,e*this.scale.y)}},{key:"render",value:function(t){this.fitSize(),(this.$state.projectionModified||!0===t)&&(this.$state.projectionModified=!1,this.$updateTime(),he(me(e.prototype),"render",this).call(this,this,this.$state.gl,-this.$state.position.x,-this.$state.position.y,1))}},{key:"updateValue",value:function(t){this.value=t||this.value}},{key:"$detectMaxFloatPrecision",value:function(){var t=this.$state.gl,e="lowp";G.loopCollection({LOW_FLOAT:"lowp",MEDIUM_FLOAT:"mediump",HIGH_FLOAT:"highp"},function(n,o){var i=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t[o]),r=t.getShaderPrecisionFormat(t.VERTEX_SHADER,t[o]);i&&r&&i.precision&&r.precision&&(e=n)}),this.clog("Max shader float precision format: ".concat(e)),this.$state.maxShaderPrecision=e}},{key:"$updateTime",value:function(){var t=+new Date,e=t-this.$temp.prevTimeUpdate;this.$temp.prevTimeUpdate=t,this.$temp.time=(this.$temp.time+e)%36e5,this.$state.time.set(this.$temp.time/1e3)}}]),e}();xe(we,"MainLoop",Mt),xe(we,"ChartMath",D),xe(we,"Utils",G),xe(we,"Geometry",yt),xe(we,"Material",St),xe(we,"Mesh",Dt),xe(we,"RenderingObject",$t),xe(we,"Uniform",gt),xe(we,"DOMElement",Gt),xe(we,"Group",Zt),xe(we,"Line",ae),xe(we,"RectGeometry",pe),we.loadAssets();e.default=we},function(t,e,n){var o={"./canvas-element.html":2,"./chart-control-series-button.html":3,"./chart-control.html":4,"./frame-control.html":5,"./grid-caption.html":6,"./selected-position-circle.html":7,"./selected-values-banner-value.html":8,"./selected-values-banner.html":9,"./telechart.html":10};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=1},function(t,e,n){n.r(e),e.default='<canvas class="telechart-canvas fit-width fit-height" $ref="canvas" $events="mousemove"></canvas>'},function(t,e,n){n.r(e),e.default='<div \n\tclass="series-button flex-row flex-a-center button"\n\t$ref="series-button"\n\t$events="click"\n>\n\t\t<div \n\t\t\tclass="checkbox-wrapper border-box pos-relative"\n\t\t\t$ref="checkbox-wrapper"\n\t\t>\n\t\t\t<div class="box box-a pos-absolute"></div>\n\t\t\t<div class="box box-b pos-absolute"></div>\n\t\t</div>\n\t\t<p \n\t\t\tclass="caption"\n\t\t\t$ref="caption"\n\t\t></p>\n</div>'},function(t,e,n){n.r(e),e.default='<div\n\tclass="chart-controls fit-width fit-height"\n\t$ref="chart-controls"\n>\n\t\t<div\n\t\t\tclass="series-buttons fit-width fit-height flex-row"\n\t\t\t$ref="series-buttons"\n\t\t>\n\t\t\t\n\t\t</div>\n</div>'},function(t,e,n){n.r(e),e.default='<div \n\tclass="frame-control pos-absolute fit-height border-box fit-width flex-row"\n\t$ref="frame-control"\n>\n\t\t<div\n\t\t\tclass="filler left-filler fit-height pos-absolute border-box"\n\t\t\t$ref="frame-control.filler.left"\n\t\t\t$events="drag"\n\t\t></div>\n\t\t\n\t\t<div\n\t\t\tclass="frame fit-height flex-no-shrink pos-absolute border-box"\n\t\t\t$ref="frame-control.frame"\n\t\t\t$events="drag"\n\t\t>\n\t\t</div>\n\t\n\t\t<div\n\t\t\tclass="filler right-filler fit-height pos-absolute border-box"\n\t\t\t$ref="frame-control.filler.right"\n\t\t\t$events="drag"\n\t></div>\n</div>'},function(t,e,n){n.r(e),e.default='<div class="grid-caption pos-absolute">\n\t<p  class="font-w-bold"\n\t\t$ref="caption"\n\t>test</p>\n</div>'},function(t,e,n){n.r(e),e.default='<div \n\tclass="selected-position-circle pos-absolute"\n>\n\t<div \n\t\tclass="inner border-box"\n\t\t$ref="inner"\n\t></div>\n</div>'},function(t,e,n){n.r(e),e.default='<div\n\tclass="series-value flex-column"\n\t$ref="series-value"\n>\n\t<div\n\t\tclass="value-container"\n\t>\n\t\t<p\n\t\t\tclass="value font-w-bold"\n\t\t\t$ref="value"\n\t\t></p>\n\t</div>\n\t<div\n\t\tclass="caption-container"\n\t>\n\t\t<p\n\t\t\tclass="caption"\n\t\t\t$ref="caption"\n\t\t></p>\n\t</div>\n</div>'},function(t,e,n){n.r(e),e.default='<div\n\tclass="selected-values-banner pos-absolute flex-column"\n\t$ref="banner"\n\t$events="click"\n>\n\t<div class="inner fit-width fit-height flex-column">\n\t\t<div class="date-value">\n\t\t\t<p\n\t\t\t\tclass="value"\n\t\t\t\t$ref="date-value"\n\t\t\t></p>\n\t\t</div>\n\t\t<div\n\t\t\tclass="series-values-wrapper flex-row"\n\t\t\t$ref="series-values-wrapper"\n\t\t></div>\n\t</div>\n</div>'},function(t,e,n){n.r(e),e.default='<div \n\tclass="telechart flex-column fit-width fit-height border-box"\n\t$ref="telechart"\n\t$css="modifiers telechart">\n\t\t<div class="header caption flex-row flex-a-center flex-no-shrink">\n\t\t\t<p class="font-w-bold">Followers</p>\n\t\t</div>\n\t\t<div \n\t\t\tclass="major-plot-wrapper fit-width pos-relative flex-stretch-content"\n\t\t\t$ref="major-plot-wrapper">\n\t\t</div>\n\t\t<div \n\t\t\tclass="panorama-plot-wrapper fit-width pos-relative  overflow-hidden"\n\t\t\t$ref="panorama-plot-wrapper">\n\t\t</div>\n\t\t<div \n\t\t\tclass="chart-controls-wrapper flex-row fit-width flex-no-shrink"\n\t\t\t$ref="chart-controls-wrapper">\n\t\t</div>\n\t\t<div \n\t\t\tclass="theme-switcher button fit-width flex-row flex-j-center"\n\t\t\t$ref="theme-switcher"\n\t\t\t$events="click">\n\t\t\t\t<p \n\t\t\t\t\tclass="font-w-normal"\n\t\t\t\t\t$ref="theme-switcher-caption">Switch to Night Mode\n\t\t\t\t</p>\n\t\t</div>\n</div>'},function(t,e,n){var o={"./modifiers.scss":12};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=11},function(t,e,n){n.r(e),e.default=".flex-row {\n  display: flex;\n  flex-direction: row; }\n\n.flex-column {\n  display: flex;\n  flex-direction: column; }\n\n.flex-j-center {\n  display: flex;\n  justify-content: center; }\n\n.flex-a-center {\n  display: flex;\n  align-items: center; }\n\n.flex-grow {\n  display: flex;\n  flex-grow: 1; }\n\n.flex-no-shrink {\n  display: flex;\n  flex-shrink: 0; }\n\n.flex-shrink {\n  display: flex;\n  flex-shrink: 1; }\n\n.flex-stretch-content {\n  display: flex;\n  align-items: stretch;\n  justify-content: stretch; }\n\n.fit-width {\n  width: 100%; }\n\n.fit-height {\n  height: 100%; }\n\n.border-box {\n  box-sizing: border-box; }\n\n.pos-absolute {\n  position: absolute;\n  left: 0;\n  top: 0; }\n\n.pos-relative {\n  position: relative; }\n\n.font-w-lighter {\n  font-weight: lighter; }\n\n.font-w-normal {\n  font-weight: normal; }\n\n.font-w-bold {\n  font-weight: 600; }\n\n.font-w-bolder {\n  font-weight: bolder; }\n\n.overflow-hidden {\n  overflow: hidden; }\n"},function(t,e,n){var o={"./frag.bubbles.glsl":14,"./frag.crosses.glsl":15,"./frag.default.glsl":16,"./frag.flower.glsl":17,"./frag.fluid.glsl":18,"./frag.fluid_m.glsl":19,"./frag.framework.glsl":20,"./frag.ocean.glsl":21,"./frag.rain-road.glsl":22,"./frag.tech-roads.glsl":23,"./frag.tubex.glsl":24,"./vert.default.glsl":25,"./vert.grid-line-x.glsl":26,"./vert.grid-line-y.glsl":27,"./vert.line2d.glsl":28};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=13},function(t,e,n){n.r(e),e.default="// Colorful Voronoi\n// By: Brandon Fogerty\n// bfogerty at gmail dot com\n// xdpixel.com\n\n#ifdef GL_ES\nprecision ${maxShaderPrecision} float;\n#endif\n\nuniform float time;\nuniform vec2 viewportSize;\n\nvec2 hash(vec2 p)\n{\n    mat2 m = mat2(  13.85, 147.77,\n                    199.41, 88.48\n                );\n\n    return fract(sin(m*p) * 46738.29);\n}\n\nfloat voronoi(vec2 p)\n{\n    vec2 g = floor(p);\n    vec2 f = fract(p);\n\n    float distanceToClosestFeaturePoint = 11.0;\n    for(int y = -1; y <= 1; y++)\n    {\n        for(int x = -1; x <= 1; x++)\n        {\n            vec2 latticePoint = vec2(x, y);\n            float currentDistance = distance(latticePoint + hash(g+latticePoint), f);\n            distanceToClosestFeaturePoint = min(distanceToClosestFeaturePoint, currentDistance);\n        }\n    }\n\n    return distanceToClosestFeaturePoint;\n}\n\nvoid main( void )\n{\n    vec2 uv = ( gl_FragCoord.xy / viewportSize.xy ) * 2.0 - 1.0;\n    uv.x *= viewportSize.x / viewportSize.y;\n\n    float offset = voronoi(uv*10.0 + vec2(time));\n    float t = 1.0/abs(((uv.x + sin(uv.y + time)) + offset) * 30.0);\n\n    float r = voronoi( uv * 1.0 ) * 10.0;\n    vec3 finalColor = vec3(10.0 * uv.y, 1.0, 1.0 * r) * t;\n    \n    gl_FragColor = vec4(finalColor, 1.0 );\n}"},function(t,e,n){n.r(e),e.default="#ifdef GL_ES\nprecision ${maxShaderPrecision} float;\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n\nuniform float time;\nuniform vec2 viewportSize;\n\nconst float k = 0.4142135623730950488016887242097;\nconst float pi2_3 = 2.0943951023931954923084289221863;\n\nbool getr_( bool r, int a, int n ) {\n\tfor (int i = 1; i < 1000; ++i) {\n\t\tif (i > n) return r; \n\t\tr = (r != (mod(((float(a + i) - 0.5) * k + 0.5), 2.0) < 1.0));\n\t}\n}\n\t\nbool getr( int i1, int i2 ) {\n\tint n1 = (i1 < i2 ? i1 : i2);\n\tint n2 = (i1 + i2 - 2 * n1);\n\tbool r = getr_(false, 0, n1);\n\tr = r ^^ getr_(r, n1, n2);\n\treturn r ^^ ((mod(float(i1), 2.0) >= 1.0 ) && (mod(float(i2), 2.0) >= 1.0));\n}\n\nvoid main( void ) {\n\tvec2 p = gl_FragCoord.xy - viewportSize;\n\tfloat t = (sin(time) * 0.4 - time * 0.3), s = sin(t), c = cos(t);\n\tfloat r = min(viewportSize.x, viewportSize.y) * 1.2;\n\tfloat l = length(p) / r; l = 1.0 - l * l; l = (l > 0.0 ? l : 0.0);\n\tfloat d = exp((sin(time) + 1.0) * 0.7);\n\tp = vec2(c * p.x - s * p.y, s * p.x + c * p.y);\n\tp = abs(p / d) + (0.5, 0.5);\n\t\n\tfloat R = sin(time + pi2_3 * 0.0) * 0.5 + 0.5;\n\tfloat G = sin(time + pi2_3 * 1.0) * 0.5 + 0.5;\n\tfloat B = sin(time + pi2_3 * 2.0) * 0.5 + 0.5;\n\t\n\tgl_FragColor = vec4( (getr(int(p.x), int(p.y)) ? vec3(l * R, l * G, l * B) : vec3(0.0, 0.0, 0.0)), 1.0 );\n}"},function(t,e,n){n.r(e),e.default="precision ${maxShaderPrecision} float;\n\nuniform vec3 diffuse;\nuniform float opacity;\n\nvoid main( void ) {\n   gl_FragColor = vec4( diffuse, opacity );\n}"},function(t,e,n){n.r(e),e.default="#ifdef GL_ES\nprecision ${maxShaderPrecision} float;\n\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n\nconst float PI = acos(-1.0);\nconst float TAU = PI * 2.0;\nconst float phi = sqrt(5.0) * 0.5 + 0.5;\n\nconst float goldenAngle = TAU / phi / phi;\n\nuniform float time;\nuniform vec2 viewportSize;\n\nvec2 rotateAroundPoint(float x){\n\treturn vec2(sin(x), cos(x));\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n    const vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\t\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvec3 calculateGoldenShape(vec2 p){\n\tconst int steps =256;\n\tconst float rSteps = 1.0 / float(steps);\n\t\n\tvec3 result = vec3(0.0);\n\t\n\tfor (int i = 0; i < steps; ++i)\n\t{\n\t\tfloat n = float(i);\n\t\t\n\t\tfloat inc = n * rSteps;\n\t\tvec2 offset = rotateAroundPoint(fract(-time*0.055)*6.28+n * goldenAngle) * inc * 0.45;\n\t\t\n\t\tvec3 dist = vec3(distance(p, offset));\n\t\t     dist = exp2(-dist * 64.0) * hsv2rgb(vec3(fract(time*0.2)+inc*0.75, 1.0, 1.0));\n\t\t\n\t\tresult = max(result, dist);\n\t}\n\t\n\treturn result;\n}\n\nvoid main( void ) {\n\n\tvec2 position = (gl_FragCoord.xy / viewportSize.xy - 0.5) * vec2(viewportSize.x/ viewportSize.y, 1.0);\n\n\tvec3 color = vec3(0.0);\n\t     color += calculateGoldenShape(position) * 3.0;\n\t     color = pow(color, vec3(2.2));\n\t     color /= color + 1.0;\n\t     color = pow(color, vec3(1.0 / 2.2));\n\n\t\n\tgl_FragColor = vec4(color, 1.0 );\n\n}"},function(t,e,n){n.r(e),e.default="// Modified so it doesn't really move. Very childish and easy fix.\n#ifdef GL_ES\nprecision ${maxShaderPrecision} float;\n#endif\n\nuniform vec2 viewportSize;\nuniform float time;\n\nuniform vec2 mouse;\n\nconst int   complexity      = 47;    // More points of color.\nconst float mouse_factor    = 56.0;  // Makes it more/less jumpy.\nconst float mouse_offset    = 0.0;   // Drives complexity in the amount of curls/cuves.  Zero is a single whirlpool.\nconst float fluid_speed     = 108.0;  // Drives speed, higher number will make it slower.\nconst float color_intensity = 0.8;\n  \n\nvoid main()\n{\n  vec2 p=(2.0*gl_FragCoord.xy-viewportSize)/max(viewportSize.x,viewportSize.y);\n  for(int i=1;i<complexity;i++)\n  {\n    vec2 newp=p + (time + mouse.x/1000.)*0.001;\n    newp.x+=0.6/float(i)*sin(float(i)*p.y+time/fluid_speed+0.3*float(i)) + 0.5; // + mouse.y/mouse_factor+mouse_offset;\n    newp.y+=0.6/float(i)*sin(float(i)*p.x+time/fluid_speed+0.3*float(i+10)) - 0.5; // - mouse.x/mouse_factor+mouse_offset;\n    p=newp;\n  }\n  vec3 col=vec3(color_intensity*sin(3.0*p.x)+color_intensity,color_intensity*sin(3.0*p.y)+color_intensity,color_intensity*sin(p.x+p.y)+color_intensity);\n  gl_FragColor=vec4(col / 2., 1.0);\n}\n"},function(t,e,n){n.r(e),e.default="#ifdef GL_ES\nprecision ${maxShaderPrecision} float;\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 viewportSize;\n\n//----------------------------------------------------------\n// metaballss.v3 by pailhead in 2014-Jun-2\n// original:  https://www.shadertoy.com/view/4sXXWM\n// small modifications & antialiasing by I.G.P. 2016-09-24\n// Nice variant http://glslsandbox.com/e#36845.2\n// This must be nice in 3d too...\n//----------------------------------------------------------\n\n#define COUNT 55\n\n#define SPEED 0.1\n\n#define SIZE 44.\n\n//----------------------------------------------------------\nfloat rn(float x)\n{\n    return  fract(sin(x*.4686)*3718.927);\n}\n\n//----------------------------------------------------------\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord ) \n{\n\tfloat ts = time * SPEED;   // time scaled\n\t\n\tvec3 COLOR_MASKS[16];  // blob colors\n\tCOLOR_MASKS[0] = vec3(1.00, 0.50, 0.00 );\n  \tCOLOR_MASKS[1] = vec3(0.53, 0.85, 0.25 );\n  \tCOLOR_MASKS[2] = vec3(1.00, 0.56, 0.15 );\n  \tCOLOR_MASKS[3] = vec3(1.00, 0.00, 0.30 );\n  \tCOLOR_MASKS[4] = vec3(0.05, 0.55, 0.30 );\n\tCOLOR_MASKS[5] = vec3(0.50, 1.00, 0.40 );\n  \tCOLOR_MASKS[6] = vec3(1.00, 0.15, 1.00 );\n  \tCOLOR_MASKS[7] = vec3(0.20, 0.30, 0.50 );\n  \tCOLOR_MASKS[8] = vec3(0.35, 1.00, 0.50 );\n  \tCOLOR_MASKS[9] = vec3(0.70, 0.60, 0.50 );\n  \tCOLOR_MASKS[10]= vec3(0.34, 1.00, 0.50 );\n  \tCOLOR_MASKS[11]= vec3(0.20, 0.50, 0.50 );\n  \tCOLOR_MASKS[12]= vec3(0.60, 0.10, 0.65 );\n  \tCOLOR_MASKS[13]= vec3(0.40, 0.40, 0.85 );\n  \tCOLOR_MASKS[14]= vec3(1.00, 0.30, 0.35 );\n  \tCOLOR_MASKS[15]= vec3(1.00, 0.00, 0.50 );\n\t\n\t//screen space\n\tfloat aspect = viewportSize.x / viewportSize.y;\n\tvec2 fragPN = (fragCoord / viewportSize.xy) * 2.0 - 1.0;   //-1 .. 1\n\tfragPN.x *= aspect;\n\tfloat vH = 10.0;   // camera disance - fov\n\tvec3 vD = normalize(vec3(-fragPN,vH));   // view dir\n\t//vec3 lD = normalize(vec3(cos(time),.750,sin(time)));   // light dir\t\n\t\n\tvec3 lD = normalize(vec3(mouse.xy-vec2(0.5), 0.5));   // light dir\t\n\t\n\tvec3 ld = normalize(vec3(.7, .750 ,2.));\n\t\n\tvec2 mbPos[COUNT];  // blob position\n\tvec3 nn = vec3(.0);\n\tvec3 cc = vec3(.0);\n\n\tfor(int i=0; i<COUNT; i++)\n\t{\n\t\tvec3 bC = COLOR_MASKS[i-(i/15)*15]; // blob color\n\t\tfloat rn1 = rn(float(i+47));\n\t\tfloat rn2 = rn(float(i-21));\n\t\tfloat rn3 = rn(float(i-52));\n\t\t\n\t\tif (i==0)   // set blob[0] to mouse position\n\t\t     mbPos[i] = 1.25*(mouse.xy*2. -1.) * vec2(aspect,1.);   // mouse position\n\t\telse mbPos[i] = vec2(sin(rn1*6.14+ts * rn2)*aspect,\n\t\t\t        cos(rn2*6.14+ts * rn3));  // calc position\n\t\t\n\t\tmbPos[i] = fragPN - mbPos[i]*.8;\n\t\tfloat rr = cos(rn3*4.28 +ts * rn1)*.1 +.5;\n\t\tmbPos[i] *= rr * (1000. / SIZE);   // blob coord\n\t\tfloat bL = length( mbPos[i] );     // blob length\n\t\tfloat bH = exp(-bL*2.15678);\n\t\tvec3 bN = vec3(mbPos[i] * .3 *bH, bH-.01);\n\t\tbC *= bH;\n\t\tnn += vec3(mbPos[i]*.5*bH,bH);\n\t\tcc += bC;\n\t}\n\t\n\tvec3 n = normalize( vec3(nn.x, nn.y, nn.z-0.1) );\n\tfloat aB = smoothstep(0.0, 0.5, n.z);  // antialiasing edge !!!\n\tcc /= nn.z;\n\tfloat ndl = 0.3 + 0.7 * dot(n,lD);   //wrap\n\tvec3 h = normalize(vD+lD);\n\tfloat ndh = 0.5 + 0.5 * dot(n,h);\n\tndh = pow(ndh,1.+2000.0 *(mouse.x))*(0.2 + .65*mouse.x);  // light reflection\n\tvec3 fc = cc*ndl +ndh;\n\t\n\tfloat frs = dot(n,vD);\n\tfrs = 1.0-clamp(frs,.0,1.);\n\tfrs = pow(frs,100.0);\n\tfrs = frs*.4 +.111;\n\tfc += frs;\n\tfragColor = vec4( fc*aB, 1.);\n}\n\nvoid main( void ) \n{\n\tmainImage( gl_FragColor, gl_FragCoord.xy );\n}"},function(t,e,n){n.r(e),e.default="#ifdef GL_ES\nprecision ${maxShaderPrecision} float;\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n\nuniform float time;\nuniform vec2 viewportSize;\nuniform vec2 mouse;\n\nconst  float EPS =0.0001;\n\nvec3 lightDir = normalize(vec3(-0.2,0.8,-0.4));\n\nfloat dist_func(vec3 pos, float size)\n{\n\t\n\treturn length(pos) -size;\n}\n\nvec3 onRap(vec3 p, float interval){\n\treturn mod(p,interval)-interval * 0.5;\n}\n\nfloat distScene(vec3 p){\n\treturn dist_func(onRap(p,0.3),0.1);\n\t}\n\nvec2 onRep(vec2 p , float interval)\n{\n\treturn mod(p,interval)-interval*0.5;\n}\n\nfloat barDist(vec2 p ,float interval, float width)\n{\n\treturn length(max(abs(onRep(p,interval)) - width,0.0));\n}\n\n\nfloat sceneDist1(vec3 p){\n\tfloat bar_x = barDist(p.yz,1.0,0.1);\n\tfloat bar_y = barDist(p.xz,1.0,0.1);\n\tfloat bar_z = barDist(p.xy,1.0,0.1);\n\treturn min(min(bar_x,bar_y),bar_z);\n}\n\n\nfloat tubeDist(vec2 p,float interval,float width){\n\treturn length(onRep(p,interval)) - width;\n}\nfloat sceneDist2(vec3 p){\n\tfloat tube_x = tubeDist(p.yz,0.1,0.02);\n\tfloat tube_y = tubeDist(p.xz,0.1,0.02);\n\tfloat tube_z = tubeDist(p.xy,0.1,0.02);\n\treturn min(min(tube_x,tube_y),tube_z);\n}\n\n\nfloat sceneDist0(vec3 p){\n\t\n\treturn min(-sceneDist1(p),sceneDist2(p));\n}\n\n\n\nvec3 getNormal(vec3 pos)\n{\n\tfloat ep = 0.0001;\n\treturn normalize(vec3(\n\t\t\n            sceneDist0(pos) - sceneDist0(vec3(pos.x - ep, pos.y, pos.z)),\n            sceneDist0(pos)- sceneDist0(vec3(pos.x, pos.y - ep, pos.z)),\n            sceneDist0(pos) - sceneDist0(vec3(pos.x, pos.y, pos.z - ep))\n        ));\n}\n\t\t\t\t\t\n\nvoid main( void ) {\n\n\tvec2 pos = ( gl_FragCoord.xy * 2.0 - viewportSize.xy ) / min(viewportSize.x,viewportSize.y);\n\n\tvec3 col = vec3(0.0);\n\tvec3 cameraPos = vec3(0.0,0.0 + (mouse.x / 10.),-5.0);\n\tvec3 cDir= vec3(0.0,0.0,-1.0);\n\tvec3 cUp = vec3(0.3,1.0,0.0);\n\tvec3 cSide = cross(cDir,cUp);\n\tfloat targetDepth = 1.0;\n\tvec3 ray = normalize(cSide * pos.x + cUp*pos.y + cDir * targetDepth);\n\tvec3 cur = cameraPos;\n\t\n\tfloat size = 0.2 ;\n\tfloat dist,depth = 0.0;\n\tvec3 origin = cur;\n\torigin.z += time*0.3;\n\t\n\tvec3 p = origin;\n\t\n\t\n\t\n\tfor(int i = 0;i < 64;i++)\n\t{\n\t\t\n\t\tdist = sceneDist0(p);\n\t\tdepth += dist;\n\t\tp=origin + depth * ray;\n\t\tif(abs(dist)<EPS)\n\t\t{\n\t\t\tvec3 normal = getNormal(p);\n\t\t\tfloat diff = dot(normal,lightDir);\n\t\t\tcol = vec3(diff) + vec3(0.9);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t}\n\t\n\t\n\n\tgl_FragColor = vec4( col.x*1.5,0.2,0.2, 1.0 );\n\n}"},function(t,e,n){n.r(e),e.default="#ifdef GL_ES\nprecision ${maxShaderPrecision} float;\n#endif\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 viewportSize; \n#define iTime time\n#define iResolution.xy viewportSize\n//afl_ext 2017 \n\n// lower this if your GPU cries for mercy (set to 0 to remove clouds!)\n#define CLOUDS_STEPS 147\n#define ENABLE_SSS 1\n\n\n\n#define DRAG_MULT 0.048\n#define ITERATIONS_RAYMARCH 13\n#define ITERATIONS_NORMAL 48\n#define WATER_DEPTH 2.1\n\n// returns vec2 with wave height in X and its derivative in Y\nvec2 wavedx(vec2 position, vec2 direction, float speed, float frequency, float timeshift) {\n\tdirection = normalize(direction);\n    float x = dot(direction, position) * frequency + timeshift * speed;\n    float wave = exp(sin(x) - 1.0);\n    float dx = wave * cos(x);\n    return vec2(wave, -dx);\n}\nfloat supernoise3dX(vec3 p);\nfloat getwaveshi(vec2 position, int iterations){\n    position *= 0.1;\nposition += time * 0.1;\n\tfloat iter = 0.0;\n    float phase = 6.0;\n    float speed = 2.0;\n    float weight = 1.0;\n    float w = 0.0;\n    float ws = 0.0;\n    for(int i=0;i<48;i++){\n        vec2 p = vec2(sin(iter), cos(iter));\n        vec2 res = wavedx(position, p, speed, phase, iTime);\n        position += normalize(p) * res.y * weight * DRAG_MULT;\n        w += res.x * weight;\n        iter += 12.0;\n        ws += weight;\n        weight = mix(weight, 0.0, 0.2);\n        phase *= 1.18;\n        speed *= 1.07;\n    }\n    return 2.0 * (w / ws) * supernoise3dX(0.3 *vec3(position.x, position.y, 0.0) + time * 0.1);\n}\nfloat getwaveslo(vec2 position, int iterations){\n    position *= 0.1;\nposition += time * 0.1;\n\tfloat iter = 0.0;\n    float phase = 6.0;\n    float speed = 2.0;\n    float weight = 1.0;\n    float w = 0.0;\n    float ws = 0.0;\n    for(int i=0;i<13;i++){\n        vec2 p = vec2(sin(iter), cos(iter));\n        vec2 res = wavedx(position, p, speed, phase, iTime);\n        position += normalize(p) * res.y * weight * DRAG_MULT;\n        w += res.x * weight;\n        iter += 12.0;\n        ws += weight;\n        weight = mix(weight, 0.0, 0.2);\n        phase *= 1.18;\n        speed *= 1.07;\n    }\n    return 2.0 * (w / ws) * supernoise3dX(0.3 *vec3(position.x, position.y, 0.0) + time * 0.1);\n}\n\nfloat raymarchwater(vec3 camera, vec3 start, vec3 end, float depth){\n    vec3 pos = start;\n    float h = 0.0;\n    float hupper = depth;\n    float hlower = 0.0;\n    vec2 zer = vec2(0.0);\n    vec3 dir = normalize(end - start);\n    for(int i=0;i<318;i++){\n        h = getwaveslo(pos.xz, ITERATIONS_RAYMARCH) * depth - depth;\n        if(h + 0.01 > pos.y) {\n            return distance(pos, camera);\n        }\n        pos += dir * (pos.y - h);\n    }\n    return -1.0;\n}\n\nfloat H = 0.0;\nvec3 normal(vec2 pos, float e, float depth){\n    vec2 ex = vec2(e, 0);\n    H = getwaveshi(pos.xy, ITERATIONS_NORMAL) * depth;\n    vec3 a = vec3(pos.x, H, pos.y);\n    return normalize(cross(normalize(a-vec3(pos.x - e, getwaveshi(pos.xy - ex.xy, ITERATIONS_NORMAL) * depth, pos.y)), \n                           normalize(a-vec3(pos.x, getwaveshi(pos.xy + ex.yx, ITERATIONS_NORMAL) * depth, pos.y + e))));\n}\nmat3 rotmat(vec3 axis, float angle)\n{\n\taxis = normalize(axis);\n\tfloat s = sin(angle);\n\tfloat c = cos(angle);\n\tfloat oc = 1.0 - c;\n\t\n\treturn mat3(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s, \n\toc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s, \n\toc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c);\n}\nvec3 getRay(vec2 uv){\n   uv = (uv * 2.0 - 1.0)* vec2(viewportSize.x / viewportSize.y, 1.0);\n\tvec3 proj = normalize(vec3(uv.x, uv.y, 1.5));\t\n    if(viewportSize.y < 400.0) return proj;\n\tvec3 ray = rotmat(vec3(0.0, -1.0, 0.0), 3.0 \n\t\t\t  * (mouse.x * 2.0 - 1.0)) \n\t\t* rotmat(vec3(1.0, 0.0, 0.0), 1.5 \n\t\t\t * (mouse.y * 2.0 - 1.0)) * proj;\n    return ray;\n}\n\nfloat rand2sTime(vec2 co){\n    co *= time;\n    return fract(sin(dot(co.xy,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat intersectPlane(vec3 origin, vec3 direction, vec3 point, vec3 normal)\n{ \n    return clamp(dot(point - origin, normal) / dot(direction, normal), -1.0, 9991999.0); \n}\n#define PI 3.141592\n#define iSteps 16\n#define jSteps 8\n\nvec2 rsi(vec3 r0, vec3 rd, float sr) {\n    // ray-sphere intersection that assumes\n    // the sphere is centered at the origin.\n    // No intersection when result.x > result.y\n    float a = dot(rd, rd);\n    float b = 2.0 * dot(rd, r0);\n    float c = dot(r0, r0) - (sr * sr);\n    float d = (b*b) - 4.0*a*c;\n    if (d < 0.0) return vec2(1e5,-1e5);\n    return vec2(\n        (-b - sqrt(d))/(2.0*a),\n        (-b + sqrt(d))/(2.0*a)\n    );\n}\n\nfloat oct(float p){\n    return fract(4768.1232345456 * sin(p));\n}\nfloat oct(vec2 p){\n    return fract(4768.1232345456 * sin((p.x+p.y*43.0)));\n}\nfloat oct(vec3 p){\n    return fract(4768.1232345456 * sin((p.x+p.y*43.0+p.z*137.0)));\n}\nfloat oct(vec4 p){\n    return fract(4768.1232345456 * sin((p.x+p.y*43.0+p.z*137.0+p.w*2666.0)));\n}\n\nfloat achnoise(float x){\n    float p = floor(x);\n    float fr = fract(x);\n    float L = p;\n    float R = p + 1.0;\n\n    float Lo = oct(L);\n    float Ro = oct(R);\n\n    return mix(Lo, Ro, fr);\n}\n\nfloat achnoise(vec2 x){\n    vec2 p = floor(x);\n    vec2 fr = fract(x);\n    vec2 LB = p;\n    vec2 LT = p + vec2(0.0, 1.0);\n    vec2 RB = p + vec2(1.0, 0.0);\n    vec2 RT = p + vec2(1.0, 1.0);\n\n    float LBo = oct(LB);\n    float RBo = oct(RB);\n    float LTo = oct(LT);\n    float RTo = oct(RT);\n\n    float noise1d1 = mix(LBo, RBo, fr.x);\n    float noise1d2 = mix(LTo, RTo, fr.x);\n\n    float noise2d = mix(noise1d1, noise1d2, fr.y);\n\n    return noise2d;\n}\nfloat achnoise(vec3 x){\n    vec3 p = floor(x);\n    vec3 fr = fract(x);\n    vec3 LBZ = p + vec3(0.0, 0.0, 0.0);\n    vec3 LTZ = p + vec3(0.0, 1.0, 0.0);\n    vec3 RBZ = p + vec3(1.0, 0.0, 0.0);\n    vec3 RTZ = p + vec3(1.0, 1.0, 0.0);\n\n    vec3 LBF = p + vec3(0.0, 0.0, 1.0);\n    vec3 LTF = p + vec3(0.0, 1.0, 1.0);\n    vec3 RBF = p + vec3(1.0, 0.0, 1.0);\n    vec3 RTF = p + vec3(1.0, 1.0, 1.0);\n\n    float l0candidate1 = oct(LBZ);\n    float l0candidate2 = oct(RBZ);\n    float l0candidate3 = oct(LTZ);\n    float l0candidate4 = oct(RTZ);\n\n    float l0candidate5 = oct(LBF);\n    float l0candidate6 = oct(RBF);\n    float l0candidate7 = oct(LTF);\n    float l0candidate8 = oct(RTF);\n\n    float l1candidate1 = mix(l0candidate1, l0candidate2, fr[0]);\n    float l1candidate2 = mix(l0candidate3, l0candidate4, fr[0]);\n    float l1candidate3 = mix(l0candidate5, l0candidate6, fr[0]);\n    float l1candidate4 = mix(l0candidate7, l0candidate8, fr[0]);\n\n\n    float l2candidate1 = mix(l1candidate1, l1candidate2, fr[1]);\n    float l2candidate2 = mix(l1candidate3, l1candidate4, fr[1]);\n\n\n    float l3candidate1 = mix(l2candidate1, l2candidate2, fr[2]);\n\n    return l3candidate1;\n}\n\n\nfloat achnoise(vec4 x){\n    vec4 p = floor(x);\n    vec4 fr = fract(x);\n    vec4 LBZU = p + vec4(0.0, 0.0, 0.0, 0.0);\n    vec4 LTZU = p + vec4(0.0, 1.0, 0.0, 0.0);\n    vec4 RBZU = p + vec4(1.0, 0.0, 0.0, 0.0);\n    vec4 RTZU = p + vec4(1.0, 1.0, 0.0, 0.0);\n\n    vec4 LBFU = p + vec4(0.0, 0.0, 1.0, 0.0);\n    vec4 LTFU = p + vec4(0.0, 1.0, 1.0, 0.0);\n    vec4 RBFU = p + vec4(1.0, 0.0, 1.0, 0.0);\n    vec4 RTFU = p + vec4(1.0, 1.0, 1.0, 0.0);\n\n    vec4 LBZD = p + vec4(0.0, 0.0, 0.0, 1.0);\n    vec4 LTZD = p + vec4(0.0, 1.0, 0.0, 1.0);\n    vec4 RBZD = p + vec4(1.0, 0.0, 0.0, 1.0);\n    vec4 RTZD = p + vec4(1.0, 1.0, 0.0, 1.0);\n\n    vec4 LBFD = p + vec4(0.0, 0.0, 1.0, 1.0);\n    vec4 LTFD = p + vec4(0.0, 1.0, 1.0, 1.0);\n    vec4 RBFD = p + vec4(1.0, 0.0, 1.0, 1.0);\n    vec4 RTFD = p + vec4(1.0, 1.0, 1.0, 1.0);\n\n    float l0candidate1  = oct(LBZU);\n    float l0candidate2  = oct(RBZU);\n    float l0candidate3  = oct(LTZU);\n    float l0candidate4  = oct(RTZU);\n\n    float l0candidate5  = oct(LBFU);\n    float l0candidate6  = oct(RBFU);\n    float l0candidate7  = oct(LTFU);\n    float l0candidate8  = oct(RTFU);\n\n    float l0candidate9  = oct(LBZD);\n    float l0candidate10 = oct(RBZD);\n    float l0candidate11 = oct(LTZD);\n    float l0candidate12 = oct(RTZD);\n\n    float l0candidate13 = oct(LBFD);\n    float l0candidate14 = oct(RBFD);\n    float l0candidate15 = oct(LTFD);\n    float l0candidate16 = oct(RTFD);\n\n    float l1candidate1 = mix(l0candidate1, l0candidate2, fr[0]);\n    float l1candidate2 = mix(l0candidate3, l0candidate4, fr[0]);\n    float l1candidate3 = mix(l0candidate5, l0candidate6, fr[0]);\n    float l1candidate4 = mix(l0candidate7, l0candidate8, fr[0]);\n    float l1candidate5 = mix(l0candidate9, l0candidate10, fr[0]);\n    float l1candidate6 = mix(l0candidate11, l0candidate12, fr[0]);\n    float l1candidate7 = mix(l0candidate13, l0candidate14, fr[0]);\n    float l1candidate8 = mix(l0candidate15, l0candidate16, fr[0]);\n\n\n    float l2candidate1 = mix(l1candidate1, l1candidate2, fr[1]);\n    float l2candidate2 = mix(l1candidate3, l1candidate4, fr[1]);\n    float l2candidate3 = mix(l1candidate5, l1candidate6, fr[1]);\n    float l2candidate4 = mix(l1candidate7, l1candidate8, fr[1]);\n\n\n    float l3candidate1 = mix(l2candidate1, l2candidate2, fr[2]);\n    float l3candidate2 = mix(l2candidate3, l2candidate4, fr[2]);\n\n    float l4candidate1 = mix(l3candidate1, l3candidate2, fr[3]);\n\n    return l4candidate1;\n}\n\n#define noise1d(a) achnoise(a)\n#define noise2d(a) achnoise(a)\n#define noise3d(a) achnoise(a)\n#define noise4d(a) achnoise(a)\nfloat supernoise3d(vec3 p){\n\n\tfloat a =  noise3d(p);\n\tfloat b =  noise3d(p + 10.5);\n\treturn (a + b) * 0.5;\n}\nfloat supernoise3dX(vec3 p){\n\n\tfloat a =  noise3d(p);\n\tfloat b =  noise3d(p + 10.5);\n\treturn (a * b);\n}\nfloat fbmHI(vec3 p){\n   // p *= 0.1;\n    p *= 0.0000169;\n    p.x *= 0.489;\n\tp += time * 0.02;\n\t//p += getWind(p * 0.2) * 6.0;\n\tfloat a = 0.0;\n    float w = 1.0;\n    float wc = 0.0;\n\tfor(int i=0;i<3;i++){\n        //p += noise(vec3(a));\n\t\ta += clamp(2.0 * abs(0.5 - (noise3d(p))) * w, 0.0, 1.0);\n\t\twc += w;\n        w *= 0.5;\n\t\tp = p * 3.0;\n\t}\n\treturn a / wc;// + noise(p * 100.0) * 11;\n}\n#define MieScattCoeff 2.0\nvec3 wind(vec3 p){\n    return vec3(\n        supernoise3d(p),\n        supernoise3d(p.yzx),\n        supernoise3d(-p.xzy)\n        ) * 2.0 - 1.0;\n}\nstruct Ray { vec3 o; vec3 d; };\nstruct Sphere { vec3 pos; float rad; };\n\nfloat planetradius = 6378000.1;\nfloat minhit = 0.0;\nfloat maxhit = 0.0;\nfloat rsi2(in Ray ray, in Sphere sphere)\n{\n    vec3 oc = ray.o - sphere.pos;\n    float b = 2.0 * dot(ray.d, oc);\n    float c = dot(oc, oc) - sphere.rad*sphere.rad;\n    float disc = b * b - 4.0 * c;\n    vec2 ex = vec2(-b - sqrt(disc), -b + sqrt(disc))/2.0;\n    minhit = min(ex.x, ex.y);\n    maxhit = max(ex.x, ex.y);\n    return mix(ex.y, ex.x, step(0.0, ex.x));\n}\nvec3 atmosphere(vec3 r, vec3 r0, vec3 pSun, float iSun, float rPlanet, float rAtmos, vec3 kRlh, float kMie, float shRlh, float shMie, float g) {\n    // Normalize the sun and view directions.\n    pSun = normalize(pSun);\n    r = normalize(r);\n\n    // Calculate the step size of the primary ray.\n    vec2 p = rsi(r0, r, rAtmos);\n    if (p.x > p.y) return vec3(0,0,0);\n    p.y = min(p.y, rsi(r0, r, rPlanet).x);\n    float iStepSize = (p.y - p.x) / float(iSteps);\n\tfloat rs = rsi2(Ray(r0, r), Sphere(vec3(0), rAtmos));\n\tvec3 px = r0 + r * rs;\nshMie *= ( (pow(fbmHI(px  ) * (supernoise3dX(px* 0.00000669 + time * 0.001)*0.5 + 0.5) * 1.3, 3.0) * 0.8 + 0.5));\n    \n    // Initialize the primary ray time.\n    float iTime = 0.0;\n\n    // Initialize accumulators for Rayleigh and Mie scattering.\n    vec3 totalRlh = vec3(0,0,0);\n    vec3 totalMie = vec3(0,0,0);\n\n    // Initialize optical depth accumulators for the primary ray.\n    float iOdRlh = 0.0;\n    float iOdMie = 0.0;\n\n    // Calculate the Rayleigh and Mie phases.\n    float mu = dot(r, pSun);\n    float mumu = mu * mu;\n    float gg = g * g;\n    float pRlh = 3.0 / (16.0 * PI) * (1.0 + mumu);\n    float pMie = 3.0 / (8.0 * PI) * ((1.0 - gg) * (mumu + 1.0)) / (pow(1.0 + gg - 2.0 * mu * g, 1.5) * (2.0 + gg));\n\n    // Sample the primary ray.\n    for (int i = 0; i < iSteps; i++) {\n\n        // Calculate the primary ray sample position.\n        vec3 iPos = r0 + r * (iTime + iStepSize * 0.5);\n\n        // Calculate the height of the sample.\n        float iHeight = length(iPos) - rPlanet;\n\n        // Calculate the optical depth of the Rayleigh and Mie scattering for this step.\n        float odStepRlh = exp(-iHeight / shRlh) * iStepSize;\n        float odStepMie = exp(-iHeight / shMie) * iStepSize;\n\n        // Accumulate optical depth.\n        iOdRlh += odStepRlh;\n        iOdMie += odStepMie;\n\n        // Calculate the step size of the secondary ray.\n        float jStepSize = rsi(iPos, pSun, rAtmos).y / float(jSteps);\n\n        // Initialize the secondary ray time.\n        float jTime = 0.0;\n\n        // Initialize optical depth accumulators for the secondary ray.\n        float jOdRlh = 0.0;\n        float jOdMie = 0.0;\n\n        // Sample the secondary ray.\n        for (int j = 0; j < jSteps; j++) {\n\n            // Calculate the secondary ray sample position.\n            vec3 jPos = iPos + pSun * (jTime + jStepSize * 0.5);\n\n            // Calculate the height of the sample.\n            float jHeight = length(jPos) - rPlanet;\n\n            // Accumulate the optical depth.\n            jOdRlh += exp(-jHeight / shRlh) * jStepSize;\n            jOdMie += exp(-jHeight / shMie) * jStepSize;\n\n            // Increment the secondary ray time.\n            jTime += jStepSize;\n        }\n\n        // Calculate attenuation.\n        vec3 attn = exp(-(kMie * (iOdMie + jOdMie) + kRlh * (iOdRlh + jOdRlh)));\n\n        // Accumulate scattering.\n        totalRlh += odStepRlh * attn;\n        totalMie += odStepMie * attn;\n\n        // Increment the primary ray time.\n        iTime += iStepSize;\n\n    }\n\n    // Calculate and return the final color.\n    return iSun * (pRlh * kRlh * totalRlh + pMie * kMie * totalMie);\n}\nvec3 getatm(vec3 ray){\n\tvec3 sd = rotmat(vec3(1.0, 1.0, 0.0), time * 0.25) * normalize(vec3(0.0, 1.0, 0.0)); \n    vec3 color = atmosphere(\n        ray,           // normalized ray direction\n        vec3(0,6372e3,0),               // ray origin\n        sd,                        // position of the sun\n        22.0,                           // intensity of the sun\n        6371e3,                         // radius of the planet in meters\n        6471e3,                         // radius of the atmosphere in meters\n        vec3(3.5e-6, 13.0e-6, 32.4e-6), // Rayleigh scattering coefficient\n        21e-6,                          // Mie scattering coefficient\n        16e3,                            // Rayleigh scale height\n        1.2e3 * MieScattCoeff,                          // Mie scale height\n        0.758                           // Mie preferred scattering direction\n    );\t\t\n \treturn color;\n    \n}\n\nfloat sun(vec3 ray){\n \tvec3 sd = rotmat(vec3(1.0, 1.0, 0.0), time * 0.25) * normalize(vec3(0.0, 1.0, 0.0)); \n\n    return pow(max(0.0, dot(ray, sd)), 1228.0) * 110.0;\n}\nfloat smart_inverse_dot(float dt, float coeff){\n    return 1.0 - (1.0 / (1.0 + dt * coeff));\n}\n#define VECTOR_UP vec3(0.0,1.0,0.0)\nvec3 getSunColorDirectly(float roughness){\n    vec3 sunBase = vec3(15.0);\n\tvec3 sd = rotmat(vec3(1.0, 1.0, 0.0), time * 0.25) * normalize(vec3(0.0, 1.0, 0.0)); \n\n    float dt = max(0.0, (dot(sd, VECTOR_UP)));\n    float dtx = smoothstep(-0.0, 0.1, dt);\n    float dt2 = 0.9 + 0.1 * (1.0 - dt);\n    float st = max(0.0, 1.0 - smart_inverse_dot(dt, 11.0));\n    vec3 supersundir = max(vec3(0.0),   vec3(1.0) - st * 4.0 * pow(vec3(50.0/255.0, 111.0/255.0, 153.0/255.0), vec3(2.4)));\n//    supersundir /= length(supersundir) * 1.0 + 1.0;\n    return supersundir * 4.0 ;\n    //return mix(supersundir * 1.0, sunBase, st);\n    //return  max(vec3(0.3, 0.3, 0.0), (  sunBase - vec3(5.5, 18.0, 20.4) *  pow(1.0 - dt, 8.0)));\n}\n#define xsupernoise3d(a) abs(0.5 - noise3d(a))*2.0\n#define xsupernoise3dx(a) abs(0.5 - supernoise3d(a))*2.0\n\nvec3 aces_tonemap(vec3 color){\t\n\tmat3 m1 = mat3(\n        0.59719, 0.07600, 0.02840,\n        0.35458, 0.90834, 0.13383,\n        0.04823, 0.01566, 0.83777\n\t);\n\tmat3 m2 = mat3(\n        1.60475, -0.10208, -0.00327,\n        -0.53108,  1.10813, -0.07276,\n        -0.07367, -0.00605,  1.07602\n\t);\n\tvec3 v = m1 * color;    \n\tvec3 a = v * (v + 0.0245786) - 0.000090537;\n\tvec3 b = v * (0.983729 * v + 0.4329510) + 0.238081;\n\treturn pow(clamp(m2 * (a / b), 0.0, 1.0), vec3(1.0 / 2.2));\t\n}\nfloat flare(vec3 p, vec3 r){\n\treturn supernoise3dX(10.0 * normalize(p - r))  / pow(distance(p, r) * 10.0, 5.0);\t\n}\nvec3 mainImage( vec2 uv )\n{\n \tvec3 sd = rotmat(vec3(1.0, 1.0, 0.0), time * 0.25) * normalize(vec3(0.0, 1.0, 0.0)); \n\tfloat waterdepth = 2.1;\n\tvec3 wfloor = vec3(0.0, -waterdepth, 0.0);\n\tvec3 wceil = vec3(0.0, 0.0, 0.0);\n\tvec3 orig = vec3(0.0, 2.0, 0.0);\n\tvec3 ray = getRay(uv);\n\t\n\tfloat spherehit = rsi2(Ray(orig, ray), Sphere(vec3(-2.0, 3.0, 0.0), 1.0));\n\tfloat fff = 1.0;\n\t\n\t\n\tfloat hihit = intersectPlane(orig, ray, wceil, vec3(0.0, 1.0, 0.0));\n    \n    if(ray.y >= -0.01){\n        vec3 rray = vec3(ray.x, abs(ray.y), ray.z);\n        vec3 atm = getatm(rray);\n        vec3 C = atm * 2.0 + sun(rray) + flare(sd, ray); \n\t    C *= fff * 0.5;\n        //tonemapping\n        C = aces_tonemap(C);\n        return C;\n    }\n    vec3 fullcolor = vec3(0.0);\n    vec2 pixel = 1.0 / viewportSize.xy;\n\t\tray = getRay(uv);\n  \n\n        fff = 1.0;\n\n\n        hihit = intersectPlane(orig, ray, wceil, vec3(0.0, 1.0, 0.0));\n\n        float lohit = intersectPlane(orig, ray, wfloor, vec3(0.0, 1.0, 0.0));\n        vec3 hipos = orig + ray * hihit;\n        vec3 lopos = orig + ray * lohit;\n        float dist = raymarchwater(orig, hipos, lopos, waterdepth);\n        vec3 pos = orig + ray * dist;\n\n        vec3 N = normal(pos.xz, 0.01, waterdepth);\n        N = mix(N, VECTOR_UP, 0.8 * min(1.0, sqrt(dist*0.01) * 1.1));\n        vec2 velocity = N.xz * (1.0 - N.y);\n        vec3 R = normalize(reflect(ray, N));\n        vec3 RF = normalize(refract(ray, N, 0.66)); \n        float fresnel = (0.04 + (1.0-0.04)*(pow(1.0 - max(0.0, dot(-N, ray)), 5.0)));\n\n        R.y = abs(R.y);\n        vec3 reflection = getatm(R);\n\n        vec3 C = fresnel * (reflection + sun(R)) * 2.0;\n\n        float superscat = pow(max(0.0, dot(RF, sd)), 16.0) ;\n    #if ENABLE_SSS\n        C += vec3(0.5,0.9,0.8) * superscat * getSunColorDirectly(0.0) * 81.0* (1.0 - 1.0 / (1.0 + 5.0 * max(0.0, dot(sd, VECTOR_UP))));\n        vec3 waterSSScolor =  vec3(0.01, 0.33, 0.55)*  0.171 ;\n        C += waterSSScolor * getSunColorDirectly(0.0) * (0.3 + getwaveslo(pos.xz, ITERATIONS_RAYMARCH)) * waterdepth * 0.3 * max(0.0, dot(sd, VECTOR_UP));\n        //tonemapping\n        #endif\n            C *= fff * 0.5;\n        C = aces_tonemap(C);\n        fullcolor += C;\n    \n\treturn fullcolor;\n}\n\nvoid main( void ) {\n\n\tvec2 position = ( gl_FragCoord.xy / viewportSize.xy ) ;\n\tgl_FragColor = vec4( mainImage(position), 1.0 );\n\n}"},function(t,e,n){n.r(e),e.default="#ifdef GL_ES\nprecision ${maxShaderPrecision} float;\n#endif\n\n#extension GL_OES_standard_derivatives : enable\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 viewportSize;\n\n\n\n\n#define S(x, y, z) smoothstep(x, y, z)\n#define B(a, b, edge, t) S(a-edge, a+edge, t)*S(b+edge, b-edge, t)\n#define sat(x) clamp(x,0.,1.)\n\n#define streetLightCol vec3(1., .7, .3)\n#define headLightCol vec3(.8, .8, 1.)\n#define tailLightCol vec3(1., .1, .1)\n\n#define HIGH_QUALITY\n#define CAM_SHAKE 1.\n#define LANE_BIAS .5\n#define RAIN\n//#define DROP_DEBUG\n\nvec3 ro, rd;\n\nfloat N(float t) {\n\treturn fract(sin(t*10234.324)*123423.23512);\n}\nvec3 N31(float p) {\n    //  3 out, 1 in... DAVE HOSKINS\n   vec3 p3 = fract(vec3(p) * vec3(.1031,.11369,.13787));\n   p3 += dot(p3, p3.yzx + 19.19);\n   return fract(vec3((p3.x + p3.y)*p3.z, (p3.x+p3.z)*p3.y, (p3.y+p3.z)*p3.x));\n}\nfloat N2(vec2 p)\n{\t// Dave Hoskins - https://www.shadertoy.com/view/4djSRW\n\tvec3 p3  = fract(vec3(p.xyx) * vec3(443.897, 441.423, 437.195));\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n}\n\n\nfloat DistLine(vec3 ro, vec3 rd, vec3 p) {\n\treturn length(cross(p-ro, rd));\n}\n \nvec3 ClosestPoint(vec3 ro, vec3 rd, vec3 p) {\n    // returns the closest point on ray r to point p\n    return ro + max(0., dot(p-ro, rd))*rd;\n}\n\nfloat Remap(float a, float b, float c, float d, float t) {\n\treturn ((t-a)/(b-a))*(d-c)+c;\n}\n\nfloat BokehMask(vec3 ro, vec3 rd, vec3 p, float size, float blur) {\n\tfloat d = DistLine(ro, rd, p);\n    float m = S(size, size*(1.-blur), d);\n    \n    #ifdef HIGH_QUALITY\n    m *= mix(.7, 1., S(.8*size, size, d));\n    #endif\n    \n    return m;\n}\n\n\n\nfloat SawTooth(float t) {\n    return cos(t+cos(t))+sin(2.*t)*.2+sin(4.*t)*.02;\n}\n\nfloat DeltaSawTooth(float t) {\n    return 0.4*cos(2.*t)+0.08*cos(4.*t) - (1.-sin(t))*sin(t+cos(t));\n}  \n\nvec2 GetDrops(vec2 uv, float seed, float m) {\n    \n    float t = time+m*30.;\n    vec2 o = vec2(0.);\n    \n    #ifndef DROP_DEBUG\n    uv.y += t*.05;\n    #endif\n    \n    uv *= vec2(10., 2.5)*2.;\n    vec2 id = floor(uv);\n    vec3 n = N31(id.x + (id.y+seed)*546.3524);\n    vec2 bd = fract(uv);\n    \n    vec2 uv2 = bd;\n    \n    bd -= .5;\n    \n    bd.y*=4.;\n    \n    bd.x += (n.x-.5)*.6;\n    \n    t += n.z * 6.28;\n    float slide = SawTooth(t);\n    \n    float ts = 1.5;\n    vec2 trailPos = vec2(bd.x*ts, (fract(bd.y*ts*2.-t*2.)-.5)*.5);\n    \n    bd.y += slide*2.;\t\t\t\t\t\t\t\t// make drops slide down\n    \n    #ifdef HIGH_QUALITY\n    float dropShape = bd.x*bd.x;\n    dropShape *= DeltaSawTooth(t);\n    bd.y += dropShape;\t\t\t\t\t\t\t\t// change shape of drop when it is falling\n    #endif\n    \n    float d = length(bd);\t\t\t\t\t\t\t// distance to main drop\n    \n    float trailMask = S(-.2, .2, bd.y);\t\t\t\t// mask out drops that are below the main\n    trailMask *= bd.y;\t\t\t\t\t\t\t\t// fade dropsize\n    float td = length(trailPos*max(.5, trailMask));\t// distance to trail drops\n    \n    float mainDrop = S(.2, .1, d);\n    float dropTrail = S(.1, .02, td);\n    \n    dropTrail *= trailMask;\n    o = mix(bd*mainDrop, trailPos, dropTrail);\t\t// mix main drop and drop trail\n    \n    #ifdef DROP_DEBUG\n    if(uv2.x<.02 || uv2.y<.01) o = vec2(1.);\n    #endif\n    \n    return o;\n}\n\nvoid CameraSetup(vec2 uv, vec3 pos, vec3 lookat, float zoom, float m) {\n\tro = pos;\n    vec3 f = normalize(lookat-ro);\n    vec3 r = cross(vec3(0., 1., 0.), f);\n    vec3 u = cross(f, r);\n    float t = time;\n    \n    vec2 offs = vec2(0.);\n    #ifdef RAIN\n    vec2 dropUv = uv; \n    \n    #ifdef HIGH_QUALITY\n    float x = (sin(t*.1)*.5+.5)*.5;\n    x = -x*x;\n    float s = sin(x);\n    float c = cos(x);\n    \n    mat2 rot = mat2(c, -s, s, c);\n   \n    #ifndef DROP_DEBUG\n    dropUv = uv*rot;\n    dropUv.x += -sin(t*.1)*.5;\n    #endif\n    #endif\n    \n    offs = GetDrops(dropUv, 1., m);\n    \n    #ifndef DROP_DEBUG\n    offs += GetDrops(dropUv*1.4, 10., m);\n    #ifdef HIGH_QUALITY\n    offs += GetDrops(dropUv*2.4, 25., m);\n    //offs += GetDrops(dropUv*3.4, 11.);\n    //offs += GetDrops(dropUv*3., 2.);\n    #endif\n    \n    float ripple = sin(t+uv.y*3.1415*30.+uv.x*124.)*.5+.5;\n    ripple *= .005;\n    offs += vec2(ripple*ripple, ripple);\n    #endif\n    #endif\n    vec3 center = ro + f*zoom;\n    vec3 i = center + (uv.x-offs.x)*r + (uv.y-offs.y)*u;\n    \n    rd = normalize(i-ro);\n}\n\nvec3 HeadLights(float i, float t) {\n    float z = fract(-t*2.+i);\n    vec3 p = vec3(-.3, .1, z*40.);\n    float d = length(p-ro);\n    \n    float size = mix(.03, .05, S(.02, .07, z))*d;\n    float m = 0.;\n    float blur = .1;\n    m += BokehMask(ro, rd, p-vec3(.08, 0., 0.), size, blur);\n    m += BokehMask(ro, rd, p+vec3(.08, 0., 0.), size, blur);\n    \n    #ifdef HIGH_QUALITY\n    m += BokehMask(ro, rd, p+vec3(.1, 0., 0.), size, blur);\n    m += BokehMask(ro, rd, p-vec3(.1, 0., 0.), size, blur);\n    #endif\n    \n    float distFade = max(.01, pow(1.-z, 9.));\n    \n    blur = .8;\n    size *= 2.5;\n    float r = 0.;\n    r += BokehMask(ro, rd, p+vec3(-.09, -.2, 0.), size, blur);\n    r += BokehMask(ro, rd, p+vec3(.09, -.2, 0.), size, blur);\n    r *= distFade*distFade;\n    \n    return headLightCol*(m+r)*distFade;\n}\n\n\nvec3 TailLights(float i, float t) {\n    t = t*1.5+i;\n    \n    float id = floor(t)+i;\n    vec3 n = N31(id);\n    \n    float laneId = S(LANE_BIAS, LANE_BIAS+.01, n.y);\n    \n    float ft = fract(t);\n    \n    float z = 3.-ft*3.;\t\t\t\t\t\t// distance ahead\n    \n    laneId *= S(.2, 1.5, z);\t\t\t\t// get out of the way!\n    float lane = mix(.6, .3, laneId);\n    vec3 p = vec3(lane, .1, z);\n    float d = length(p-ro);\n    \n    float size = .05*d;\n    float blur = .1;\n    float m = BokehMask(ro, rd, p-vec3(.08, 0., 0.), size, blur) +\n    \t\t\tBokehMask(ro, rd, p+vec3(.08, 0., 0.), size, blur);\n    \n    #ifdef HIGH_QUALITY\n    float bs = n.z*3.;\t\t\t\t\t\t// start braking at random distance\t\t\n    float brake = S(bs, bs+.01, z);\n    brake *= S(bs+.01, bs, z-.5*n.y);\t\t// n.y = random brake duration\n    \n    m += (BokehMask(ro, rd, p+vec3(.1, 0., 0.), size, blur) +\n    \tBokehMask(ro, rd, p-vec3(.1, 0., 0.), size, blur))*brake;\n    #endif\n    \n    float refSize = size*2.5;\n    m += BokehMask(ro, rd, p+vec3(-.09, -.2, 0.), refSize, .8);\n    m += BokehMask(ro, rd, p+vec3(.09, -.2, 0.), refSize, .8);\n    vec3 col = tailLightCol*m*ft; \n    \n    float b = BokehMask(ro, rd, p+vec3(.12, 0., 0.), size, blur);\n    b += BokehMask(ro, rd, p+vec3(.12, -.2, 0.), refSize, .8)*.2;\n    \n    vec3 blinker = vec3(1., .7, .2);\n    blinker *= S(1.5, 1.4, z)*S(.2, .3, z);\n    blinker *= sat(sin(t*200.)*100.);\n    blinker *= laneId;\n    col += blinker*b;\n    \n    return col;\n}\n\nvec3 StreetLights(float i, float t) {\n\t float side = sign(rd.x);\n    float offset = max(side, 0.)*(1./16.);\n    float z = fract(i-t+offset); \n    vec3 p = vec3(2.*side, 2., z*60.);\n    float d = length(p-ro);\n\tfloat blur = .1;\n    vec3 rp = ClosestPoint(ro, rd, p);\n    float distFade = Remap(1., .7, .1, 1.5, 1.-pow(1.-z,6.));\n    distFade *= (1.-z);\n    float m = BokehMask(ro, rd, p, .05*d, blur)*distFade;\n    \n    return m*streetLightCol;\n}\n\nvec3 EnvironmentLights(float i, float t) {\n\tfloat n = N(i+floor(t));\n    \n    float side = sign(rd.x);\n    float offset = max(side, 0.)*(1./16.);\n    float z = fract(i-t+offset+fract(n*234.));\n    float n2 = fract(n*100.);\n    vec3 p = vec3((3.+n)*side, n2*n2*n2*1., z*60.);\n    float d = length(p-ro);\n\tfloat blur = .1;\n    vec3 rp = ClosestPoint(ro, rd, p);\n    float distFade = Remap(1., .7, .1, 1.5, 1.-pow(1.-z,6.));\n    float m = BokehMask(ro, rd, p, .05*d, blur);\n    m *= distFade*distFade*.5;\n    \n    m *= 1.-pow(sin(z*6.28*20.*n)*.5+.5, 20.);\n    vec3 randomCol = vec3(fract(n*-34.5), fract(n*4572.), fract(n*1264.));\n    vec3 col = mix(tailLightCol, streetLightCol, fract(n*-65.42));\n    col = mix(col, randomCol, n);\n    return m*col*.2;\n}\n\n\n\nvoid main( void ) {\n\n\t\n\n\t\n\t\n\tfloat t = time;\n    vec3 col = vec3(0.);\n    vec2 uv = gl_FragCoord.xy / viewportSize.xy; // 0 <> 1\n    \n    uv -= .5;\n    uv.x *= viewportSize.x/viewportSize.y;\n    \n    vec2 mouse = mouse.xy/viewportSize.xy;\n    \n    vec3 pos = vec3(.3, .15, 0.);\n    \n    float bt = t * 5.;\n    float h1 = N(floor(bt));\n    float h2 = N(floor(bt+1.));\n    float bumps = mix(h1, h2, fract(bt))*.1;\n    bumps = bumps*bumps*bumps*CAM_SHAKE;\n    \n    pos.y += bumps;\n    float lookatY = pos.y+bumps;\n    vec3 lookat = vec3(0.3, lookatY, 1.);\n    vec3 lookat2 = vec3(0., lookatY, .7);\n    lookat = mix(lookat, lookat2, sin(t*.1)*.5+.5);\n    \n    uv.y += bumps*4.;\n    CameraSetup(uv, pos, lookat, 2., mouse.x);\n   \n    t *= .03;\n    t += mouse.x;\n    \n    const float stp = 1./8.;\n\t\n\t\n    for(float i=0.0; i<1.0; i+=stp) {\n       col += StreetLights(i, t);\n    }\n    \n    for(float i=0.0; i<1.0; i+=stp) {\n        float n = N(i+floor(t));\n    \tcol += HeadLights(i+n*stp*.7, t);\n    }\n    \n    #ifdef HIGH_QUALITY\n    const float stp2 = 1./32.;\n    #else\n    stp = 1./16.;\n    #endif\n    for(float i=0.0; i<1.0; i+=stp) {\n       col += EnvironmentLights(i, t);\n    }\n    \n    col += TailLights(0., t);\n    col += TailLights(.5, t);\n    \n    col += sat(rd.y)*vec3(.6, .5, .9);\n    \n\tgl_FragColor = vec4(col, 1.);\n}"},function(t,e,n){n.r(e),e.default="// Author: Marco Gomez\t\t| @marcogomez_ | http://mgz.me\t|\n// Sample Shader for ShaderLab\t| http://shaderlab.mgz.me\t|\n#extension GL_OES_standard_derivatives : enable\n\n#ifdef GL_ES\nprecision ${maxShaderPrecision} float;\n#endif\n\nuniform\tvec2\tviewportSize;\nuniform\tvec2\tmouse;\nuniform\tfloat\ttime;\nuniform\tfloat\tsnd_uniform; // Try loading an MP3 with the Audio Input button above\nconst\tfloat\trndc = 43758.5453123;\n#define fragCoord gl_FragCoord\n#define fragColor gl_FragColor\n\nfloat rand (float n) { return fract(sin(n) * rndc); }\n\nvec2 rand2 (in vec2 p) { return fract(vec2(sin(p.x * 591.32 + p.y * 154.077), cos(p.x * 391.32 + p.y * 49.077))); }\n\nfloat noise1 (float p) { float fl = floor(p), fc = fract(p); return mix(rand(fl), rand(fl + 1.000004), fc); }\n\n// voronoi distance noise based on iq's articles ( http://www.iquilezles.org/www/index.htm )\nfloat voronoi (vec2 x) {\n\tvec2 p = floor(x), f = fract(x), res = vec2(8.0);\n\tfor(int j = -1; j <= 1; j ++)\n\tfor(int i = -1; i <= 1; i ++) {\n\t\tvec2 b = vec2(i, j), r = vec2(b) - f + rand2(p + b);\n\t\tfloat d = max(abs(r.x), abs(r.y));\n\t\tif(d < res.x) { res.y = res.x; res.x = d; } else if(d < res.y) { res.y = d; }\n\t}\n\treturn res.y - res.x;\n}\n\nvoid main (void) {\n\tvec4 channelA, channelB;\n\tvec2 xy = fragCoord.xy / viewportSize.xy;\txy = (xy - 0.5) * 3.0;\n\tvec2 xy2 = xy;\n\txy.x *= viewportSize.x / viewportSize.y;\n\tfloat v = 0.0; v = 0.21 - length(xy) * 0.21;\n\txy /= 0.6 + sin(time * 0.07) * 0.22;\n\txy += time * 0.12;\n\txy.y -= time * 0.12;\n\tfloat a = 0.7, f = 1.0;\n\tfor(int i = 0; i < 3; i ++) {\n\t\tfloat v1 = voronoi(xy * f + 5.0);\n\t\tfloat v2 = 0.0;\n\t\tif(i > 0) {\n\t\t\tfloat va = 0.0, vb = 0.0;\n\t\t\tif (i == 1) {\n\t\t\t\tva = 1.0 - smoothstep(0.0, 0.2, v1);\n\t\t\t\tv2 = voronoi(xy * f * 0.5 / 5.0 + 8694.0 + time / 7.0 - snd_uniform * 0.125);\n\t\t\t\tvb = 1.0 - smoothstep(0.0, 0.1, v2);\n\t\t\t} else {\n\t\t\t\tva = 1.0 - smoothstep(0.0, 0.1, v1);\n\t\t\t\tv2 = voronoi(xy * f * 0.5 + 50.0 + time / 5.0 + snd_uniform);\n\t\t\t\tvb = 1.0 - smoothstep(0.0, 0.08, v2);\n\t\t\t}\n\t\t\tv += a * pow(va * (0.5 + vb), 2.0);\n\t\t}\n\t\tv1 = 1.0 - smoothstep(0.0, 0.2, v1);\n\t\tv2 = mix(0.12, a * (noise1(v1 * 7.5 + 0.3)), sin(time / 7.0));\n\t\tif(i == 0) { v += v2; }\n\t\tf *= 3.0;\n\t\ta *= 0.7 + abs(sin(time / 3.0)) / 3.0;\n\t}\n\tv *= exp(-0.6 * length(xy2)) * 1.2;\n\tvec3 cexp = vec3(4.0, 1.5, 1.2);\n\tcexp *= 1.012;\n\tvec3 col = vec3(pow(v, cexp.x), pow(v, cexp.y), pow(v, cexp.z)) * 4.0;\n\tfragColor = vec4(col, 1.0);\n}\n"},function(t,e,n){n.r(e),e.default="/*\n\n\tTech tunnel\n\t\n\tby T_S=RTX1911=   @T_SDesignWorks\n\n*/\n\n\n#ifdef GL_ES\nprecision ${maxShaderPrecision} float;\n#endif\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 viewportSize;\nuniform float lowFreq;\n\n#define mycos(x) sin(1.57079633-x) \n\nvec3 roy(vec3 v, float x)\n{\n    return vec3(mycos(x)*v.x - sin(x)*v.z,v.y,sin(x)*v.x + mycos(x)*v.z);\n}\n\nvec3 rox(vec3 v, float x)\n{\n    return vec3(v.x,v.y*mycos(x) - v.z*sin(x),v.y*sin(x) + v.z*mycos(x));\n}\n\nfloat fdtun(vec3 rd, vec3 ro, float r)\n{\n\tfloat a = dot(rd.xy,rd.xy);\n  \tfloat b = dot(ro.xy,rd.xy);\n\tfloat d = (b*b)-(32.0*a*(dot(ro.xy,ro.xy)+(r*r)));\n  \treturn (-b+sqrt(abs(d)))/(3.75*a);\n}\n\nvec2 tunuv(vec3 pos){\n\treturn vec2(pos.z,(atan(pos.y, pos.x))/0.31830988618379);\n}\n\nvec3 checkerCol(vec2 loc, vec3 col)\n{\n\treturn mix(col, vec3(0.25), mod(step(fract(loc.x), 0.75) + step(fract(loc.y), 0.25),7.5));\n}\n\nvec3 lcheckcol(vec2 loc, vec3 col)\n{\n\treturn checkerCol(loc*15.0,col)*checkerCol(loc*1.75,col);\t\n}\nvoid main( void ) {\n\tvec3 dif = vec3(0.15,0.0,0.0);\n\tvec3 scoll = vec3(0.0,0.5,1.0);\n\tvec3 scolr = vec3(0.25,0.5,0.0);\n\tvec2 uv = (gl_FragCoord.xy/viewportSize.xy);\n\tvec3 ro = vec3(0.0,0.0,(time / 10.)*2.5);\n\tvec3 dir = normalize( vec3( -1.0 + 2.0*vec2(uv.x - .2, uv.y)* vec2(viewportSize.x/viewportSize.y, 1.0), -1.33 ) );\n\n\tfloat ry = (time / 10.)*0.3;\n\t\n\tdir = roy(rox(dir,((time + mouse.y / 399.) / 10.)*0.25),(time / 10.)*-0.5);\n\tvec3 lro = ro-dif;\n\tvec3 rro = ro+dif;\n\n\tconst float r = 1.0;\n\tfloat ld = fdtun(dir,lro,r);\n\tfloat rd = fdtun(dir,rro,r);\n\tvec2 luv = tunuv(ro + ld*dir);\n\tvec2 ruv = tunuv(ro + rd*dir);\n\tvec3 coll = lcheckcol(luv*.25,scoll)*(20.0/exp(sqrt(ld)));\n\tvec3 colr = lcheckcol(ruv*.5,scolr)*(20.0/exp(sqrt(rd)));\n\tgl_FragColor = vec4(sqrt(coll+2.5*lowFreq*1.0+(colr-1.0)+lowFreq*20.0),1.0);\n}\n"},function(t,e,n){n.r(e),e.default="precision ${maxShaderPrecision} float;\n\nattribute vec2 coords;\nuniform vec2 position;\n\nuniform vec2  worldPosition;\nuniform vec2  worldScale;\nuniform vec2  viewportSize;\n\nvoid main(void) {\n\tvec2 pos = vec2( coords );\n\n\tpos -= position;\n\tpos -= worldPosition;\n\tpos /= worldScale;\n\tpos /= viewportSize;\n\tpos -= 1.;\n\n   \tgl_Position = vec4( pos.xy, 0., 1.);\n}"},function(t,e,n){n.r(e),e.default="precision ${maxShaderPrecision} float;\n\nattribute vec2 coords;\n\nuniform vec2  position;\n\nuniform vec2  worldPosition;\nuniform vec2  worldScale;\nuniform vec2  viewportSize;\n\nuniform vec2  selectedPosition;\n\nvoid main(void) {\n    vec2 pos = vec2( coords );\n\n    float offsetX = ( selectedPosition.x - worldPosition.x ) / worldScale.x;\n\n    pos.x += offsetX;\n   \n   \tpos.x /= viewportSize.x;\n    pos.y *= 2.;\n    pos -= 1.;\n\n  \tgl_Position = vec4( pos.xy, 0., 1.);\n}"},function(t,e,n){n.r(e),e.default="precision ${maxShaderPrecision} float;\n\nattribute vec2 coords;\n\nuniform vec2  position;\n\nuniform vec2  worldPosition;\nuniform vec2  worldScale;\nuniform vec2  viewportSize;\n\nuniform float lineIndex;\nuniform vec2  gridSteps;\n\nvoid main(void) {\n    vec2 pos = vec2( coords );\n    vec2 steps = vec2( gridSteps / worldScale );\n\n    pos.y += steps.y * lineIndex;\n    pos.y /= viewportSize.y;\n    pos.x *= 2.;\n    pos -= 1.;\n\n  \tgl_Position = vec4( pos.xy, 0., 1.);\n}"},function(t,e,n){n.r(e),e.default="precision ${maxShaderPrecision} float;\n\nattribute vec2 coords;\nattribute vec2 normal;\n\nuniform vec2  position;\nuniform float thickness;\nuniform float opacity;\n\nuniform float resolution;\nuniform vec2  worldPosition;\nuniform vec2  worldScale;\nuniform vec2  viewportSize;\n\nvec2 scaleNormal ( vec2 normal, vec2 scale ) {\n   normal /= vec2( scale.y, scale.x );    \n   float hypo = length( normal );\n   return( vec2( ( normal.x / hypo ), ( normal.y / hypo ) ) );\n}\n\n\nvec2 translate( vec2 pos ) {\n   pos -= position;\n   pos -= worldPosition;\n   return( pos );\n}\n\nvec2 project( vec2 pos ) {\n   return( pos / worldScale );\n}\n\n\nvec2 projectToScreen( vec2 pos ) {\n   pos /= viewportSize;\n   pos -= 1.;\n   return( pos );\n}\n\n\nvoid main(void) {\n   \tvec2 pos = translate( coords );\n      vec2 n = scaleNormal( normal, worldScale );\n\n   \tpos = project( pos );\n\n   \tpos += ( n * ( thickness * resolution ) );\n\n   \tpos = projectToScreen( pos );\n\n   \tgl_Position = vec4( pos.xy, 0., 1. );\n\n}"},function(t,e,n){n.r(e);var o=n(0);var i,r,a,c=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.glengine=new o.default,document.body.appendChild(this.glengine.domElement),o.default.MainLoop.addTask(function(){e.glengine.render(!0)}),o.default.MainLoop.start();var n=800,i=new o.default.Mesh({geometry:new o.default.RectGeometry({width:n,height:n}),material:new o.default.Material({fragmentShader:"frag.fluid_m",vertexShader:"vert.default",uniforms:{diffuse:o.default.ChartMath.color("#ff0000"),opacity:o.default.ChartMath.float32(1)}})});i.position.x=0,i.position.y=0;var r=new o.default.Mesh({geometry:new o.default.RectGeometry({width:n,height:n}),material:new o.default.Material({fragmentShader:"frag.framework",vertexShader:"vert.default",uniforms:{diffuse:o.default.ChartMath.color("#ff0000"),opacity:o.default.ChartMath.float32(1)}})});r.position.x=400,r.position.y=0;var a=new o.default.Mesh({geometry:new o.default.RectGeometry({width:n,height:n}),material:new o.default.Material({fragmentShader:"frag.fluid",vertexShader:"vert.default",uniforms:{diffuse:o.default.ChartMath.color("#ff0000"),opacity:o.default.ChartMath.float32(1)}})});a.position.x=400,a.position.y=400;var c=new o.default.Mesh({geometry:new o.default.RectGeometry({width:n,height:n}),material:new o.default.Material({fragmentShader:"frag.ocean",vertexShader:"vert.default",uniforms:{diffuse:o.default.ChartMath.color("#ff0000"),opacity:o.default.ChartMath.float32(1)}})});c.position.x=0,c.position.y=400,this.glengine.addChild(i),this.glengine.addChild(r),this.glengine.addChild(a),this.glengine.addChild(c),this.glengine.setScale(1,1),this.glengine.setPosition(-this.glengine.size.x/2,-this.glengine.size.y/2)};i=c,r="GLEngine",a=o.default,r in i?Object.defineProperty(i,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[r]=a;var l=c;window.App=l,window.app=new l}])});